{"type":"getPostByPath","data":{"title":"table-module","date":"2022-08-14T16:00:00.000Z","description":"","categories":[{"name":"技术","_id":"cl8t487uc000dbw4912dw47qv"},{"name":"Lua","_id":"cl8t487vn0017bw49eh72411a"}],"tags":[{"name":"Dice","_id":"cl8t487ub000cbw498hqe1qub"}],"content":"<div class=\"note success\"><p><strong>table module</strong></p>\n<blockquote>\n<p>对数组操作函数的拓展，利用这些函数可以更好的进行数据操作。</p>\n</blockquote>\n</div>\n\n<h1 id=\"table-module-更多的数组操作\"><a href=\"#table-module-更多的数组操作\" class=\"headerlink\" title=\"table-module:更多的数组操作\"></a>table-module:更多的数组操作</h1><blockquote>\n<p>使用《署名—禁止演绎 4.0 协议国际版》（CC BY-ND 4.0）进行授权。<br><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5kLzQuMC8=\">https://creativecommons.org/licenses/by-nd/4.0/<i class=\"fa fa-external-link-alt\"></i></span></p>\n</blockquote>\n<hr>\n<blockquote>\n<p>[ toc ] 更多操作，更多的可能<del>猝死</del>。</p>\n</blockquote>\n<hr>\n<h2 id=\"一、基本信息\"><a href=\"#一、基本信息\" class=\"headerlink\" title=\"一、基本信息\"></a>一、基本信息</h2><ul>\n<li><a href=\"\">二次修改</a>作者： 简律纯</li>\n<li>联系方式：qq:a2c29k9</li>\n<li>版本：v1.0</li>\n<li>更新日期：暂无</li>\n<li>关键词：暂无</li>\n<li>许可协议：CC BY-ND 4.0</li>\n</ul>\n<hr>\n<table>\n<thead>\n<tr>\n<th align=\"left\">#</th>\n<th align=\"center\">函数名</th>\n<th align=\"center\">简单介绍</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">1</td>\n<td align=\"center\">table.nums</td>\n<td align=\"center\">计算表格包含的字段数量</td>\n</tr>\n<tr>\n<td align=\"left\">2</td>\n<td align=\"center\">table.keys</td>\n<td align=\"center\">返回指定表格中的所有键</td>\n</tr>\n<tr>\n<td align=\"left\">3</td>\n<td align=\"center\">table.values</td>\n<td align=\"center\">返回指定表格中的所有值</td>\n</tr>\n<tr>\n<td align=\"left\">4</td>\n<td align=\"center\">table.merge</td>\n<td align=\"center\">将来源表格中所有键及其值复制到目标表格对象中</td>\n</tr>\n<tr>\n<td align=\"left\">5</td>\n<td align=\"center\">table.indexof</td>\n<td align=\"center\">从表格中查找指定值，返回其索引</td>\n</tr>\n<tr>\n<td align=\"left\">6</td>\n<td align=\"center\">table.keyof</td>\n<td align=\"center\">从表格中查找指定值，返回其 key</td>\n</tr>\n<tr>\n<td align=\"left\">7</td>\n<td align=\"center\">table.removebyvalue</td>\n<td align=\"center\">从表格中删除指定值，返回删除的值的个数</td>\n</tr>\n<tr>\n<td align=\"left\">8</td>\n<td align=\"center\">table.map</td>\n<td align=\"center\">对表格中每一个值执行一次指定的函数，并用函数返回值更新表格内容</td>\n</tr>\n<tr>\n<td align=\"left\">9</td>\n<td align=\"center\">table.walk</td>\n<td align=\"center\">对表格中每一个值执行一次指定的函数，但不改变表格内容</td>\n</tr>\n<tr>\n<td align=\"left\">10</td>\n<td align=\"center\">table.filter</td>\n<td align=\"center\">对表格中每一个值执行一次指定的函数</td>\n</tr>\n<tr>\n<td align=\"left\">11</td>\n<td align=\"center\">table.unique</td>\n<td align=\"center\">遍历表格，确保其中的值唯一</td>\n</tr>\n</tbody></table>\n<h2 id=\"二、详细介绍\"><a href=\"#二、详细介绍\" class=\"headerlink\" title=\"二、详细介绍\"></a>二、详细介绍</h2><h3 id=\"1-table-nums-t\"><a href=\"#1-table-nums-t\" class=\"headerlink\" title=\"1.table.nums(t)\"></a>1.table.nums(t)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 计算表格包含的字段数量</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] nums</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table t 要检查的表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @return integer#integer </span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 计算表格包含的字段数量</span></span><br><span class=\"line\"><span class=\"comment\">-- Lua table 的 &quot;#&quot; 操作只对依次排序的数值下标数组有效，</span></span><br><span class=\"line\"><span class=\"comment\">-- table.nums() 则计算 table 中所有不为 nil 的值的个数。</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-table-keys-hashtable\"><a href=\"#2-table-keys-hashtable\" class=\"headerlink\" title=\"2.table.keys(hashtable)\"></a>2.table.keys(hashtable)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 返回指定表格中的所有键</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] keys</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table hashtable 要检查的表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @return table#table </span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 返回指定表格中的所有键</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> hashtable = &#123;a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>, c = <span class=\"number\">3</span>&#125;</span><br><span class=\"line\"><span class=\"keyword\">local</span> keys = <span class=\"built_in\">table</span>.keys(hashtable)</span><br><span class=\"line\"><span class=\"comment\">-- keys = &#123;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-table-values-hashtable\"><a href=\"#3-table-values-hashtable\" class=\"headerlink\" title=\"3.table.values(hashtable)\"></a>3.table.values(hashtable)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 返回指定表格中的所有值</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] values</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table hashtable 要检查的表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @return table#table </span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 返回指定表格中的所有值</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> hashtable = &#123;a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>, c = <span class=\"number\">3</span>&#125;</span><br><span class=\"line\"><span class=\"keyword\">local</span> values = <span class=\"built_in\">table</span>.values(hashtable)</span><br><span class=\"line\"><span class=\"comment\">-- values = &#123;1, 2, 3&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-table-merge-dest-src\"><a href=\"#4-table-merge-dest-src\" class=\"headerlink\" title=\"4.table.merge(dest, src)\"></a>4.table.merge(dest, src)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 将来源表格中所有键及其值复制到目标表格对象中，如果存在同名键，则覆盖其值</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] merge</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table dest 目标表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table src 来源表格</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 将来源表格中所有键及其值复制到目标表格对象中，如果存在同名键，则覆盖其值</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> dest = &#123;a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>&#125;</span><br><span class=\"line\"><span class=\"keyword\">local</span> src  = &#123;c = <span class=\"number\">3</span>, d = <span class=\"number\">4</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">table</span>.merge(dest, src)</span><br><span class=\"line\"><span class=\"comment\">-- dest = &#123;a = 1, b = 2, c = 3, d = 4&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-table-indexof-array-value-begin\"><a href=\"#5-table-indexof-array-value-begin\" class=\"headerlink\" title=\"5.table.indexof(array, value, begin)\"></a>5.table.indexof(array, value, begin)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 从表格中查找指定值，返回其索引，如果没找到返回 false</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] indexof</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table array 表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @param mixed value 要查找的值</span></span><br><span class=\"line\"><span class=\"comment\">-- @param integer begin 起始索引值</span></span><br><span class=\"line\"><span class=\"comment\">-- @return integer#integer </span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 从表格中查找指定值，返回其索引，如果没找到返回 false</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> array = &#123;<span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">table</span>.indexof(array, <span class=\"string\">&quot;b&quot;</span>)) <span class=\"comment\">-- 输出 2</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-table-keyof-hashtable-value\"><a href=\"#6-table-keyof-hashtable-value\" class=\"headerlink\" title=\"6.table.keyof(hashtable, value)\"></a>6.table.keyof(hashtable, value)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 从表格中查找指定值，返回其 key，如果没找到返回 nil</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] keyof</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table hashtable 表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @param mixed value 要查找的值</span></span><br><span class=\"line\"><span class=\"comment\">-- @return string#string  该值对应的 key</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 从表格中查找指定值，返回其 key，如果没找到返回 nil</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> hashtable = &#123;name = <span class=\"string\">&quot;dualface&quot;</span>, comp = <span class=\"string\">&quot;chukong&quot;</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">table</span>.keyof(hashtable, <span class=\"string\">&quot;chukong&quot;</span>)) <span class=\"comment\">-- 输出 comp</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-table-removebyvalue-array-value-removeall\"><a href=\"#7-table-removebyvalue-array-value-removeall\" class=\"headerlink\" title=\"7.table.removebyvalue(array, value, removeall)\"></a>7.table.removebyvalue(array, value, removeall)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 从表格中删除指定值，返回删除的值的个数</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] removebyvalue</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table array 表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @param mixed value 要删除的值</span></span><br><span class=\"line\"><span class=\"comment\">-- @param boolean removeall 是否删除所有相同的值</span></span><br><span class=\"line\"><span class=\"comment\">-- @return integer#integer </span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 从表格中删除指定值，返回删除的值的个数</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> array = &#123;<span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">table</span>.removebyvalue(array, <span class=\"string\">&quot;c&quot;</span>, <span class=\"literal\">true</span>)) <span class=\"comment\">-- 输出 2</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-table-map-t-fn\"><a href=\"#8-table-map-t-fn\" class=\"headerlink\" title=\"8.table.map(t, fn)\"></a>8.table.map(t, fn)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 对表格中每一个值执行一次指定的函数，并用函数返回值更新表格内容</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] map</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table t 表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @param function fn 函数</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 对表格中每一个值执行一次指定的函数，并用函数返回值更新表格内容</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> t = &#123;name = <span class=\"string\">&quot;dualface&quot;</span>, comp = <span class=\"string\">&quot;chukong&quot;</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">table</span>.map(t, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(v, k)</span></span></span><br><span class=\"line\">    <span class=\"comment\">-- 在每一个值前后添加括号</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;[&quot;</span> .. v .. <span class=\"string\">&quot;]&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">end</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 输出修改后的表格内容</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(t) <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(k, v)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">-- 输出</span></span><br><span class=\"line\"><span class=\"comment\">-- name [dualface]</span></span><br><span class=\"line\"><span class=\"comment\">-- comp [chukong]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- fn 参数指定的函数具有两个参数，并且返回一个值。原型如下：</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">map_function</span><span class=\"params\">(value, key)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> value</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9-table-walk-t-fn\"><a href=\"#9-table-walk-t-fn\" class=\"headerlink\" title=\"9.table.walk(t, fn)\"></a>9.table.walk(t, fn)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 对表格中每一个值执行一次指定的函数，但不改变表格内容</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] walk</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table t 表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @param function fn 函数</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 对表格中每一个值执行一次指定的函数，但不改变表格内容</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> t = &#123;name = <span class=\"string\">&quot;dualface&quot;</span>, comp = <span class=\"string\">&quot;chukong&quot;</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">table</span>.walk(t, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(v, k)</span></span></span><br><span class=\"line\">    <span class=\"comment\">-- 输出每一个值</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(v)</span><br><span class=\"line\"><span class=\"keyword\">end</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- fn 参数指定的函数具有两个参数，没有返回值。原型如下：</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">map_function</span><span class=\"params\">(value, key)</span></span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-table-filter-t-fn\"><a href=\"#10-table-filter-t-fn\" class=\"headerlink\" title=\"10.table.filter(t, fn)\"></a>10.table.filter(t, fn)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 对表格中每一个值执行一次指定的函数，如果该函数返回 false，则对应的值会从表格中删除</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] filter</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table t 表格</span></span><br><span class=\"line\"><span class=\"comment\">-- @param function fn 函数</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 对表格中每一个值执行一次指定的函数，如果该函数返回 false，则对应的值会从表格中删除</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> t = &#123;name = <span class=\"string\">&quot;dualface&quot;</span>, comp = <span class=\"string\">&quot;chukong&quot;</span>&#125;</span><br><span class=\"line\"><span class=\"built_in\">table</span>.filter(t, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(v, k)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> v ~= <span class=\"string\">&quot;dualface&quot;</span> <span class=\"comment\">-- 当值等于 dualface 时过滤掉该值</span></span><br><span class=\"line\"><span class=\"keyword\">end</span>)</span><br><span class=\"line\"><span class=\"comment\">-- 输出修改后的表格内容</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(t) <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(k, v)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">-- 输出</span></span><br><span class=\"line\"><span class=\"comment\">-- comp chukong</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- fn 参数指定的函数具有两个参数，并且返回一个 boolean 值。原型如下：</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">map_function</span><span class=\"params\">(value, key)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">or</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-table-unique-array\"><a href=\"#11-table-unique-array\" class=\"headerlink\" title=\"11.table.unique(array)\"></a>11.table.unique(array)</h3><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 遍历表格，确保其中的值唯一</span></span><br><span class=\"line\"><span class=\"comment\">-- @function [parent=#table] unique</span></span><br><span class=\"line\"><span class=\"comment\">-- @param table array 数组</span></span><br><span class=\"line\"><span class=\"comment\">-- @return table#table  包含所有唯一值的新表格</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">-- 遍历表格，确保其中的值唯一</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> t = &#123;<span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>&#125; <span class=\"comment\">-- 重复的 a 会被过滤掉</span></span><br><span class=\"line\"><span class=\"keyword\">local</span> n = <span class=\"built_in\">table</span>.unique(t)</span><br><span class=\"line\"><span class=\"keyword\">for</span> k, v <span class=\"keyword\">in</span> <span class=\"built_in\">pairs</span>(n) <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(v)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">-- 输出</span></span><br><span class=\"line\"><span class=\"comment\">-- a</span></span><br><span class=\"line\"><span class=\"comment\">-- b</span></span><br><span class=\"line\"><span class=\"comment\">-- c</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"三、下载\"><a href=\"#三、下载\" class=\"headerlink\" title=\"三、下载\"></a>三、下载</h2><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2N5cHJlc3MwNTIyL2N5cHJlc3MwNTIyLmdpdGh1Yi5pby9yZWxlYXNlcy9kb3dubG9hZC9tb2R1bGUvdGFibGVfbW9kdWxlLnppcA==\">table-module.zip<i class=\"fa fa-external-link-alt\"></i></span></p>\n","_path":"2022/08/15/table-module/","_link":"https://cypress.github.io/2022/08/15/table-module/","_id":"cl8t487vj0013bw495uhrc6nu"}}