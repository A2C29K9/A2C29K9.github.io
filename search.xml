<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>listen2me</title>
    <url>/2022/11/20/listen2me/</url>
    <content><![CDATA[<div class="note success"><h1 id="listen2me"><a href="#listen2me" class="headerlink" title="listen2me"></a><strong>listen2me</strong></h1><p>使用mml作曲。</p>
</div>

<p><a href="https://github.com/A2C29K9/listen2me/commits/Windows-Version"><img src="https://img.shields.io/github/last-commit/A2C29K9/listen2me"></a><a href="https://github.com/A2C29K9/listen2me/issues"><img src="https://img.shields.io/github/issues/A2C29K9/listen2me"></a><a href="https://github.com/A2C29K9/listen2me/pulls"><img src="https://img.shields.io/github/issues-pr/A2C29K9/listen2me"></a><a href="https://github.com/A2C29K9/listen2me/releases"><img src="https://img.shields.io/github/v/release/A2C29K9/listen2me?include_prereleases"></a><a href="https://github.com/A2C29K9/listen2me/releases/download/v1.0.8/listen2me_v1.0.8.zip"><img src="https://img.shields.io/github/downloads/A2C29K9/listen2me/total.svg" alt="download"></a></p>
<p>此分支为Windows版本。</p>
<p>listen2me是为Dice!编写的Lua脚本，用于mml(Music Macro Language)作曲试听。</p>
<p>如果在使用过程中遇到了困难，欢迎到原仓库提交<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0EyQzI5SzkvbGlzdGVuMm1lL2lzc3Vlcy9uZXc=">issue<i class="fa fa-external-link-alt"></i></span>；如果在使用过程中修改出更有意思的玩法，也欢迎到原仓库提交<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0EyQzI5SzkvbGlzdGVuMm1lL3B1bGxz">PR<i class="fa fa-external-link-alt"></i></span>。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;mod&quot;</span>:<span class="string">&quot;listen2me&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;author&quot;</span>:<span class="string">&quot;简律纯&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;ver&quot;</span>:<span class="string">&quot;2.1.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;dice_build&quot;</span>:<span class="number">612</span>,</span><br><span class="line">    <span class="attr">&quot;brief&quot;</span>:<span class="string">&quot;使用mml作曲&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;comment&quot;</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;helpdoc&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;listen2me&quot;</span>:<span class="string">&quot;【listen2me[Windows]】\n使用mml语言进行作曲\nhttps://github.com/A2C29K9/listen2me&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;loopstraining&quot;</span>:<span class="string">&quot;基于listen2me的听音训练娱乐模块&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><input checked="" disabled="" type="checkbox"> Windows 版本</li>
<li><input disabled="" type="checkbox"> Linux 版本</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li><p>Dice版本2.6.5beta12(624+)以上安装方法:</p>
<ol>
<li>在 <code>./DiceQQ/conf/mod/source.list</code>文件内（没有mod文件夹和这文件就新建）输入 <code>https://ssjskfjdj.netlify.app/Module/</code>。</li>
<li>使用 <code>.system load</code>命令重载bot，这样做的目的是为了让步骤1里的远程地址生效。</li>
<li>对bot发送 <code>.mod get listen2me</code>命令，等待安装。</li>
<li>回到第二步，这样做的目的是为了让mod被加载。</li>
<li>Enjoy Your Self!</li>
</ol>
</li>
<li><p>Dice版本2.6.4b(612+)以上安装方法：</p>
<ol>
<li>浏览器访问 <code>https://github.com/ssJSKFJDJ/listen2me</code>并点击绿色按钮 <code>Code</code>下的 <code>Download Zip</code>按钮下载仓库压缩包。</li>
<li>解压压缩包，将里面的文件和文件夹全部丢进 <code>./DiceQQ/mod/</code>文件夹内。</li>
<li>使用 <code>.system load</code>命令重载。</li>
<li>Enjoy Your Self!</li>
</ol>
</li>
</ul>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><a href="/script/mml2mid.lua">使用功能模块前先根据注释内容修改合适的配置</a></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--------------------settings---------------------</span></span><br><span class="line">Settings = &#123;</span><br><span class="line">    _FRAMWORK = <span class="string">&quot;Gocq&quot;</span>, <span class="comment">-- &quot;Mirai&quot;,</span></span><br><span class="line">    <span class="comment">-- 框架名称,必填,可选参数:&#x27;Mirai&#x27;或&#x27;Gocq&#x27;(默认).</span></span><br><span class="line"></span><br><span class="line">    _ONEFILE = <span class="string">&quot;xx&quot;</span>, <span class="comment">-- os.date(&quot;%A&quot;),</span></span><br><span class="line">    <span class="comment">-- 是否将每次的乐谱记录在同一个文件内.</span></span><br><span class="line"></span><br><span class="line">    _WARNING = <span class="number">18</span>,</span><br><span class="line">    <span class="comment">-- 音频文件过多报警上限,未填时默认18</span></span><br><span class="line"></span><br><span class="line">    _AUTOCLR = <span class="number">21</span>,</span><br><span class="line">    <span class="comment">-- 音频文件自动清理，未填时默认21</span></span><br><span class="line"></span><br><span class="line">    _SUBNAME = <span class="string">&quot;.mp3&quot;</span>, <span class="comment">-- &quot;.wav&quot;,</span></span><br><span class="line">    <span class="comment">-- 规定输出格式,填写mp3时需要安装ffmpeg.</span></span><br><span class="line"></span><br><span class="line">    _UPLOAD = <span class="literal">false</span>, <span class="comment">-- false,</span></span><br><span class="line">    <span class="comment">-- 是否在发出语音同时上传mid文件(仅限Gocq).</span></span><br><span class="line">    <span class="comment">-- 对应下参数_APIPORT.</span></span><br><span class="line"></span><br><span class="line">    _APIPORT = <span class="number">15700</span> <span class="comment">-- nil</span></span><br><span class="line">    <span class="comment">-- Gocq 本地 API 端口,填nil时将自动搜寻,若报错请自行填入.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>一般指令格式:<code>l2m&gt;[opt=clr|mml|...]</code></p>
<ul>
<li><p>清理缓存<br>成功执行一次mml命令后会在 <code>./project/</code>生成这几样东西:</p>
<ol>
<li>fileName.mid</li>
<li>fileName.mml</li>
<li>fileName.mp3|wav</li>
</ol>
<p>这些就是所谓的缓存，一次生成三个，因此才有了 <code>_WARNING</code>和 <code>_AUTOCLR</code>配置——但要注意的是，这些配置的存在只是为了那些不会主动的清理的人罢了，如果你比较勤快那么我想除了添加 <code>_ONEFILE</code>配置项外，你一定会经常使用 <code>l2m&gt;clr</code>指令去清理这些缓存的。</p>
</li>
<li><p>生成曲谱<br>指令格式:<code>l2m&gt;[mml]</code>，由于mml语法过于繁琐因此在这里不一一赘述，只是做几个示例，日后会写专门的文档系统介绍此功能模块的mml语法。</p>
<ol>
<li>单轨示例</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">l2m&gt;A cdefgab</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>多轨示例</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">l2m&gt;</span><br><span class="line">A l8d+&gt;d+d+d+d4&lt;a+4&gt;cc&lt;a+g+a+2d+&gt;d+d+d+d4.&lt;a+b+2g+4a+4d+&gt;d+d+fd4&lt;a+4&gt;cl16d+f8.d+&lt;a+4.&amp;a+gfl8d+&gt;d+d+gfd+dl16&lt;a+&gt;d+4.&amp;d+cdd+8dd+8.&lt;a+8&gt;fgf2gg8.fd+f8cd+4&amp;d+&lt;a+8&gt;gg8.fd+f8d+&lt;a+4.&amp;a+&gt;gg8.fd+f8cd+4d+d+8dd8.cc8.&lt;a+a+8.&gt;cd+g+8.g8.fd+f8cd+4&amp;d+&lt;a+8&gt;dd8d+8f&lt;a+8ga+8&gt;f8d+d+8.&lt;a+a+8g+gg+8&gt;d+d+2&lt;a+a+8g+gg+8&gt;ff4.&amp;fd+8d+8df8d+2.</span><br><span class="line"></span><br><span class="line">B &#x2F;*M 0  *&#x2F;  &lt;c8g8&gt;d+4&lt;&lt;g8&gt;d8a+4&#x2F;*M 1  *&#x2F;  &lt;g+8&gt;d+8&lt;a+4&gt;d+4d4&#x2F;*M 2  *&#x2F;  c8g8&gt;d+4&lt;&lt;g8&gt;d8a+4&#x2F;*M 3  *&#x2F;  &lt;g+8&gt;d+8&gt;c8&lt;d+8&lt;g+8&gt;d+8&lt;a+8b8&#x2F;*M 4  *&#x2F;  &gt;c8g8&gt;d+8&lt;g8&lt;g8&gt;d8a+8d8&#x2F;*M 5  *&#x2F;  &lt;g+8&gt;d+8&lt;a+4&gt;d+8a+8d4&#x2F;*M 6  *&#x2F;  c8g8&gt;d+8&lt;g8&lt;g8&gt;d8a+8d8&#x2F;*M 7  *&#x2F;  &lt;g+8&gt;d+8&gt;c8.&lt;&lt;a+16b4g+4&#x2F;*M 8  *&#x2F;  a+8&gt;f8a+4&lt;&lt;a+2&#x2F;*M 9  *&#x2F;  &gt;g+8&gt;d+8&gt;c8&lt;d+8&lt;g+8&gt;d8a+8d8&#x2F;*M 10 *&#x2F;  &lt;g8&gt;d+8a+8d+8c8g8&gt;d8d+8&#x2F;*M 11 *&#x2F;  &lt;&lt;f8&gt;g8&gt;d+8&lt;g+8&lt;a+8&gt;f8&gt;d8&lt;a+8&#x2F;*M 12 *&#x2F;  &lt;d+8a+8&gt;d+8&lt;a+8&gt;c+8&lt;a+8&gt;c+8&lt;&lt;a+8&#x2F;*M 13 *&#x2F;  &gt;g+8&gt;d+8&gt;c8&lt;d+8&lt;g+8&gt;d8a+8d8&#x2F;*M 14 *&#x2F;  &lt;g8&gt;d8.&lt;g8.&gt;c4&lt;d8d+8&#x2F;*M 15 *&#x2F;  f8&gt;c8g+8c8&lt;g8&gt;d+8a+8d+8&#x2F;*M 16 *&#x2F;  &lt;g+8&gt;d+8&gt;c8&lt;d+16.&lt;&lt;a+32o4d2&#x2F;*M 17 *&#x2F;  &lt;&lt;d+16a+16&gt;g16g+16a+8.&lt;d+4.&amp;d+16d+8</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="音源"><a href="#音源" class="headerlink" title="音源"></a>音源</h2><blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9tdXNlc2NvcmUub3JnL3poLWhhbnMvJWU3JTk0JWE4JWU2JTg4JWI3JWU2JTg5JThiJWU1JTg2JThjL3NvdW5kZm9udC0lZTklOWYlYjMlZTglODklYjIlZTUlYmElOTM=">Musescore<i class="fa fa-external-link-alt"></i></span> 提供的三个常见音色库</p>
</blockquote>
<ul>
<li>FluidR3_GM.sf2 (未压缩大小 141 MB)<br>下载 <span class="exturl" data-url="aHR0cDovL3d3dy5tdXNlc2NvcmUub3JnL2Rvd25sb2FkL2ZsdWlkLXNvdW5kZm9udC50YXIuZ3o=">Fluid-soundfont.tar.gz<i class="fa fa-external-link-alt"></i></span></li>
<li>GeneralUser_GS_1.44-MuseScore.sf2 (未压缩大小 29.8 MB)<br>下载 <span class="exturl" data-url="aHR0cDovL3d3dy5zY2hyaXN0aWFuY29sbGlucy5jb20vc291bmRmb250cy9HZW5lcmFsVXNlcl9HU18xLjQ0LU11c2VTY29yZS56aXA=">GeneralUser_GS_1.44-MuseScore.zip<i class="fa fa-external-link-alt"></i></span> (承蒙 S. Christian Collins 而提供)</li>
<li>TimGM6mb.sf2 (未压缩大小 5.7 MB)<br>下载 <span class="exturl" data-url="aHR0cDovL21zY29yZS5zdm4uc291cmNlZm9yZ2UubmV0L3ZpZXd2Yy9tc2NvcmUvdHJ1bmsvbXNjb3JlL3NoYXJlL3NvdW5kL1RpbUdNNm1iLnNmMg==">modified TimGM6mb.sf2<i class="fa fa-external-link-alt"></i></span> (承蒙 Tim Brechbill 而提供)</li>
</ul>
<blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ZsdWlkU3ludGgvZmx1aWRzeW50aC93aWtpL1NvdW5kRm9udA==">FluidSynth<i class="fa fa-external-link-alt"></i></span> 提供的音源下载网站</p>
</blockquote>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cucG9seXBob25lLXNvdW5kZm9udHMuY29tL2Rvd25sb2FkLXNvdW5kZm9udHM=">Polyphone Soundfont Collection<i class="fa fa-external-link-alt"></i></span> - A collection of Soundfonts on the Polyphone website</li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5oYW1tZXJzb3VuZC5uZXQv">Hammersound<i class="fa fa-external-link-alt"></i></span> - A nice resource for downloading free SoundFont instrument files.</li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5wZXJzb25hbGNvcHkuY29tL3NmYXJrZm9udHMxLmh0bQ==">Magic Sound Font, version 2.0<i class="fa fa-external-link-alt"></i></span> (68 MB)</li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5hcmFjaG5vc29mdC5jb20vbWFpbi9kb3dubG9hZC5waHA/aWQ9c291bmRmb250LXNmMg==">Arachno SoundFont, version 1.0<i class="fa fa-external-link-alt"></i></span> (148MB)</li>
<li><span class="exturl" data-url="aHR0cDovL3NvdXJjZWZvcmdlLm5ldC9wL21zY29yZS9jb2RlL0hFQUQvdHJlZS90cnVuay9tc2NvcmUvc2hhcmUvc291bmQvVGltR002bWIuc2YyP2Zvcm1hdD1yYXc=">TimGM6mb<i class="fa fa-external-link-alt"></i></span> (6 MB)</li>
<li><span class="exturl" data-url="ZnRwOi8vZnRwLm9zdW9zbC5vcmcvcHViL211c2VzY29yZS9zb3VuZGZvbnQvTXVzZVNjb3JlX0dlbmVyYWwvTXVzZVNjb3JlX0dlbmVyYWwuc2Yy">MuseScore_General.sf2<i class="fa fa-external-link-alt"></i></span> (208 MB)</li>
<li><span class="exturl" data-url="aHR0cDovL21pZGthci5jb20vc291bmRmb250cy8=">Timbres Of Heaven GM_GS_XG_SFX V 3.4<i class="fa fa-external-link-alt"></i></span> (246 MB)</li>
<li><span class="exturl" data-url="aHR0cDovL2Z0cC5vc3Vvc2wub3JnL3B1Yi9tdXNlc2NvcmUvc291bmRmb250L1NvbmF0aW5hX1N5bXBob25pY19PcmNoZXN0cmFfU0YyLnppcA==">Sonatina Symphonic Orchestra<i class="fa fa-external-link-alt"></i></span> (503 MB uncompressed)</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zaXRlcy5nb29nbGUuY29tL3ZpZXcvaGVkLXNvdW5kcy9hZWdlYW4tc3ltcGhvbmljLW9yY2hlc3RyYQ==">Aegean Symphonic Orchestra v2.5 universal<i class="fa fa-external-link-alt"></i></span> (350 MB)</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zaXRlcy5nb29nbGUuY29tL3ZpZXcvaGVkLXNvdW5kcy9zYWxhbWFuZGVyLWM1LWxpZ2h0">Salamander C5 Light<i class="fa fa-external-link-alt"></i></span> (25 MB)</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><span class="exturl" data-url="aHR0cDovL2hwYy5qcC9+bW1sMm1pZA==">http://hpc.jp/~mml2mid<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vdGltaWRpdHkuY2ZnLjU=">https://man.archlinux.org/man/timidity.cfg.5<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vY29tbXVuaXR5L3RpbWlkaXR5KysvdGltaWRpdHkuMS5lbg==">https://man.archlinux.org/man/community/timidity++/timidity.1.en<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><blockquote>
<p>此日志写的比工程文件要晚那么一点。</p>
</blockquote>
<hr>
<details>
<summary>2022年11月20日 开了一个新的坑——听音练习。</summary>
<h5>新增</h5>
1.<i>loopstraining</i>新增听音练习娱乐模块。
<h5>改动</h5>
1.<i>mml2mid.lua</i>将所有的局部变量名称首字母大写。
</details>


<details>
<summary>2022年10月29日 发现了几个bug，更新了readme。</summary>
<h5>issue</h5>
1.<i>mml2mid.lua</i><b>timidity</b>线程问题，速度过快会导致timidity错误。
<h5>新增</h5>
1.<i>readme.md</i>新增指令介绍。
</details>


<details>
<summary>2022年10月13日 完善Gocq上传群文件机制。</summary>
<h5>新增</h5>
1.<i>mml2mid.lua</i><b>_UPLOAD</b>与<b>_APIPORT</b>完善，预期功能已实现。
<h5>改动</h5>
1.<i>mml2mid.lua</i>原本注释的<b>_WARNING</b>配置项现已恢复原有功能。
<br/>
2.<i>mml2mid.lua</i>配置项<b>_AUTOCLR</b>默认上限提高。
</details>


<details>
<summary>2022年10月11日 新增配置项。</summary>
<h5>新增</h5>
1.<i>mml2mid.lua</i>新增<b>_UPLOAD</b>与<b>_APIPORT</b>配置，详细使用说明见脚本。
</details>


<details>
<summary>2022年10月9日 实现了timidity.cfg的自动写入。</summary>
<h5>新增</h5>
1. <i>mml2mid.lua</i> 新增了对<i>timidity</i>音源的检测。
<br/>
2.<i>mml2mid.lua</i> 新增<i>_FRAMWORK</i>配置项，判断框架类型。
<br/>
3.<i>mml2mid.lua</i> 新增mml语法报错检测和输出(如果你看得懂那会很有帮助就是了)。
<h5>修复</h5>
1. 修复了因<i>timidity.cfg</i>参数<b>dir</b>固定而无法输出有声音的音频问题。
</details>


<details>
<summary>2022年10月8日 初步框架版本编写完毕。</summary>
<h5>新增</h5>
1. <i>mml2mid.lua</i> 新增一些配置项。
<br/>
2. 新增了对 <i>timidity.cfg</i> 的查询功能。
<h5>删减</h5>
1. 改动了部分语法。
</details>


<details>
<summary>2022年10月2日 准备套壳，已经实现mml转mid，mid转wav，下一阶段将会编写脚本使其脚本化。</summary>
<h5>新增</h5>
1. 添加<i>timidity</i>，放弃了原本直接发送<i>midi</i>序列的方式(这样<i>Go-cqhttp</i>会发不出语音)，在发送语音前会对<i>*.mid</i>文件进行转码再发送。
<h5>修复</h5>
1. 修复了一些bug。
</details>


<p>2022年11月20日02点00分</p>
]]></content>
      <categories>
        <category>音乐</category>
        <category>技术</category>
        <category>Lua</category>
        <category>作曲</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>Lua原生函数load的继承性</title>
    <url>/2022/11/19/Lua%E5%8E%9F%E7%94%9F%E5%87%BD%E6%95%B0load%E7%9A%84%E7%BB%A7%E6%89%BF/</url>
    <content><![CDATA[<h2 id="Lua原生函数load的继承性"><a href="#Lua原生函数load的继承性" class="headerlink" title="Lua原生函数load的继承性"></a><strong>Lua原生函数load的继承性</strong></h2><p>这篇帖子是没有学习目标的，并且更适合有<strong>Lua编写基础</strong>的人观看。<br><del>今天就是想不明不白的开始。</del><br>关于 <code>load</code>，如果看过<span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5rb2tvbmEudGVjaC9kLzEzODY=">【指令脚本/抛砖引玉】Load: 在聊天窗口使用lua<i class="fa fa-external-link-alt"></i></span> 那么你或许会对它熟悉一些，此函数是 <code>lua 5.1</code>就有的东西，作用是加载一个数据块。下面是现今的<span class="exturl" data-url="aHR0cHM6Ly93d3cubHVhLm9yZy9tYW51YWwvNS4yL21hbnVhbC5odG1sI3BkZi1sb2Fk">官方5.2 manual<i class="fa fa-external-link-alt"></i></span>给出的关于它的介绍：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">load (ld [, source [, mode [, env]]])</span><br><span class="line">Loads a chunk.</span><br><span class="line"></span><br><span class="line">If is a string, the chunk is this string. If is a function, calls it repeatedly to get the chunk pieces. Each call to must return a string that concatenates with previous results. A return of an empty string, nil, or no value signals the end of the chunk. ldldloadld</span><br><span class="line"></span><br><span class="line">If there are no syntactic errors, returns the compiled chunk as a function; otherwise, returns nil plus the error message.</span><br><span class="line"></span><br><span class="line">If the resulting function has upvalues, the first upvalue is set to the value of , if that parameter is given, or to the value of the global environment. (When you load a main chunk, the resulting function will always have exactly one upvalue, the variable (see §2.2). When you load a binary chunk created from a function (see string.dump), the resulting function can have arbitrary upvalues.) env_ENV</span><br><span class="line"></span><br><span class="line">source is used as the source of the chunk for error messages and debug information (see §4.9). When absent, it defaults to , if is a string, or to &quot;&quot; otherwise. ldld&#x3D;(load)</span><br><span class="line"></span><br><span class="line">The string controls whether the chunk can be text or binary (that is, a precompiled chunk). It may be the string &quot;&quot; (only binary chunks), &quot;&quot; (only text chunks), or &quot;&quot; (both binary and text). The default is &quot;&quot;.modebtbtbt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>什么意思？</p>
</blockquote>
<p>坦白来说，<strong>就是从字符串或者函数中加载一个代码块为方法并返回。</strong>——应该不难理解吧？</p>
<p>但你需要明白以下几点：</p>
<ol>
<li><code>load()</code>返回的是函数,需要调用的话,还需要加括号。</li>
<li>5.1.x版本 <code>load</code>方法为 <code>load(func[,chunkname])</code>从函数中加载，<code>loadstring(str[,chunkname])</code>从字符串中加载</li>
<li>5.3.x版本为 <code>load (chunk [, chunkname [, mode [, env]]])</code><br><code>chunk</code>为函数或字符串<br><code>mode</code>为加载模式:”t”文本样式,”b”二进制样式,”bt”二进制和文本模式.<br><code>env</code>代码块需要的参数</li>
</ol>
<p>你可以这样对自己的骰娘做个测试<del>（我称此方法为简式测试法）</del>：</p>
<ol>
<li>在 <code>DiceQQ\plugin\</code>下新建 <code>test.lua</code>。</li>
<li>在 <code>DiceQQ\plugin\test.lua</code>内写上如下代码：</li>
</ol>
<figure class="highlight lua"><figcaption><span>test.lua</span></figcaption><table><tr><td class="code"><pre><span class="line">msg_order=&#123;[<span class="string">&quot;@&quot;</span>]=<span class="string">&quot;main&quot;</span>&#125;</span><br><span class="line"><span class="keyword">local</span> main = <span class="function"><span class="keyword">function</span><span class="params">(msg)</span></span> <span class="keyword">return</span> <span class="built_in">load</span>(msg.fromMsg:<span class="built_in">sub</span>(<span class="number">2</span>))() <span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<ol>
<li>对骰娘发送 <code>.system load</code>命令重载。</li>
<li>对骰娘发送 <code>@return msg.fromQQ</code>，你将会收到自己的QQ。</li>
</ol>
<p>其实到这里就是<span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5rb2tvbmEudGVjaC9kLzEzODY=">【指令脚本/抛砖引玉】Load: 在聊天窗口使用lua<i class="fa fa-external-link-alt"></i></span> 的全部内容了。下面进入正题。<br>因为昨天，哦不，今天凌晨喝的有点多，又很奇怪的是我醒的特别早，我大概五点就醒了，然后开始敲代码，也许是酒精的作用吧，我对krypton进行了如下无厘头测试：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">tbl=&#123;&#125;</span><br><span class="line">tbl[<span class="string">&#x27;第1层&#x27;</span>]=<span class="string">&quot;tbl[\&quot;tbl[&#x27;第2层&#x27;]\&quot;]&quot;</span></span><br><span class="line">tbl[<span class="string">&quot;tbl[&#x27;第2层&#x27;]&quot;</span>]=<span class="string">&quot;第3层&quot;</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">load</span>(<span class="string">&quot;return &quot;</span>..tbl[<span class="string">&#x27;第1层&#x27;</span>])()</span><br></pre></td></tr></table></figure>

<p>猜猜返回了什么？</p>
<p>我又进行了推导：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">tbl=&#123;&#125;</span><br><span class="line">tbl[<span class="string">&#x27;第1层&#x27;</span>]=<span class="string">&quot;tbl[\&quot;tbl[&#x27;第2层&#x27;]\&quot;]&quot;</span></span><br><span class="line">tbl[<span class="string">&quot;tbl[&#x27;第2层&#x27;]&quot;</span>]=<span class="string">&quot;tbl[\&quot;tbl[&#x27;第3层&#x27;]\&quot;]&quot;</span></span><br><span class="line">tbl[<span class="string">&quot;tbl[\&quot;tbl[&#x27;第3层&#x27;]\&quot;]&quot;</span>]=<span class="string">&quot;第4层&quot;</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">load</span>(<span class="string">&quot;return &quot;</span>..tbl[<span class="string">&#x27;第1层&#x27;</span>])()</span><br></pre></td></tr></table></figure>

<p>又返回了什么？<br>希望能有人好好运用吧。<del>再不行就只能我自己写了()</del></p>
<center><b>教程结束。</b></center>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>教程</tag>
      </tags>
  </entry>
  <entry>
    <title>wiki of Midido</title>
    <url>/2022/10/03/wiki-of-Midido/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="2d26928378658bcb6da1072eeefed022687346ad54e942b163f6a17a516eb0fc">05ac19fd104070e24be3e2964beba5618cd36cd01cf45c00ec588fc26869c10c5b2f8787bd5914ba7ec9b74050229cc735d61538a35a6b5cad357b28cac9ae2ab98c95f9996cb0ef816d21ff7413314bb03f09cecc2bf8fa59161e4e2dea79e991d10fb5d04ac87e8e733b35e8e00b9b48e6698900f36d51f0164d532d007ec70713c210db8b90c0024a0e13ecf6cb899ec2cb4b61df8acab6c31b8789a1b43bd7414bb2c80a11e5b737c1f10f95efe056cc86d633c8b78d68f55831522e1fe5c76c879f1b332f16273a50ee90c1ef1648926c9a6fd3c10260334ab7c001116b5bc6a210590f1302d8c4f9c8a521abf4f6565e301e1c53dee28ea4fe50e884c605c78c0fad1b94b1e65f033e7d6a4b035c0ed9f167ce0e32ac43687804dd6f7af35bf7dfd4180ecf4e6c036aa714609284dff0e60793733b2878a88eef7ff2aac764ff86d27235bbd0ca4716199c18bf3d2ddebb687754ae5f9b403bc6d004e0c2098bebf70ddcfb74f77e52762ee48e53813b5768d067fec194ef5b535ac16672976f86627578d61fb1fde7d8fc9a97b3de88fad67d890a4e34ace0a71cc30dd440d61b1f88067ba472de06e623f46e31bdf84815e2edf08b8874b13f74c4299dc36668ab5b05af368e5b106bf84fd0753b6dea30f957e35b2f65a140a5298498a0b140880a78c131de032a7279058975b907ad6fd98fd60336218e797f20ecc20e86dae2850e892eb93a93698b666e88a1b97d4eb44b612b5c773cbe878e4dac5b100095351d8f07457672c6f27b4a69b2912dfaa087f40a4334452ac99511966c89401ff58793ce6c566fcba4cb868912dd20bc9627c2133b0e02cc14a8ef7579e43690581d1b63e0fb644a1e1ee2f4600562c85a549ca1a98a0759c737bb7942e3a0b440b6855b5943b1a5f23ae13d7a961dac7fc45ddf7670ec46b0075f10f7cde46b264d9f7a45f66636d298ab1bc2e97a4c0aaef5092a3c06014a256551f4a1bcf88f0443e3e6dd677b51cb761c884296204b19a3247059e6a108fa5541d42d42ee0221e97cf1002d50d3381b0599ea34b12e43ecbb38dbf18912a630d03937da2594901b9e6ddb88dadd59319ef500b72f918801ee460fbfaa27f8e5ced4e559ffa6a9fc706a6492d81f4d8f85d523e2b05570ec857f8f7caa2827f73e1f31effedcfcd674a0ff18d069398dc0752953552b0a6c7bf2e798337841851daa617c259d8fa8ac17a3684e68b55b53f9118b4bf396382a844a59ec82986b4a9dd234f99f8e9364f0e088363d0339bc2971bf0643c00c45a9f7440900d63801eb26982dd7a492dc77830094864ff958d58217941f58e4024891f7701181038e62a87084a2edfe80ee041b595ff5a4a8aa59b95e1c8a480d9c5eee752ced67a8abc8e040a1ca7339e2afa6350bab692ef30f6c4f7adab98f6af5fcca1fc6b6ebbb3e995f922322b714b26041d317e74589ada794cdb8676a0d1974d42048fdc37ef58226b3e16cb44d1b9b74a7b2f06a678072dd452ade119895483d5f41a267eee5caf2708f8aaafa0a41055aee3bd6f7b0a082213a4e08abe6dfa0c046b5430aabd0b9c8240f54ae753d4fb64df82aa6bd11d8b4c3b972a3c486507ddf8e6600b7463d6358b9c5da12d60029189a6695b58379485ae53a0c01c6c40f79f1ac4e6a5a5cb36bad4332b81f682bcb233a3a7a7cc937cbe7f9179519838ec0640c112b2330bb6c797b80f99808d84c2c307f1937650f400b3fa8a099f00956aa2b4217e3de45701aae5774049e4eb3cf06026be59e8f9143fc316d8a2030aba4677ede69e95c275dcf9a0052d6b4610ee31dede2e08d75ce1d247ea378374c0af18bf07f4082f7f0c5cbf294542490a9b4ec78f544360911534a9b7fb2c10a7eae9098f9335d8df1a7b80d9dcb5e60d495b9ae1fd0ece77fa006e2a8464bf65e6354a357a5250fb1d4169c61ea61a508ee543e6539ae63869890024dab32215ea1f53ed9e71793d37b23a03cc60598d5a001d8104b0e586a58043f2a370da4aeb911449ea4d773af09b0a58946d5330b8fc2b9dd8484f4b5a3550409d9c7d6a352d29bd2260bfc5af55af16fb6214bd8456ca861a91bb2952085dbb4f42ef2a3119cf21dd01f452c6944a18dd0c29c673b095c682c7590a18595b638e0fcd99d60500430b4f4549c4b7ac2e735e06d127ebc58a15bffb0b561e3f5ccea2175522544e8e67e9cc4faa03e5b0de8d1eea5f03e4eae8adc1109442071405a7699a3cde1ae7a285135d544c18fd8dc68d3834f40379403cff230450bdbf66282d2ca6aa6a64f21f2a138a57025b02764b99d900155dbb5a2125b8bc1ff9d43232d74d5997c71d4dfb4b118f0a04b7008d2c5aea23fb2fbb5cc925f92ec6e11d0f97e4fc5320406438cc605a7c1356f006521a520edfea13eb9da2f44a4414afe283438c00c3639cbde9bc36ba1c65004701bdc47f3a8ce00b4122f7a4655f0b9a499ef976e6bc4b318289369e1eb2a2de529a3cca6ffa6751b88a0637dd92da29850c7fd6fb478524796b09a917508e95482fe6f72ee2f68663c7fe5eab6e5a48cea83815235156aa8618845ab7739d9ac04fd4b0b32a11caf43d81e6c45ec7f96551abb22b1e6d8a90da3469f149a7b88faaded594a3e3cb3566eb012a07e0ca39c6fedc094f08dbfe2f43c180b4a2c06f15bc8ed392153ab572ec97ee2ec80742a6c33cf6bcd261b7e4e8d97b858196c3fc475c905526f8c139032cf60248b4f8eb93b8702348f5cadef26bf626eabee7710dbd2f91e98e400d25b300a3a81a6b9397b791c9e118e5936ff940331adbaa76c1f3f5551130193193219254eb5705153e13966545079492d8a5e21ac2118c89500fb363067f61b1941d917cdc445dc782575e4ee4710afe2bfe1846002f9bb8bd7b9e9cba140d9e1a026c93eb064fd8d7461d5111ee40be385bda2c85d9ef1f420c73d898ec910f830103a52d5ec4270e0e1066ce31c27562e5607ea8b12527eb523713a99266846ececda414fa63b51f470738042990e99aec2e507eea3093046692b29f30ccfb43f4b6049ee79c6128ad7fcd89eaf6a4d1d2786e59b773380f38b65a0ea4ebebd06f37f7265d6c667ed4780fe0773dff73735af9222b07b657ea95adf52922d0ebb2873296f16dac4ae25fd072ad265456c5854eaf275db5dc1f82ee9188334e4b486682dd0cc80a4481e3c9fb6bfebd6276e687f7ec2f08f3b3093d17646a57481b1fc2cc6614d5310f668c153eda4b6c492a2dc000963ff1180732bb4fedc8ced37f424618750d2505d8c434896d57a076a4cf1e99352219908c7823d627d7cfb4297fa1bf24efa3c3b2539de9d6e7ffff363e7be5cea30bca70af15cb984ecfcb2a41a63378344811f30654c5e8fbbdd87ff626dccc9eb6b0e365f12fc78044fd14108d6494c6d0eba41a6203b4482cc8b505c3bf453d470896e8dce5897b35c727de2681f975675534cece3c4914aac558dfb3968c3ca1710e5fc7b7194c139e35054a655d582437ee20fce9e04957b804b3f45803b1fa6c49a6329feab3cfc6ec8323483e5eafbd11335cadde0e6f86b6d2cc002f6f5ffbc9279acbcf49e5f3f6363c9491fee715c2059e231063f7477dd8ac6b67cea5448d7367e4ad72fe17a48ff2a1452d1ccc7283774ff3ce6ea40d55ac245e5373ba9ab77a91b51b05638895c95361fdaf8f121522121b7eef8b0ab4a8b9514e203a29443bf7fd52d08604348e771053794c40d6431e59bb1eb2d9940b79116a57fa7df2ccca7759fe480d6a58f0a2bf36ba4c84e2f4fec9986d7774fde9ea41a186beb038176940f0efa34cd6e38e88f1204f5e791802442d04875d025d39238059094c3939118c96ff743907910cea8f510ac5c74c4f3adc8842274b075b32cc45c216cbd4b1ae3452670d63596c27dd01e96d64715dec60ab47f9f89673b02f1e002a08665a765beef852be51b324e0b354b97ae8dfa67ea1c7b8b0676c905d7ae4b5f10c5703b0aabdacc1d825b3a87c41301c22522b282552bc96af9a9dcc8e68c586d1d25ea5912e2fa7c590c6e65c68a0570346ad613cccc33fbeda4ffd722ee380e0e0241da85ae3f58267d72bc1065456658385c5f978014fbc3b2cba750813c6aba88a1d0021f0784a5779419d9c5fc4a9ec3b0fbcfa25e42cafbd35718b367e3ffe0e2979b9ae58b729cbca2c3050736a760d9660455a93c46d69e937b9aa0d5bf82e6c640c9c102e04829a837d45693e573d312ebfa078c74b3af4c4d956863faaa9201c81908ed1e25176c097a66d9fdd94cfcabce40cdf64566d1ade10d7d2b9af444903e02a63a27fc389136962b34ca39781fae10d412d0807987dcbc7f0e52bb80b7c6cdd7afe6709cf0b7944d8337eb4ecd56e2d92966fb67fcbc4bb69e42a317ba7dfffce101b3106b44274377d6ffbd0f403af8acc0fa2aca5a7337950f33bf47e635c5301030cf0edd11d5a23bc31315089827b613deb291c7dd2c675a7343783c3598bb2bb97f18948092c41fa3a7dbd9a33d92deb9c2ce29962128457ab63bdb1db7986625c51f4e14adc92c6c4bedb08e8b21ba5819ba6955e71b27fc86110cbe1b2494d4751b74a7eb1deeaab72fda5536cc6e27f38af0303d14cd50415e3b451da7735b584a97969385ad9547bfed4d8fd6e2d941a5dd031731ded128d13a9a3c9c0e97f5528d62c48960b0faab07631b2af8f9e39f8294bc7dea85d162fc03b86c1033bbc0cddba2bbae311142aa5f21eaa4997e28aa55f014a15979749535b99f15592d72398ad7c4ab135290b2589c474fdd5ca60280e2c9cd9891b822bee55b790247cd9a27d6d4988c81c35bb023b28a9212af5067383bd4f525feff1c1267b74986d46261c626b3c11d0c3a305ca8f5a955b5ddbdd048250ef1464679f487817ae3e2554dac1fd5f4821146a72447bb1ae14a2d3f0329bd3bafc5d17e00278dcbf2fd2579e97a547fa7bc9d0dd063ad32d10b30f0236c71dac64da7214be4c8a0c6aead478b761186b0582c5bd259ae16016e0e630a6d047e951b013604e8d6a7bee262ab4aaeac3282c8e43e2a6b7062164f28e878b1704e0d95d9b738e41670dc8846dfba8f5baeed247371c0226c4c410708b4a5cf64d124bfef0a50b4d3cd3f33c4ea531858009272a95f74ee63414d9f3e87a005fc0432263b1634d0d50f4ecc04656d8247fac7fdbb1e2c749cf136b396d717d71b56ae85cdaf41c494c5b9d53c6353f85f9e96c835d7a1e520c25adb070ef83c1ddb9d4517a1b330894d24d4075c4a723dc7afcc9243900d10642b3286b41b5552bf24653888530145743ed4fab158faa7c560ee3224f12be46648348b0ce4801ce4c7560c000bfb2c9bca0cac01d2ea364b1398e82c31c30fd20d0c1a11bfc053ad1c3f1365b60949d2206157d1dcb48366d46f456830eecc656444add2feceefb77513fc502ce4cedc6a9bdeeda4ac504c18a215c59d4656c872dc7dd46a7e95e336a21658a6151180942241e897f506fdb6f76f9bc40fd238b5f56647381bf342282c45984d9552058a34324c15aa4d2a697f884b72888f1f3fb5b6d9e0136525c5264c653ae791a114ced495ccc678bedb6628b4b3eb3c9459a06fbaca933a34ebd31f46c1754df4ba374152343edc380d17557645bec317b6bc7ca3213aa68246ab8d663056ef097f492a8689527d356198b3b3aad2b9bc1d9230666f4daa03c579041007a223bef56d5f0f3eb2cc869440cb1de4945ad17b1aa93d9d411e72ac314fa1d14c7e9eb8be12cd773aee2b72287df8858cf8948eb19adf036cc8597b3126f3c127158bacdec7ae3cba1ff2f5fcafa3b125385ce98934fbf4702d932aa6747fc66fe3e2ff0f876db57518526b255127e47502ffaf78e8efda430116806dd309cb91d21abf0281ab33ace7640fa3c0406b8e09fb0912300b6c9c0902bb597a05e2199579b23b9e44f9ad382fc369f8695173c6169a04cea83468e8c560e3cdce880d2b26960af713baee0bd159aae144b6b7c7effc1fde4a6d669d47d34a5436b380d01fbdafd9d2d4b24add3a2353eace9836b4287d6e80ac507ba86521eebf3e8f0ffb96bea693a574fca10e2ea3bfdf64f2fd187d3e8718014ca856418a4d9e9b69f342eb2cc93902cd732de8747a7b6eeaa0f2619b696b295931f730c32537df2645af2b68f5622f648b9ecf103af2796599c23b235694c84f47fb15d99bfbd583f15c6ba9372c7d84329c8825dc86716f2684c0d41a525e0651cee96503f2c18ea217cb1299ba747ba8bdcc8944f4d5a8869dd0903276a62bf833a7fd40429b9fe019b49624c7e14c1c8eba3233c94e10b387ce7c4b3f34ace397e151bc619c4ed2cce0d4842296a9591e715bfe9ab10819497f278dd39734e17b085ead9e6a6b8223dddc0ef2eb3560006edf54776296e501ca6abc4c6abea4bcff710fb8bc73220fa03309678255e11773f462a5c81cf62ebddb77fbf8fa3cc3e75cf8d933f945cb4620de6a9dcac7020e7266d97826cea01e7846b5c128b1a8085443a6f07f42cf589aa4d4277cf19e32b50ecaa660ce0e677ed2afd53b348f34044850cfd832593ec71451381d914d3aa4abda1b519d1c4479fb8ba3d12b068cb31733959cca4dd5975b185bbe3b656f7159761e048600ef39a8b3dd49856e29feac83af7cd740632d70e715bafb055ff3b030a43e0d6362b46fd96aafdec1271e7c2bc0b1b096c23639e766300d5139e0d1d1666f54f3355693ecd038489fedc35451cd7fc62f096fe1a25225c087b661c9ce20cc35315f48afe726d4dde15c2c72e4e1f589d08e018130f1a523b6dccb7d8d097f1893ff27040eb2f39241cc472436d74f9d2478a70328c5dc3b201f1db391410831cba16b61c3617551cab728963e01c00ddd9c234c52372e347b0cc87da1564d3bcd816e05bc1ee023d199dc815468f111a62d379e21c5347f9f08f8df67322c43d07425c55a8645bf3a960f12d21bcdca7a4703f9ccc33b8ff78823843572231e1130576efc09f8f86a1dd091f04a8b7e2ac9a2c13f9c759171b2d87744bb50c2f9f2aa6b3aab285ff013640cacdab36d59362e27d0c9bcef7b3f15fecc75c2d6ebcd4e07693374bf494c6e8ac764145e9104fa4bc320b8308d1966c968bbe6f9767694f46f7162a7a738460ec5eee7c83e8575b82762a5aa414416fd8712e682e52e5705fd21a29a71ccb7ad095fb0ebc12fa3f24b534dbd943992755e657c4f4ccaff5355bd7dfdfdf9bf940c0cee479524666a44e497cfa750ea2797034c87688ba858f2b8c739a3c47a23915f777899fd5ee9548a3b8c87a4c3a041c0018a2067827804a693fdd2a5bf7b074afef17018263d331b770ddf99b275a2c432154f9390a99e265f2985bd790e9ecf1fad7ce3dd9756f133b1478f3bc568871478bdedda91832b4ce4ad2ef2e45e0edc82f4af2cd1f4b99eba77a79f2697913da69a55fe2ecf315c367dfe1e41607a8d0040e36f8df26c8f48890611c66cc9d11c12babfeb0924f11bf3c8eaec126df0b2dfb3122851506e6210dae08dd7de15437d3d2476e462ddddaf6b9dda5116d00864b9a6657cda6764276c5373d132d414cd048ba25119ef794ff18e984e2750cb0693ef16e901ab5415bb04c54be559c9c5bc23a280f147290cb655d068704bce07303bb0eea1fe3ec50e91a39144d29bda5112353a0264a3d8d4f3b6a60b8a7109f76ac52fda8617af3f6a5d4f0988c769ff3ff1238f7b2216e29c84181d6dbcec53d47d860393a36a619c08ab67eae3b0087d1e719b1cd9cf86bced02a9eb2a74072c8a104ccfe9987875128377d88ae621d092b1296b24664c4eacd9903c8aff35488dc9fe296ad9a58df3919ba18b35970705b13108dfc2a21b21b3a9ac804d43e0b56149ebf8c9ab87141d8b355b2a1224f3af225cb55aa0c7542dc891f4feb6d9f68b3d24a5ef1ecd3417406e221a196310257b89e6c896f626eac012ac8710cc7d63d0a90d69126fd280c251f9e230a238e29aa3748a4c170699f3a0bc1e1a912a53b0301f017791a65b41a498d4e6f900f5a132c2c2c5b294b8208e35d45b1d67e2f0fb0a245322b4a3971acbaec071e21d8c69613a1cb7127d9ab0682c38e3b4ea3974e1c412b16cad2300bd95eb8c7a53ff785543705679116ab006faa3a19558e61ed5fb37e82fa6670c6ed265f542087cf9b5b211e9d756bd1e30869b3ccc126b7f3ce8e962e712927e325249c1c24a5106efc0b1b7f2b79c60dcd1b31b19c333d756f24f33b39f2efe6698d0871d5b61dd52057db822a1d618b55a6b31316826393a0fedee50a793187f4d3cd6ba6cc0fc3bd5f78ab7ce1fa2e43326ad21599cbdef2ce2dcddb8491916d83ee2bed7cae2d969650a4eef419c20aab97a33346313f28d1068b2d34a13bb8c496c473d58249e5cbf936a239c131933c5639f77e02771bd6e1d035be151a33f501f8443c81c164b34fdb9de7db3e507982af6f639635c6b24bd726da06aeaeac2267bd7f79b57cf21608ee50eaff13e2092dd73f97aa86149ed3766ebc1bdf8ca01204d017f67fee04a26a9209f4ab62552702de22bb849fcd783fbf4f22b34560f7e778bfad389e8902625239b2459998ee59dd0f7b5e8d279300ae3a057fd154f4c437223e51079f5fadfda7e1ea0e759d52b50945cd83be6ceb696c29902f60b420be0a6dd565ff2f12e3ff1a64db5f8771c5806e81609ad1c744caf20ec0b561aa44f587a4788c975b566c6627d9d1ca7f79f95ac3dcf586076d2efd6f9ed4e77173b5fe340b771fc791c75826edf5fcb05d247df580a0925d7149464bfbe2dc71c42e8d38c122702ddbbabd08f1f38e1b4b059fd294c8afd18152b7c9dff8e229ae424143aaedf22895d59c4a0f35436c5ae4c8e0dade9a20fd061e37f9db4da1d089cb6a74155b297f35089cfb421662a71d3a5f419f01388bfac6c745a8d710d14a87d188267b039d4434e3ecfce57bb72ed8fa80c24bc73568008bb04bcc71a651dae31ff0dc0993fd5c38b86cf1d69b230436f11acd1647dfd7cb6b1363a1b0402f593ba7d4e4b57591270098a9a477ee9e9795f8949d1f25ad1a05c4f72c161c14d953201f03b2a7466eaa2235672948a87892458bfc888f23ec895f71c115b7ab12b19bd11e74502fcf84963a94f8ef52955b8802d7ef51e22606d3144ab91975059fd2b190d1f8d3056b5f1e73e5d53e90dc0af1d206c4c015b0f4884708069e4aca9bca9c12e87b72c62f21f9cc280937415473cecb88db7fe0fe2afa635d0eacbe15f73a15d4a3f80551a0e5c439eb54483d002f358516b52693a58348cd7ec79970bc96b906c9c4369ce085fc44f0484eceb22fe5bff93717bc098c8877cd73f7651e584b735bbb1681ded73494c9cb46e520891e0c4d33e1cd02c2e24f9e18a9ce311873b42e08feb343a691705218cd227197037e8f5acb96a5c1135e425a860c3967ea31e6c88f6dbab418b66dc24d688b0b22af00a6846f1f9cb483eacf109fe9d270bed2e9e70d4275cfc3f1128db8b686db3395aadadb3d5423e8663d7dd3962b838fc0fb62ef051e3b5f600be1a6fc3a8de60acde8e181a658b7d9648e741e7ffad4ae5fe31e4f174a32bce80f35323f6a1a1220504809f86539c8e6774b2f5b2c9587b7aeda2990278e875fa3e73794ad8cef1adf3d9c359a6289be9ddda86a72d6594c72e7aa7d6df98991e48e39de5cd67a24f409917d4c54f6937146a3522d97e2ab96534d70f3ab46d04c622ef02d3b4b262fe3bdb4be81977da0b4c8323f160e6b1b9f6e478cb4ba739de320b345a1383b1d93263bb90a3ef79908a8688be381afe443e05e701c3df7dba05ae92129b0a3c21bb25546c57f375192374cd0e651b8809b899bafa15d2e854a6bdc3cdbbb4077e839dc54fab71cafdc5181eb0726e950c3d2358e7f89f028f2b5c8a429613a322e04ce85f1e274daa051ed36f3431655f7f1aeef8adbfe072c503ecaf7eb574aef36f7525cf24daf456604294d74449fc2b152e5872dad6e0e6c82696c43e5bc21994fcba0154572de6dcdbaa62596eee9fab4194e9acf072838438c444e4e1e0f41c3d0d648c2924b976c3078bdd0bc3cd672421c62bd82a3a92026634e7f13236e37819db711802d2ca8d5ec155fbe91773136820fb3e25c77370e9b57d156d379f0c2284d82df8269f510bda295eec2bde01684f9fbc978a7786fb2dc7c6711b12cdfa081493edc3dbb5fee74653ec080e6558ff9d49bbf3879917929c0559268376a3822b2b43fd885637e29c3fb3aa952eac328aeaf5a343a9aacbb4872a2c7bf3ac35366e5f747f314671b792a5dfb97fd5952059a8aec0e118f772623e4c14af0af5dbb3239e558a6cbe241c49247e8167573c4aa538d1e729c0f5d9fcafa836a372dec709063e08831c4ebfe27836a69600fe97dcfdef6673cf3fb70579c921ebf5b1e866472f1f40650fcfc8ec144fa7a58c0f7a8747afb35624c1a178390bc1b9151d0f0983962050ec2b7ede6f046dde28a68a0689e7e0d543960d2459e9c2c5293ac0f04cba1c9227d2fc269e2c3a082494812c246679e71a29c83d236da318ba72d6c264407da5ca02275cab653d265464227b07ffedba5eb85e76fca5f6c922d65e8c73c008ef738ea7b72135477c0ad97a83d6688839e5754ff9bb6e3c5f00c18f7a8125f21691c2f7a354a8bbd2ac0446cf3ef50184edf6607444acceb452155e805259cf0c41d7f1d264d1a2c03fe53c161dda71203190831a42f82775053af5dcef16b397f1a6bd6f9820a780d3ba4595927d3608023a330845ebf68741450fc3d057db0c6601825ab6002143acc49e0af1bd3f946f05246c35ba6d6a1057609f1d745e06be93a1363ec86ba73860640b0f4c700c39b8b3e8d573cdcc3eb8a1c3a5be5a129273654f6df8941fc390d677d5edea379d0b2035c27bc5f5be1759c83299019501f567c8ef3efda8fc386aa8730772eb457bfa5f4fbcc34ca0e260d8a91d9eb3dbbc038fa5630c245732b2176e5c9e29fbaf404a6244bb7673cd3503263c7388b8dbb44c6e28007819d599f51652a9ac5a611eaa471757bd99a8dedb4d32024981d8ab77a06e46f52d1c207ca193d593f5437457218f05e0ab7e047cc38cc0f1f7120ea6243d4fa793ffbd20da549b80faf9d2748fb3de3317d455f2425643055ab53b0078f2884b07607a2de17a9958b6d4b9c83ab984557dc96d4a72e7aa32a51d4ec90644650bea5dc3f21a5871aad81cdb1f18e2dd2456cb5c3091d73b86bd6aa17e2fc46ad222177742050ff6b27ee9ec171e8b5db478f40caf40bad5de55a5253c031e284f80c336cbf0e28c0a4680db6d131df34e17d1aa591efa32dd0314baff38d3595d23fdb7c88e76db327a434b228ab86c1f9c4751c140358d8058c01807e94c1ad6007ebbc3a375bf2a39fb31310d098c89da1de7d702a8d88f0d7a46a8d8dff4280c5d67c3d639bb40ce9a6f9b717f6606cf6dd2293d7a1af924920c51c50ab080706bfaed07a7e7c3a881b6a3d1ec74e77c2ac328199d6d6d72ae9c7519672c84de71841e489c94d11bd387c94ff07b42dbd8bf9b84ddc768ea84ddc221d05f78306fb148e65b0af34cbf70b55c7fd4b3011b78ae66b0dcd0bc9ce24ab5cacb2dbccc019208ca622ef4396595588d18928166e9a3c9bb7a95121cfe13eba5730785eb1dd24807297b19425b657cb627e1516b87d94a9a4ec583c92c8f9d2be9444a01cef733e14f36eea509832983a7beaf3179245855c627fe48329bd0246b0ffd0143c07c94ac056179f78c00e183d3c3b9618749d18b67b86d90d3b4475d288ff94da53566a7fe61a2fb68ac7977b0bd890f3232a2add16bb49c5ebff589dfb15bb23c2d814dc134cba2fdbe003ab837bd7baeb9a4f27dcabddb694df82211866f2b8a3eb62c4c3da9fb887de7d13a3f3f0b34a24a13e530f4b25eeca732779122cd76afa2532d44f2f32157459481fd18ea10d23fce87b84bf9413657da8fa0af6a50b54fd94752ef2f5f3fa13040e71292ceb8dbc55268b01dae103b95d59e2c715d5b6ced542d0e51c488f22c232b152d55e409a665aca759e478327ecab7a1c7f76cac169ae60e2c7c8dae32e65bca27ad07bcd8532092e134430d0b33b234b6f8afac96f4710a4122a05e037d3065bcbd51a75002a9adbba66245c3614fab809ed14a45cadad3a0975ee6ac5181ab3408bb24efd4f6e094a26d67b20c27e8c314eb63de1239b89b410ec3264b475a05f2c21a42076ed985746d7bb0cd11293d4617866efff8ec3edd7d66dfd2d7b23bc10377a30d47fba66ad89fd36372590e9d3f25525087c2eb68339b72743a8b40bd9c9c47437a8e12164186da2271dfedddbaf5e7eb8253eb9e5ed19ad30bea0c0cc8a08df7b0007d0bdf70aff4e47b25ce27cc467e82fb8d93d4c37ba3c65147b793f7e24959fd516dd35fefe1507d0b677e68273d852d5937545eca4c7a3b2df3710bb7eae14b12c86dd2572d7833228362734a598cf0a46b0e02f6176fadf55dccdcfe8f3fdbd22f2fe1130fef76f959892c16061b7c7502c0cad93a8096efe70ec204a5b0b01142d012a1eacef400c9c21460ced9744e90bfd58b3b2f8a6abc2389d4b708ba4353bf4a2352eaf3eddbf92b949939000ddd132b516f177faa477036fb414752ceecdbf8be6bec3800c4a3888ac157c5e24c5606353d2a487622d50714f26c4e4cee3061e5789bd717ce8e1fc3f24cd86a9f31dbd9f3fcaf93026e9a5a4487b6521a5ee812b134d5b48c15a61058e8cf54f578fd0d907a032acca44e6d81d3c3421bdec7b3a65f5fccb29729625fa2de078a78cd0cc350fcf7f944dabbbdfec0b4cac15344ed74aa81b2c20ec02c2413ffc7bdea37254e2f6214fd89d6717acb864fec31009cf8050d311207f355b317e1a14bdef6e9b28c08c2144da9ad2b0ae0358538233fffb2143ea836cc1ec3f5b2e5c04ba225de42748a56b77ee72d25d6bbcb15020732b9df76532ebf60ca8d475b4b6acc58205ab57dee6039a2d31cf50cbd920a27379ce0914629910660f7a32c552323a0eef3ef44e1046341bd17a49e7c50e2d41cfe355b8f775c5ea2dcb3f5440d35745b88a049b390810a5ad5d9d74bc5b074be8040c7ec02373bdc0795a26861181d5b0b496028a667684f26c9bde7bee4e98610bc353d86a6cdebde72c523e4182052d965970e27a6ef878e8318bff0b7ccbfa59277d8f3e40292d6bb1cb377186aa83b3003636d9a64729eb33da4e78840cfab23ab2df7f6a064b756affb2fbfc89ff1428d1ae8106d7518b6992c770aeda386946f936e35b738ef960c49982d7eb51db3b35509bcab9caea5ff1847c5a50bda468b891984c14ff8ec86404428d30c244435329d4d6739a079873176ab9269f5fbba3e853a9b2d4f8cdda8854683b156d7c29b45708f49dc1ad496e98d893c51906a07e10b997789e78705f1feb9860b0236c61a67479315f307b509877c880434c9f9ee16d9823e5da6a862c8748e2192c7dae7cc56ffbe055146e320a72102311e05e860c7807165ef32080db9e54c6d58852623baa06e45e47c29db3ddcbe43a1ed6d2e00a43423e9be4a9c319ddea9c8e729f8190e1fdb247599272780369dcf476535153c6e4d67af78181a83d2d2758f14d8dc3deecf27ac65492d0938bda5f9ddc88d45198ec3a6413bafcdf0f2e0057e2c403792b1bce5e302148b13409430b9807c6d5d59fba9bc6a74408786538e98cfc9c06c52f2da59b9233d0a11d1123ce778c74b4db03beb424271b065a826ecfb9abadfa9757166e89975a6ab901e7cd424e1192997c38f20226d5c2a186e66cb64bccaec53fbd91f3d340c7d779d3595883d37598be04800b0f11b9be94da5fac55178d3e3f351cae6cab82473152f5302abd0abb4445eeb861ecb0bf6502280ba4946d289c19f54e0a8f402cf3ac1c69724f7f3de3b582e145993e332fb73cfd5583652f59bd3337760b8e63ba9febe69c92cfbce24e90e52c75734011f692e5775da414cf49581e661db70db255c508c004eacb3c2009693ade384d7fb0a4d8da0687e392e2d8e2f3222217a8d60408a6c77d0cc9135a2107514cf940d5215eff44116448cc2d44f554f8a7c2e41a60a911e3a430d6120fea1b9caa15326cb935af53be319ccddd0845873650074667dad0cd5827b1b43563adf8dafe2d6c62c29b41162d01b130c6f65ed576bce509f8cc291842d104b35323af01a216aeeb2a1bee27ca156a9b3b54174ebe9cadc58ac0028dfb167e8452bffd08d1d67008f305ac83fdcbe0f04f13eb7f56f4bab4fe057d0ff11f33571b1f9cb9ca5bab84ba40cce54b3178c2a0b5434568398b3db3fc0b04a4920312e9a7648eb7a958c6f13f43037674661e24bee83e5af4ccce969d21eda2ed39bb7636fbe512ec970d006c26bd8fe41d9dc067c0a599e443d1d831615378a890436d3a789b62111bb8670dc7517a5e20a47496f2e5838ebaac9c3ff8756ca909af1ef2b2bff51d5298178f8c5508e299ece2cd1a1de39c53b9ccef8f6030a08ca90592b9fedd85dde53537b11502390661b458c1fc623d923b8da64715050d1ce4bb6bcce7a89dc3d09baf061d698fe8dcff609f74be14952adf7a5994a97838dd3a5025115e225a25b3e827097cb66e2d7bd13877c4e07974fa3e3082be3ed4295ca9d2c2933d0d6b771719445b0c6d035fb2144f8623f920ca4e9bc6859a58fa2fbe80327723f5ca3595c843b6d9a6bfd1f2d1418e06cabc7bdca8c09c5f6963f87d087fd5bae6bf272d744c3ad2f25cf6607fa37cfe94dd679944594e0807af8526f99baa9c814b44382a2f3b94c5b3d78e8fa937332df4a9cc8c86b720d182c1fee42bae86979e55301214c9730e49f52b7382d955df4fbff20ad098ca0782569c861b19911c2ad302b28478378ed0438112b2413e26585ba25fa582026e22027cdd68d3e87dc15c6be180a2471d7a4601210302ad3496ce2732add14f3113054326db931045851fd78088dffca34090ec80c5bd17f8b02cebd07123c53b003180dae62021711bc4a69ddbdb1f9004ff916dabe3236caa715b0078887a61c7375af2e8ebfea9961d9f3238e94be659cf1553b801fde34546b6b3a0ad73cb5b5bc2e327cb4bc73e320d37f9b27781f4deb97e8f525acc24fd0e35b776bdf41f1051ccd5ab89d777b640fd4ddd459c652b51dbad9f99de1166c97907c329242b9b2c6506092a6186b9af641ea8442fc36672ca02ac75699ce086e78492c412a0415166c091dfd5094207f020321c1b0ed3a1645915cd7f4f356d73028803d010da194093bb0f200323f553d16c1d0c7ea7786a0ed153b6d2dcf362d408d3da9750f995f5d84895e53c9efd20c339f71721abaa55860d9b67c273ff9f63bf542bfff8466a2dbe522d9718b10086c992079e16144feebba351f1bded9a84191c5ebd06ef1f659bf95955e3aab03cadd01e02a0daa58e259536a76588b8f71b0dcfb135959b02731d5e306ebc22cb6396fbb0a91c6d96478151cdd1b65c62c8f6bdc1364a537a91607773ce93f11c9c324eb7427af8b281fa193fc8f630d98fe412abf250d77dacc9e96fb56e33733b91e1c62cc00810f2d335c7ad46a077333e0f7966ef6959c1395129bd3ed6d3933743f56df9a36b302e61be53082e31a10896cbae3b26ec4163a3263edd81fb178422ea7d82414eae332399bb13eebbba55b6ac0a21b36602484a8a020d0fbc7cb650166953ef34368d9076a1514ee5bc2569002ed3447f91d08de53fa7fbd5ec34f828aee2a0b193514e303990216717b20038fbffc046f7f9b2917e01f98244aecb4a48b0edf25a8992216ff7a2cf0e89e830d085830aad45c41f60185f082a9fa44731d8f8b5bb1f062b072138e4f081118d254b14c797d49f09ea87a67bffb783e5c23b050772db64b5a7e3feb26609ccaf0e64e254b11a91b9f2a8910994bde3f1819ace0114c20a475624055e729bfb8d8bb3e8a0aff646103e8dd72adfde8ad6d28ae2d776d5950f376176255b4d049689cd900308e0cab6c31a403f66ca4d3ed3c7e3b58299c4dba5bd238e35df0bf04efa2c47aab4647e8611590e03697b41f26a6bfb67e374d17b27b423501107e2d1412271f25dd8b92d410ff1cc871d7332a503aafac5d54ba9bc8a201acc9a0b19910818e28f8ac90ca64d138e5dd5fa2328107e9f731c3939954eb86528adb9799dd8fbfca2f89d6bb9d5fc60b3e14e6c6f8b3ca88dc0a8efb180fb64e58f262bccc45477361847286b5719124d4118c17c2f1bf7b1a78b70f15f0cf00b3098110c260d7ffc5ea802edf869aa1fdc10779e7c0e2ad52920c717015ab2bee3f2c03a70f37d82fd5f87c59c83a4c8de90e7b0e9df00f09aec1d09bba3ab0ddcfbd1c8092cc8e695826b87e028c86cf18df9972cc60e94d0656b8a3a3b4610150a7e0bb9cebd513207fb5afeff00d08c44a4f75266101e568bf8716e0ea75a50ccec23dcbc79941caab3381784e8e9498c479a4ea231e647aab152bb92c2a5b7ec75a9f165bd99b8383f8b8920ae3f69e6c233c6f34b885ee289eecd518c564175cb38fdb0f0fe0f0d1596b53f52cac8ec078789700392827e353ded0fc155e6e413fe580c50d56cea09a42c9c92c5b86de528bcd458b6eff31f49d16ed897163b77519ae4298d29b533d41a7bfc7e2002de774a07fc463d8bacfd71f49ffa55259c8fb9c916e633299780e49c9ddad8f78b1ec8c352c0df296f25a437b1423a5b05189d63b6de44da20731e16c95bfbd1d3ee1e88cde0e388debb405f995d644a7b689249cf9a040275f37871adfcb38c682037d626929908714c4572dcd95fd841c63eabc29b8afd03a3ae6f15bdbac17a6d828b06f1fb9a63607523f2b6affe037d9d35cb78b4b36022ce13f2c684a0dcf4bdeb1f37918d2de7e92bae0535a71ef440add0cb9361db427dc9440524c5f95b3e98c87ebf0020630992bdc90b8eabe58ca90ffd7d0eaed0fd551020de8fa79f0c89737421e0530df250892a648185415c51ab4481ee2a345e214b131a80f3acce99abc92ad5d1397780523d88aed7fb7ae5f698337cec9ec2877a9057771be7b69f413ce1aa16fa324945ff70423bad4cb990d5478e720ccd54f53404980d59302ad1548a019c17dbc9d982e4ac99647ec39579a76211b78306263e35ce2b3e1909bd8ba714710e82058d944c170efbdb5f8bf50d8d9a54a4c7d01e9aa5c43783ad22e48f7c781da15401b9c9e65c1f0b497fce4e1bf5ea398094db21d7754ceff0a73b3886730e2d6a44036eaccd416152f9d78fb6e35eab4c3c7492b16aea420b93621bef9a7121d61262105b5649888aadf20866073812490cd36da0302bcacd5d9510f8460992d8476507d58981428d5701851a99663b4d39211df60142f5541e8a8661592dc2a4547f6cc676b35fc474d160a6c576032219276fa3ef920325bd37d1739963fe2f21d4c11ad398f8063e55df320f88555a6ac355bd255f393a620802813c5f5b695d8c3aa4c0cafe2c359b19af7a7ca3fb3f942846e64b2da68274d9641b1261de16104c40673d746b23f4fe1e2ce3ea2f38541229bfc2322563df29fd28569ef0effd6d217ccc819259799346913d9dfca5cb0bd6a3746c814842968238302076919246fa2807849eb86f9ad811d9b25739aea3a061ac2fc720527c5dd0952c7be8cd6dd1ee2919252f1c2b306761fed13fdc1217e59366a025137dc9f302be7b98e6ba853e9043b0d992ea61948f2ba8f5acc2b4ca9d8da2c580b9cc648c62b16cc352c0070c7c26889eb44acbf5e2b5e6324d16fd122d60f619dc3d2f3bd04a10995dd4f42eccfbbd9b9f55cdddbd1dd784fc81e0468132274f01a840f882f1784a7719b1877d97923176adc1393dc26da6a8a47bfc7758703cc31796d18e60e97699ab76385109e3f58392348542522b1a47e3e3254f3347ab1f2964c82eedf65737a94a555a6529fde18b060136f83a6432d148e6fcc35b2c6eb8d7b83da3be630bf5e923194cd7b5926ce6f09cc4b8222b5a655e3aa83e05fb57f2c5227a99b101c7016ddff4e380637822d8c975e1a0406e06e680ac51250931f3e762f52ea377dc90a37f209961776dd6d8b85fcca0d23e6272881edd00fc4c736688a48772a11e7bd8ff3dd2029d9161ec9286c2bcfbe80e0959b089eaa8abe6d4de0761a268523511c5fc0b535f4fb32457086b1743b4b62c277d02ffe017f59f02a26ce217969701e521cb0ed8a6836758b740e97842e2c887264a8ae0b72db584cdb8251acbd86ec508448eae708670d1c45a609daa87deecdf91aa3da21650d70e50af971357ac83e6aaafce3cff242a687ce03f9c1b9a8b2e40d297eeffd451495b2284c5df28dcbc68918a58bb1144c591bef3e95e622b9e07de6d02e27c1a268178cb11dd2bb5c5ff7559fd52bd0b2879d92c42a55ce6a5512148041edb0a329d53a1fe36ed1d804d533ce634ccce5331542ecbfb2fd5ec947846003bf7db807ef321c4dacd7c89abb3f83ed03b7d18ac09e1af572c465597676a72dc60b354433e2e88d248e9a5194dfadf728d192259cf3c55c888133537990c0845058f6f4ceb7e393d1fccd5834036377ff6894a6296f205e5f9c081f6f3f52856ab6c9c08a7257ebbf42ace0bb2c3eef17b5236622eddd565df72ff98c464f0c4c315b71bd9156f0365e2b2fb0ec46967703e1be945eb44248d4c2af17d87c98a1a998d308f89c0b7354d67f092fcc2763c7e8d6925d133fc5b290263b4b0b491587251f4cf0464ab5b26f5edba4b462cabf1fa748ced087ecee4cf3e6a7cd1f1a4b30ce2ff2166fac9859d89ff609e3dade01b9527eb7537b53046af6938778bb5b7b861e5a9a35df520f831cd7f79ae0f4cba569c65873f27d520d4c76916868650e03ba368951239631ec3acbd19fd9e6c59fa15b23382197f1fb81035bfd1adc0fcf5f1ca96f7bee82f9cd606e0e90f874a586cf878934088c2f28aaf2a88e7f0bfda530b5c84b5557ab9f00c3dad462c70d03506b70fcfa8bc32a1c929df78e467ee01a0059024f54edace6bb094c4a930a7f119c78ae785f845af80ecc484086fe232e1778fac0029c5be4c58503909f8ac3e5ae1bdda841c69e01251113c8ff84fd2dbd8b0c389aaf20b2ccf75cfd433622d4ba4f7cc829813c85eb56c9ce1678bf482820d29175eba4beceaae1aef17fe1a5238d1083b4cad9ef52f813b83355b434e6adb049368bec55367dc000865e7623174689a26eba141efa5bcfa3414b06e465f37146cff044d088aa5f6e01caa0edbdc23e542ca18b6cd05e51ed4a989c3c7f5510913b3766f337b39232a0f2b15aa405ce45744b95b94387a54de84893e13fba0f949728128e8b83032abb01d198e760c608518ef7be5fe3f648464582b461e4b5def6b3b9d974ea24ec1fa26143701ebca64a9949a36fc7f5fc1d5a74bd955a479b4edb94e2e4892c7567f792a9b55d1ad0b4cf83cf1a7f9b0c7c6e08aed690d4d025cfd24a18933d31ec5bef2728e69bceb7517491fc52bc17e8f7558015f640a4b9e4525c8025f19a32252b295c2ddad15e6be13c0b2a434b7d6232549062a4b32d93511b2b5b464eedccc54590f2e40780b9639506fc9ad4a5cf8b11f61cb58e50ff3641ce838bc80531d1b0022cf9028c37610b7a6f782cb967eb07d725212aed225384b87c370ea336ba7317159510205b510424556050fbf69ac20882e6dbff09cb1fb66e7ba0c1e45f70b09c142b2c3ad0e5277579b55dc4502c22d66681748d29da876de3970f93513588cf6f1b46228a9b7cabd7bb120d68aae6427a2fd41831742d537ae47bccd2c181d93ff1e46ce403bc7341eb9853b73419c7bb0420489dca498b28dba400ce9c89fd95cc459972fe071dc37e34551fd11c6e90ceb0c6bd2e9480de20304a95e156f6b488363d08aa9f9f83a232276054d782db93cd4871201998f0fa42339dbe27005a4ccd846013038bc9c2e6a424601702bd7e449067928551cc1c794b2b9064491eb7daf0029a6bfced2b2194e8498cd35c208b45b8f701ee9660f88a464f3532e611a92a78eccd1ec2349aaefa6e2a3300bb2418b5454f443eb860025030060e97e7806abf4b747fd68da11fd29b96ff4c76228fde3a2a40a76ff63ab3ce7e374729508241e5a8fcb2657bd98d109aa3f149ac7ef49a41c64993004ee4f540998c5566cc66d3d5095e95962193d88368e2fffbbdbece78320a39a3f2c0a5bbd9703e7bda49dae8f63b8bab67224156babbec86737ee07d7b7aa181ffb3b93b8714a5ebc62d27a8522bab22c1c54bb1d4afc0f6b497b0294b84a1c7e9216f798751cc3656ca65a13ba20d2d39ab642c09e3290e7c722cf551bb9f4664e835d1cc4e134e3cb387bf4a8c4916568b1acd4af4716b88ebe99d96021f9a06cbc769031d25a9747cc108f0c61f57179dc4b1c089007c5c39233f71bf88b8d77c63dd4e4359241a71fd526175c1e0329787cab1e3e40c401295f38b630952113c85ff5160aa4fd93e90c39d99907bb2fe2879906e73d9c3a9f5b72c177b43e015bd6ba327ce68209c9f1bf6364778d857f61d05a0963fc18824aa4aaf00503e49791172b567ce0802e2b90dc26350420efd93cf8a2719e0530218a875e3df44c5b581adf74768f7a751f21acb1f164d7fb739051639bda4b019b6bace5e08df43d48d2412430ffcb320e2c14b7895547634c668f927ecfdc9bb58bdae861eaf6ef7907e46447af24243faf0bc7b68a8b77fb1d431e675f85bb58479162ab9f74a26cb763cf3a4d2cdf6689ff74c208960a1418526fb8dac45ce9c0772d2de9545f5096d4f217f4cd56f134eb9386bab12a0a70a9fe5bda2945b9b622efd12e22be2451e6447caae7a88e23c88e367d01e61cb6d826279be395afd5732de4e4076c23a4e332ad0e1b7394a0d8a357a7c4964ec9920affb0fa996613aef08c19ca8a808a81433c29458d1c6b664f9b65eb5e732a5d57c3e613eee15ca0e8bb7812e839291325a99104454912f04dba55d73571f54faf32d16eeb66a56e84bf7ab5f1bec8ad2188f4c6cd0c7a998f2faa01de37743490f9dcc8d40d8cb21485cc3bc420c2089e4f671a853037da89ba25894788b35a443078d7791b424b2032f2d65c32e5069b99b9144fd10550181598bb38081b202308f239486a8e5f98323d8534542350661abea488a0d588f618b0f7a7dedb3b04feb36a6f5d2f0618d7b83de3623becf0b2adbddf8931cf48b44da997d6eebe494e48641c8f9f686b1287cec6361ef9df329ad786269837eef04ad197f36ff4c571a439e03b5d67e27ee010685ac8448bb70a5e2cf34be3c4a4f1b2900e30f23c564a1cc0d140805ef6355a3e82f584e1c6345074666d37e1cc43205194bfcf98f9f900247e44753f0fdcd696bac0682f0d5a83fe4f2999139b9c94a5634056cfcd16f8c832745e5aba832466b9c7ff5ff3cebc9a4741643fb36cd995eb5937e36fe6101d2d025d32ad0ff5732d35f8eb946ca5439879415b573f0da400b784a181cdc255ca37e65aa35dda4be1390d431a4ad0d372cbcb4c4b0d200ef2228bedcb71f0a2cd2655e510509d249578b7c027a9035aa0378d2d0cdff761e81dcde50c3bc875045ce08803c98b0e763ebf623d97fa55b56334f92ba23e24f5be16e494ee44f3c5d489a7f9c1c1dc110142b447dde2a379ff9867ac46d5042fcde1e0dc645ca1fc0c051f6411aadd376e8384448d82fb1c7ad4bfd2746872f6dac4c9c0ecafdffb180a8248c00a2808f485f114cf57259f6ac0a29e803d2ef9fb0c33ec3eff2a5d1e468cb0d42f1d128ab56d47dbe3afc64c322f021f07819d0c321a8536cb3bf1b1b7121fe7b3fed2fad22443e1f6e89f7c93fdbfe17c8cb2f6673239face27ae9e02e78c29891a0340e9f48a3c22d4a3626461dc4a3424061c67d3edc636a0d2c89bfc4e3eb4314710450a4e7ec3335d5fa149e27f366590cfa25c6cb7b4c488e5a680496215aa2d3e8f13430844b8e06d6c112d622d1fd2465dddf91ffa623cb12e4c543417ab3f044ac38fedbf21c1fc534ab8e219562f1962d95a2d5b09f38e5b8f3ec7448ae79a38ce2ac9ed5f841ea24b443b8a7b00a920944e4a1b868cafa61ea7539ed0f3ff0e7d3fe1505f648f9ab73492295c5e72c87cc969da044c530481d6239d7a8b89f218bead91ab5eb512130b5f42f497db07e046d3983e7f845694f54f04e7cc4f084e59ea2928396a4a57e9228c95b6348d72fef61616f2f4e03904fb6b62524be983937eb7e3a16a4f50c03d5183c4dce92b56afb2c3176303a0b4919dfc06976b80f44a10e057c52746e6395b4cef2d6530f34876634d903d6b43506aab92c0e42350c1e6c2da13c1d4019390d061d851999cb00bd7098668bada3880e57db961d65dd9249bce8934a8329eabc3e3a315f55b5beaced579ab774b5ba9508b59bae47a25102b8c0fca6630fc5e5a88b5ad17b4860ea29cf50894f77fc10de00cfa267c616cd714d17bf52bbbc7497ff8575a487f23404cd9bc90e41c430c49c3e41815d10866c0f2488e94dab10e3435643be3864323e94e566fc162fecb9d8dfb73e7adea84fa6743b67682fa4924191f0d175dbb1c1e7a81f7b5044a92215e8438329f9bd80edbdb5db95b3e2ad85245dc64c798f80710bda17a2193903871305951738728be4ab96ce56f8850a6fa5049288c280610f35bedb4078e075ab1436e7e1e9456b116d09a1c732be05d4ef713d73c22719f3b8fb780f9aec5667c6a5557331dfd92f9ec5116fe987c98b17f388022b98e74118268c6c514ed182a81fd585d20e06aeb5818dbf3854077a4ae99a45ecfb8ff87725b66967612ef5fcaf30c202b82662a8503bde922b12f193f7e5bceedf2661a761ef814e27f775527981ee8fd9814b9abb0caff225ff03225332288ec15c72b8758860325b6ffbdcc98108cd4812ec2f690e094b238b7f4ab9635c78ee4db8d0c51c1fd26e2fcbbdc0820de2db3166a160ddc031b617efc6a08bc74d92a08e9419ded1aa601f8545834f194a51eaa70385da4663bdb7ad4bf1bbbe9e560be05a70c919338a9938e54f287f5884af27963719e6e86037e7f946426133320ad68dc429a390e9c98b33c8c600ebaec49eb68897ee9219115442284291601a29144c211829854a321089a23988b24f914ed709050bc1d0ab75cee43cd02ca252cdf560a967c833c44640d37883d464eb3dd35ba0e417d1c8f589f50dacb04174c604ab75b98d6ed95c16b4e38eccb6d9c36e1bc239eb9607b0a9dee6499a170190ffac02a056b7ecbf4847b50760f0e7c4cdf71d3066e3ef60ad1836e97cd713af41521eb880901cdc79b0c040a7cfa8979e00f115e790cfbc004c1544d200f34b64a9dec2aa84bc626f0035dc415edb5b285a76f48d403b65e47d730dcccfabf9b66a7023d7c7ae65035e70904d8b7b25109cde195a719ffd1129ea528cb9e30fca9f1dd662ad8009b8d1732dd8b4404160a6b73a65c234b7b9824bc58c403ea4c4a95786932fff1017ba7a0e7e56a7f261b485a473009234347b3d80950a23060a6ffea12834b46021bfb38510d26c5b7b53bf0710dd34bbaf991d3ed22fc77b8a58970cbef18dc0a011961f375c4bfcd957ea74a5a80c9c9fc9b14bbdfebc64e5edb460c540ea2dffed0e12fc097781987dd7711882003612a97169986950e7b674b5a9ce35dd80b10988f112ec348bc399e9142a07d93bcafaca9260622be4dbe9f8a1d8ba90785a063b7881a7771a9d10b58719f0b09015a14ef055c2651364b4fd6d0eea468e62b8d6e26b6671e1318555aad547a8b2b5c234df109440162bcd10e59f30bfadc854118b2ce07241f38165a672f93ef67a442b2fa3ce91f309a057efdc12bd6bc69f9d34e30cf404193c92dc4f191a209204916f94de57ede1cb22065f4c8e793d558444256dde86c6de578dddc153d31c2e90b712551759a322accf22ba64838ffb25c79377531ea477e6775a6dc6c92389a261a32687470ac1a4f94d5b552754164fb87408700481adae352b8dd42a21de13b6d64c17ef00da0a8987069f4988bf254d82a92cac0624c1e53af261288b39a266c78e273b5dc3d516bbd1ccbbc5aa577363635ae2f088f413e9a4c78ba22e2461941beb61e41d8d0359acbb4f92ef27f2d648928d9eea251f8c130bba4a4bb6c0584556f2b8477be025c21521ef9f82f166a9b843451c4370cf11eb783100f08549afc5aee35be6e146e156031abd1abe9734f6f80d0897e4a563e41b6b0ebe4311ec73741219b25c0a4b47d362fc7967234e29fb5a9695cb66fcfcd1d7011e8b0e2bcc3c88f6e755af03bd4bfd0c6b6c345de985ac8d16c822d811d5d273697779077b6eeed70f27d68ec9511f6a9f95d760a7c7924e7746041c28783de5c51eb308fb4ec7ba1c5cd7997ac93fec9641bfa272bad4181eed7229fde124668f640a1c71236bec12add05ba5d2b1346be900ccb905669da08c07e76e9b79b737beb4dc2ddbe4daeb44c1da7d600f85f71e997d53209f57d669879b79dfe709e159d519636028bed427b0365decd2d3b7109c59e20593f4b7ba2a803a0077fd9b31f79e5e579359ff4848009648334f709134c289427f83cc89416f2cd579754284dc1cbd6aebe2dac252777b896915c2b20de4d50e2478f3cc1281c632be7d77984b22e9607b274cd3cefbc4770193b88fac1d6fdfdf07c2853628e651efdcb694d690f5bcc8dbdefdc2ac9dea79d114947c4cc58753f3ede1a805e76b10029129961674604b378639ee76d273f72f07050352b58aca4cbd315833c47569c62c3bf1f4af8c0d6c0480b74f603673b6de656c3cd710ec3372984be23a4cd42ddc6e6580aee88585f83ae304fec41b3a039efe1160f50af51bcbc4168cdf672a3f9f4ec4eb5e49bdeab1581752e2f2f994eb35faf327e8acff6828c78cbe08d9248d92a31fdf6ddd4c7d447d3731a1e9f1ac513dba7f10b52b94732bb004184982a617e155af12fc99b784c7a8e4aff9861edf3253908da5ba29b19f6f4cb76b11573042144f42a05c836e7fd074f11b3c02b1388a63148339046939fd3aff74f984d703e4e082788878fbb62751118ea4ee03d30c9579356e12620d3e34158989509bd71b9910e08a3037e01a7c2f666303bb723b4463b779d7e54a90b160c756e24d24d01bb9d3614a03d1f6dce7ff90ac80024574c1c82d1a9ce8eb559771ef5832c305c10b3c0bab55b4398b62f0d69d9b26b8240a5f96855f287a5b7a06c3e88cff32da835a8dc0bb912fcf25186a20e068352b6363f79cf31c8726abb0c1451517815b6991bab1e95664fe9c57f73b7db64c4dd06bf5d44437e20d6a75234ed490c6ac0a427102f0fedd0197b6adc4e3149d7b214726c3ebde308a11decf96982e5c9b2d4ad3d8e1acc8789de88c8f7f488ce88969c5765be0c6d8db987ffc66a357026b7cfb06c38c0c916db34b1e5758a325d84300af3017e2fe6f73b5298cde13b1beabc63877df74ff143843b9f928fd53068f3dbc55edccf01c993d8ffed1de1110e2bcf59e9ccf6c32cd39fd612943c015a3f9b1087be80aab638184e2c759b0f7d4b5c621643630b7880b7dfaa6a21bc6934295bf6b0b8e4171150d884575e0c722557dbd22fb7e0db0dfa0dadf630bec0111addb30cc54924215ca627f1f5885377a1652392f94ea90cd453ccfb086f2df980fc968ff0d67d276c03113bc41946474c9d74b0b6363efdc3828a5db0100df2dde0c28f7dbcef0986a26595e6e13d5dfe4462813ba34f4be96b1e1dfb5dce884bb46898e79538c811efc58d632ba34f95777bf5de7b52e7443354371f761f621a4c06f63d01b2417f497f02067d165a3d6b813a82c2d5860676fd0ff29ef07ac8c021e906cc7d6cfd208d0aa274c7af14738ba45f6169e4c0389ed57f9a963361df0eda0984fbab152cae65ebe377d0636f20666ea0a95030530d3d9ceba4410fa64a19f7245a03d083e7753c14548946a4a8b9d2c96691f8f4e15f090180726a03313d14f2a049e9be83b7c054e53da9997bd47d8f445a0e4527f7010c6842b1a779c7b4779cde7742e9366a638c8fff88417b3197a3c41dab96b401d1343475472a625212329ac425cdffff5113e57d843c46368518eb1ef0e3ceb9d584b3177d4cd7f67e468f908072ac04b028f2ed1cf2bf548a6ce81529761339a35cbfb35102f20085575d2b78de93fb1edb4af61d287560a2f3cdf67a7b256ad46f69028ec96fec1532e4121e83bfe1bf6317e7205a0ac2b33a6d083893b402d541a1fa8d6866c3671db821df51a532a6fade0525827b8a69c3d98fef23fc068aae17eb4978d1150f8018c6ba807b7ad5ee9563aabd88a426e0bd9cde3ff3acf4c55e46b7d5ac1d63bfc3a804f6149812742cdded889111c318189d5dace8f8b713eaf49430ffa6d4e8a1f7fd4bea23a773efbb5bd71e18a6d8e0385808e5d9ceb66cf49c0c1e52072034d907e1591c69f0dd2815b8a200f1919413f92fea76aeb4c0b008ecee88f7fa2a4f803bad2b4b0e95b0312e3394643bb07f5adbc5960d2de07233d42f99c17c3b62c0e0474804229f922f0e2be66e9d88a94f5040ca9934409e5b5eb780db2a5e4cfbc675f081a6b6b4d18cff56bf8f6cea8f56bd089600a2319db709101e3bd18b861dc7740b81239a4bf8da9578fadb88586c25cbcbba443ac884c65c17ef0b4cc0a3a364ef24f54a99db0065f2aae4b64161a36457b7b2341d50bd17539b08bd8184a598612e3028241696459c894fe176e2ba7751c87ca254bd701da89a16273f534c318dfbfea3ff013a0feaf437ea31556444c464b2e7cef21792fe249cde5926385d5e2664a947053c88603638ddc653e681818c17ff57fd9a36f24fb46ceaae3746a29174d05146ca486adc93e082bc6b84a26c825c7c9c0c632255cdce68c706e135d2a6046c08ee3f17d72baf8c342e07688ba48b73864b025cc93243d99feaa9d1a31795b426cade29f25f74818fa2608874b241009edc1e6a53b5159a81aea8cc46597519f49313ef184fab180c632e5a58e86fb5690720d3da8994ca326ebb325203d812c40dcdffd3a178e1ad756a96d300f2f3593cd56a9b4e0d2c16c8e8dcd562ec3160fef8df261972f4f20187f163a901b7ffd8d115e506a95e4a76340a8a1c5870194cfbac7afdbc84295a64600d55df56d332404bea896630bb34c1f220ce3979d12885f4af7b14e671882e30ff2517a9b07ca4929d52b230bcea47447240403cf5b7530a24a271efff24e8865c2c985c01bfcbf1fc93187719c8f137313cd0807da5a88cd1c6655d6e60277d83ffd00aba46ec684472d67052b94dd1dfedf4baf335022464c87813132a43973a5a796dfb90d58ac2e290b4e1a817958abcd721388d8be104c6dc51bdb465c8cfdb655e3dc50b193cf96010169823b8b3a9f3594bda8f3abe4788b9502459161bc620d1b9fbf198bcb2ad6aa086ab75b66b79829e8728f4c2a772b33ced9b08d645a2e27f16a7a7af46e14bb82edeabccb84c7ada63bdb3de63a7665fb26484a11d94621b257fcd1a166ae4817f78eccf4c2b4b3eeb38be76ff0ca87a9843a6988f29bbe32625c795c729094b60eb195434cdc4f625a695028d3eaea7d69865be1f87b4b96046020bad9be243859025bacc385f274f41d880c426e6f173f6f1b855c63cc2faa80e386662ac5449681e39368eeed345a48568c7ca5a2878d6c4af3b9679216dba19668607e464f5b721e1cea140c52fb97a07eade3d19073967664404173bf93e3ef0f1ac371adcceaf5ef720ac263820e5334ed081890aa09336d53a7b363a9403704c52071e83294d317c27ea027bdd45deabba88c026db8dc059b5319b8fbf43901ee84eeebe0fa674aaa99228267e13e20ee243b85872eebe57b4015f2a0c1c806ce566e725528564473c133b99a53886ba418ec84897d20ab1270d0798a7f6e4f984258733ffebb6532ed30cea825036cd32e9b78b567a35f4bdfd8053072304cf6f358ceff25d7d2d42bef1d7d1781d7d72e292fc7a6f35d9ba2381c254cd8e4d97b4d6aea454226db9d671e4f8688918981c1f80725df1da8fd374cc20a1f4a0690406827f63ad394fe0b4229c39878473d96c7ba9d5b372ea95ee85ff619f0560a493145ac1ac4b05d41b28c76526871beb535c378b7d8f85a76094c299ab389848e043d6bcdc60385c2ae5d7d01f72c22764c02cabfa5814919fe2009fefeffa8da2418ccab046f211d67deffe6253f7a18d605b98b2248cf56d42bf2c55988e513c4316c05e420477acec1c98dee636417485ab4290dfcc7477fc8a0f9fb5113e83971a23ed2e96b07b4432536fd2b5544b63b9816ba6a2af0ce580cd130956a060a5c057c7678f681354a611f16cde622beb59a5ec732b80bcd7a2cc7d03a1751573cf657995e3a142e7beec1f1a40aae48e0c2f3634f860676e90316160417bbed00ec70e63e503780fc69277970a7dc5de16137d0ce3e952d2baa8a349d30d18138e5a6eb1b28516c60b8e275c24d12d984b2ca0ed1940389086a78bba61066a4101ac9f7bda396d320345a15e62802694171130c6a2d926f9c940abdfe09ef01e11f7f6ecc9242978d96e44418fd0cc8ad2596febf8705ee24c7918ebc5e83f174914de7bea08601af681be8ad696b8947251bdc6ec602d8f3ed30c2c1c24d45ca4bd0cee3efb8a66a1427ee270ce3d4ffa101a9166741871be06a9f10ab7a358907c59dd919a7320a2d884b50363df89ede6f51d292ef9d52e2fe3f3da7fe540a50719f9b60b074bb5e8cf2d5a374e5bbb6dc82ab1a6196cd4fc854cff97442c82a164048bba155b5145549632d9c2249f8a873ed314a95f591b37ee32d8c022dbd5a51181e842354cb6e901680a10dee8fbfef7c34d0e9b0f9dc122eac4c6a435bb9cb6458ad6fde05e2a98e44be21677e0b792556f8b77cc6a4fb8ec98e9812f531e73d0a02c411362ef7802d55a4c9b21d00e95b11fc5d269948ffbe4d6c0e03e6408c02f07bfb6fea8cf84fe87800482c02e02b0b81e9074c8a0a77c628530a19a8f8e62ce979b42ce7646223ffad008bfa6ae0250bf69b38ddb3b7ac8ba249670f950ca8eeaff973a3ac23b7fa9a9f3e2f00c59ac71951e97dfc0aaab846e2a7d05e9b7a3641edadfc3992b0fac8a8dd7c14f1313d090a8d65c8db03e37e09dc1ad3f5317c0b414dbe511432dc524e38f53bed071dfe025e25186a206e68b68b1f82117ca2d67b55e8728d3cff2a0cb65c0482ad1bd97f44d2501ce826256103ddb154e1ebd19203155129cedd3bd10ba19f8416afe5ea0cc430202b436ebfc622648d08a80677ba49d9e9e5864805b2e2a06e9c9ee5a22cf223e0a3eaf66e68795eaf05fa49f0cd559934bbadde417b5e15f3eae3b0063f32bf32889137e6a93646523d8caef0f9197f782e46edebdf7cb983bcaca5a09771ab08922b9923b3625f71cfb83894e0732fa73a4279188fd910060af35e28f18fd23ba9a69be666b0295e6953fa99fea25394962b529014bce1c13400b5e5d998619fc762dca070a7e5a29c13c79c98580ec516cf4700e6736247339a30d04184865a9bd11aa77dcd3bc3eb9d85ce6e83ad6b8f0a333df7c949d16c9c22504f818745c28c9a944ef22b4e50a520591b0748674172444170ed795cdf7541672fe03cc64734b8711caa058937ddb06f13af80c9753bd622888556139c5b798b757433019c87776961be1ba1c90a47ea53017081e9493fdc033d773645c6b62d3a539eb6018a1b3a5a39edfbaea5275d6ca7c65eebbd2bc5c6eafa0277d8d0ac99fe9a3e130d04e5b9723131de685adb7b54cef568131a05da97e4df20af867a4bd12d8d6234d568ec09503ca78ea81282958772fa678f8308dd0a98945c1bd56e1fa8b217e05b6bf99384bb60f96f396d5873a488271c1c84d2b380dc0cde62cd0cf7b449fdc2c28ed509646c50a11a3e991b6fb1008ae292d0a38c0a855b4043a4e43f22adb4568e4b99a089c0e3d60b90e2343ebb6629a322540317882965e4d95feb2df461928118e24f7292824af4845c3f8fee4471b3ae6150f6234f228031e0547bda4fd88f2dde32042d3782bd3ae0d7a7fc692b1c3abc5dc2d46209fd22c39bcfac863322edecfbd875d04ab829fe1d73f81842d4302bbb6606e37f3d1afd7b6a068ea7902c1c3bd9c98982d7e6d38a707b747cb170cb87308ec3a7a79d176ef296f1d929d322da25163e40757b93a49c080b28a71c781f8fffc152aba06b00e126cd5d37afa390acfe9bc4033108245d84c02ebb7ed023a02d3097bd921f038be2a2db0cfba43f5c853fc89588429c1e36a7a158f99e419e3ac8f2084d661b47010ba337cbd4667077b58ced656aac030a036099a7ef2c497ab079dea7d9427346e66834a7afc0f8d5696b385bc29ce5c799853f42dc9806ea760075e4055005d0547eea4ff5477278a890de240226e8ec0d46cfbf4d92791a01f46c28f42350d09cd5988a27ed3e08402db88d851d64339693ca4008586acc4b7316fad4f44bf99deadf8dc01f1eb14becfaf22820031338d1f69b5319db8d93c5f00e23a9b90c37697a79352b53c591578f9e8d54cedc8491217c728f3d3c126ae80976a3d799a67582892154bfe45db41d4eee525c389232f9e1f589a9990cb6eb621cf32f098144a9d3c15d040ff8020064ac9ea1734ab4da92f9b1972f08daab9ceddbbe5a501801f0e956e3f0bb404467b3d70c28d7e0bb5feb73a89038465422e1153d88ba909283bed7e2edd46ba3a74c034762a1c7726cf3a769847ed9cbc5842f0501e8556e0418682261e5887cd1612d6cd259b021b9eed97a96d83b3f593b0eb6eb212456cf8183cb35a6bbe29bc5dac9df8c02e40f092aa600fad3bf4c23ac62f84ad91ad0f34d3a74e736248f2dd594285ff17e9d84d0ee7fc4934bb5a0b0b42df352237ef0f8fe7e434ae015218c1d2326f8666f9510a2b54880790b990adb27931156adfca776edee964551654a1818d20d20d667fd483a249d92ef95fc2f8655fc0d56cacee8c1037a133a06c0ab7b4b19f39497d5fee44ccdc7c3b9be2eb566e167d33b9b58d98083327ec70d852e9bf80e2fcd95c4ecec8f7d0ada4b2f45c34a884e4c9d5fe3cb9c7fe05949565ca2fa37c92850ee5bb55709a81a1ba9022207ed4b498ce71ebc642e7aa9460cf25980f274c36d155a24b5df8d3d2d0cc30eb9b0cb91611c2c621873d4dc091aec59e527f9be69272f07a4454544c9126f6400839157ee0e0206aab7b83f1a18e11f66ef74bbd03d4a93bcc2e122d0973baf7fdfc318b1d9950f5deb1466e450191364c346b485c0ca80368b04f4b4611d390a8e53ea233079e7c0f509d6007470b703d01acef17465e13ce1b5009e390cccf490c1b581a993bf4721aa0e479f876b1ea73fdb1530ab8eca7804e7533be201139a2918f8dd58b92de8833ba08b6817b101e3e6fef1b8a26e445157f24728b5d1cd6ef7161634396ed71470e7e3c5056b0b8c43511304c0d31e4620791731a15e6bf8c995dfa65bb73146ab50eff6889e1a684e819d894d3047e7427a661fd5dee26ee5d0e718925d73f651338ff9f3ff90329b6c2d13dd8bdf83371e19b6cdd9028049e03bae083765efc3ccc444094c87bed755695120b489f3f79b4b73ee22255ff01729792b471fd7db6ed651ea36803e86f36b648cc54f60aa191c8868e85309d010a33233b1670d26fb9dca564ff5759e2cc1e04c9a247277698ba0448a56912e7662fd572d88eee1a569843b9a66c824f931b5c18124168b52782564aaefeea4e94b0d2c522671a36b155c4323be6e964fc4937a075062cc50ab3487ddbca74e906b3c79371ff02a400486efdd</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">输入密码，查看文章</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>Colorful-Error-Repo</title>
    <url>/2022/08/17/Colorful-Error-Repo/</url>
    <content><![CDATA[<details class="note "><summary><p>secondary</p>
</summary>
<p><strong>Colorful-Error-Repo</strong></p>
<blockquote>
<p>简单的自定义报错回复模板.</p>
</blockquote>

</details>


<h1 id="❡Colorful-Error-Repo-来点不一样的报错吧"><a href="#❡Colorful-Error-Repo-来点不一样的报错吧" class="headerlink" title="❡Colorful-Error-Repo:来点不一样的报错吧"></a><a href="">❡</a>Colorful-Error-Repo:来点不一样的报错吧</h1><blockquote>
<p>使用《署名—禁止演绎 4.0 协议国际版》（CC BY-ND 4.0）进行授权。<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5kLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nd/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<blockquote>
<p>续之前的弦：<span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5rb2tvbmEudGVjaC9kLzExNjgtemhpLWxpbmctamlhby1iZW4tc2kteGlhbmctdG91LW5pYW5nLXppLWppYW4tZ2VuZy1sYW4tZGUtcGFuLWR1YW4tYmFvLWN1by1iaW5nLXppLWRpbmcteWktaHVpLWZ1">骰娘自检/判断报错并自定义回复<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<hr>
<h2 id="一、基本信息"><a href="#一、基本信息" class="headerlink" title="一、基本信息"></a>一、基本信息</h2><ul>
<li>作者： 简律纯</li>
<li>联系方式：qq:a2c29k9</li>
<li>版本：v1.0</li>
<li>更新日期：暂无</li>
<li>关键词：暂无</li>
<li>许可协议：CC BY-ND 4.0</li>
</ul>
<hr>
<h2 id="二-、需求"><a href="#二-、需求" class="headerlink" title="二 、需求"></a>二 、需求</h2><ul>
<li><input disabled="" type="checkbox"> 更多的lua报错类型列表</li>
<li><input disabled="" type="checkbox"> 更多时间</li>
</ul>
<hr>
<h2 id="三、准备"><a href="#三、准备" class="headerlink" title="三、准备"></a>三、准备</h2><p>1.暂时用了手册内色子整理的常见报错信息说明。</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span> <span class="string">&#x27;%s&#x27;</span> <span class="keyword">not</span> found:</span><br><span class="line">	no field <span class="built_in">package</span>.<span class="built_in">preload</span>[<span class="string">&#x27;%s&#x27;</span>]</span><br><span class="line">	no file </span><br><span class="line"><span class="comment">-- 没有把被引用的lua或dll文件放在指定位置（多见于require与loadLua）</span></span><br><span class="line"><span class="comment">-- 解决方式：把所需文件放入Dice存档目录/plugin/或Diceki/lua/，dll文件或require对象必须置于后者</span></span><br><span class="line">attempt to call a <span class="literal">nil</span> value (global <span class="string">&#x27;%s&#x27;</span>)</span><br><span class="line"><span class="comment">-- 将空变量%s用作函数（global表示被调用的是全局变量，local表示本地变量，method表示索引方法）</span></span><br><span class="line">attempt to index a <span class="literal">nil</span> value (global <span class="string">&#x27;%s&#x27;</span>)</span><br><span class="line"><span class="comment">-- 对空变量%s使用索引（只有table等结构可以索引，形如msg.fromMsg）</span></span><br><span class="line">attempt to concatenate a <span class="literal">nil</span> value (<span class="keyword">local</span> <span class="string">&#x27;%s&#x27;</span>)</span><br><span class="line"><span class="comment">-- 使用..连接字符串时连接了一个空变量%s</span></span><br><span class="line">bad argument #<span class="number">1</span> to <span class="string">&#x27;%s&#x27;</span> (<span class="built_in">string</span> expected, got <span class="literal">nil</span>)</span><br><span class="line"><span class="comment">-- 函数%s的第1个参数类型错误，要求类型为string，但实际传入的参数为nil。特别地，got nil表示输入参数为nil或缺少参数</span></span><br><span class="line">value expected</span><br><span class="line"><span class="comment">-- 要求参数，但没有传入</span></span><br><span class="line">attempt to perform arithmetic on a <span class="literal">nil</span> value (global <span class="string">&#x27;%s&#x27;</span>)</span><br><span class="line"><span class="comment">-- 将一个空变量%s当做数字表示</span></span><br><span class="line">bad argument #<span class="number">5</span> to <span class="string">&#x27;format&#x27;</span>(number has no integer representation)</span><br><span class="line"><span class="comment">-- 函数format的第5个参数类型错误，要求是整数，但传入是小数，或者是其余类型不能化为整数</span></span><br><span class="line"><span class="string">&#x27;&#125;&#x27;</span> expected (to <span class="built_in">close</span> <span class="string">&#x27;&#123;&#x27;</span> at line <span class="number">169</span>) near <span class="string">&#x27;%s&#x27;</span></span><br><span class="line"><span class="comment">-- 脚本第169行的左花括号缺少配对的右花括号。此错误也可以由表格内缺少逗号分隔、括号外的中文等原因造成</span></span><br><span class="line"><span class="string">&#x27;end&#x27;</span> expected (to <span class="built_in">close</span> <span class="string">&#x27;function&#x27;</span> at line <span class="number">240</span>) near &lt;eof&gt;</span><br><span class="line"><span class="comment">-- 脚本第240行的function缺少收尾的end，&lt;eof&gt;表示文件结束（找到文件末也没找到）</span></span><br><span class="line"><span class="string">&#x27;then&#x27;</span> expected near <span class="string">&#x27;end&#x27;</span></span><br><span class="line"><span class="comment">-- if then end逻辑结构缺少then</span></span><br><span class="line">unexpected symbol near <span class="string">&#x27;%s&#x27;</span></span><br><span class="line"><span class="comment">-- 符号%s边有无法识读的符号，比如中文字符</span></span><br><span class="line">attempt to get length of a <span class="literal">nil</span> value (<span class="keyword">local</span> <span class="string">&#x27;tab&#x27;</span>)</span><br><span class="line"><span class="comment">-- 对空变量tab作取长度运算（#）</span></span><br><span class="line">attempt to add a <span class="string">&#x27;string&#x27;</span> with a <span class="string">&#x27;string&#x27;</span></span><br><span class="line"><span class="comment">-- 对(不能化为数字的)字符串用加法&#x27;+&#x27;（字符串只能用连接&#x27;..&#x27;）</span></span><br><span class="line">attempt to compare number with <span class="built_in">string</span></span><br><span class="line"><span class="comment">-- 对数字和(不能化为数字的)字符串用比较运算符</span></span><br><span class="line"><span class="built_in">error</span> loading <span class="built_in">module</span> <span class="string">&#x27;%s&#x27;</span> from file</span><br><span class="line"><span class="comment">-- 使用require &quot;%s&quot;时加载出错</span></span><br><span class="line">no visible label <span class="string">&#x27;%s&#x27;</span> <span class="keyword">for</span> &lt;<span class="keyword">goto</span>&gt; at line </span><br><span class="line"><span class="comment">-- 在循环结构中跳转不存在的节点</span></span><br><span class="line">invalid option <span class="string">&#x27;%s&#x27;</span></span><br><span class="line"><span class="comment">-- 传入的参数不是string或不在给定的字符串列表中</span></span><br></pre></td></tr></table></figure>

<h2 id="四、引用清单"><a href="#四、引用清单" class="headerlink" title="四、引用清单"></a>四、引用清单</h2><ol>
<li><span class="exturl" data-url="aHR0cHM6Ly92MmRvY3Mua29rb25hLnRlY2gvemgvbGF0ZXN0L0RldmVsb3BfTWFudWFsLmh0bWwjaWQyMg==">https://v2docs.kokona.tech/zh/latest/Develop_Manual.html#id22<i class="fa fa-external-link-alt"></i></span></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>lua-colors</title>
    <url>/2022/08/16/lua-colors.howto/</url>
    <content><![CDATA[<div class="note primary"><p><strong>lua-colors</strong></p>
<blockquote>
<p>用lua解释色彩原理.</p>
</blockquote>
</div>

<p>颜色通常在软件中通过其在RGB（红-绿-蓝）颜色空间中的坐标进行编码。 不幸的是，RGB色彩空间非常不直观，另外某些颜色协调的原则在RGB中不容易表达出来。 HSL（色相-饱和度-亮度）色彩空间解决了这两个问题。这个库允许你在HSL色彩空间中处理颜色，计算协调的图案，然后转换为RGB。 (你可以在 <span class="exturl" data-url="aHR0cDovL3d3dy53b3JxeC5jb20vY29sb3IvY29sb3Jfd2hlZWwuaHRt">worqx.com<i class="fa fa-external-link-alt"></i></span> 看到更多关于色彩协调的相关内容)</p>
<h2 id="HSL-色彩空间"><a href="#HSL-色彩空间" class="headerlink" title="HSL 色彩空间"></a>HSL 色彩空间</h2><p>颜色在HSL中由三个值编码：色相，饱和度和亮度。</p>
<p><strong>亮度(Lightness)</strong> 正好与颜色的亮暗相反。 白色亮度为1，黑色亮度为0。 其他颜色介于它们之间。</p>
<p><strong>饱和度(Saturation)</strong> 代表颜色的强度，它显示颜色与灰色的距离。 以下是不同饱和度和亮度的红色渐变：</p>
<table>
 <tr>&nbsp;</tr>
 <tr><td colspan='11' style='text-align:center'>Lightness</td></tr>
 <tr><td>&nbsp</td><td>&nbsp</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.0</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.1</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.2</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.3</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.4</td>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.5</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.6</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.7</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.8</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.9</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">1.0</td>
</tr>
 <tr>
  <td rowspan='11' style='vertical-align:center'>Saturation</td>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.0</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #191919;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #333333;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #4c4c4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #666666;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #999999;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b2b2b2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cbcbcb;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5e5e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fefefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.1</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #1c1616;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #382d2d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #544444;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #705b5b;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7272;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a38e8e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #baaaaa;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d1c6c6;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e8e2e2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fefefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.2</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #1e1414;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #3d2828;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #5b3d3d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #7a5151;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996666;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ad8484;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #c1a3a3;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d6c1c1;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #eae0e0;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fffefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.3</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #211111;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #422323;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #633535;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #844747;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a55959;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b77a7a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #c99b9b;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #dbbcbc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #eddddd;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #feffff;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.4</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #230f0f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #471e1e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #6b2d2d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #8e3d3d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24c4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #c17070;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d19393;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e0b7b7;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #efdbdb;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fffefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.5</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #260c0c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #4c1919;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #722626;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #993232;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3f3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc6565;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d88c8c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5b2b2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f2d8d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fffefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.6</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #280a0a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #511414;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #7a1e1e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #a32828;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc3232;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d65b5b;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e08484;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #eaadad;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f4d6d6;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fffefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.7</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #2b0707;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #560f0f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #821616;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #ad1e1e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d82626;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e05151;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e87c7c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #efa8a8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f7d3d3;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fefefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.8</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #2d0505;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #5b0a0a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #890f0f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #b71414;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e51919;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ea4747;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ef7575;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f4a3a3;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f9d1d1;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fffefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.9</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #300202;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #600505;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #910707;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #c10a0a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20c0c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f43d3d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f76d6d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f99e9e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fccece;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fffefe;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">1.0</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #000000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #330000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #660000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #990000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; color: #ffffff; background: #cc0000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff0000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff3232;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fe6666;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff9898;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ffcbcb;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #fffefe;">&nbsp;</td>
 </tr>
</table>

<p><strong>色相/色调(Hue)</strong> 是颜色的“color”：它让“绿色”与“红色”不同。色相 也可以表示为介于 0 和 1 之间的数字，但此库使用从 0 到 360 的值。<br>与亮度和饱和度不同，hue __loops__：色相360实际上与 0（红色）相同。</p>
<table>

 <tr><td colspan='11' style='text-align:center'>Saturation</td></tr>
 <tr><td>&nbsp;</td><td>&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">1.0</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.9</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.8</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.7</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.6</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.5</td>

<td style="width:40px; text-align: right; border: 1px solid gray;">0.4</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.3</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.2</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.1</td>
<td style="width:40px; text-align: right; border: 1px solid gray;">0.0</td>
 </tr>
 <tr>
  <td rowspan='37' width='100px' style='vertical-align:center'>Hue</td>

<td style="width:40px; text-align: right; border: 1px solid gray;">0</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff0000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20c0c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e51919;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d82626;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc3232;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3f3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24c4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a55959;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996565;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7272;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">10</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff2a00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f2330c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e53b19;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d84326;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc4c32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf553f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b25d4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a56559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996e65;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7672;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">20</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff5500;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f2590c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e55d19;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d86126;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc6632;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf6a3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b26e4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a57259;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #997665;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7b72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">30</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff7f00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f27f0c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e57f19;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d87f26;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc7f32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf7f3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b27f4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a57f59;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #997f65;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7f72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">40</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ffaa00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f2a50c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5a119;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d89d26;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc9932;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf943f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b2904c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a58c59;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #998865;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c8372;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">50</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ffd400;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f2cc0c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5c319;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d8bb26;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ccb232;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bfaa3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b2a14c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a59959;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #999065;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c8872;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">60</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #feff00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f2f20c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5e519;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d8d826;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cbcc32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bfbf3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b2b24c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a5a559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #999965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c8c72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">70</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d4ff00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cbf20c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #c3e519;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bad826;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b2cc32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a9bf3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a1b24c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #99a559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #909965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #888c72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">80</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a9ff00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a5f20c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a1e519;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #9dd826;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #98cc32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #94bf3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #90b24c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8ca559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #889965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #838c72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">90</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7fff00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7ff20c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7fe519;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7fd826;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7fcc32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7fbf3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7fb24c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7fa559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f9965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f8c72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">100</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #54ff00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59f20c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5de519;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #61d826;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #65cc32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6abf3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6eb24c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #72a559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #769965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7b8c72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">110</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #2aff00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #33f20c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3be519;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #44d826;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4ccc32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #55bf3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5db24c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #65a559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6e9965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #768c72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">120</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00ff00;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0cf20c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19e519;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26d826;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32cc32;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fbf3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4cb24c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59a559;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #659965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #728c72;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">130</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00ff2a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0cf233;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19e53b;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26d844;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32cc4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fbf55;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4cb25d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59a565;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #65996e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #728c76;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">140</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00ff55;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0cf259;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19e55d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26d861;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32cc66;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fbf6a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4cb26e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59a572;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #659977;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #728c7b;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">150</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00ff7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0cf27f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19e57f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26d87f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32cc7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fbf7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4cb27f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59a57f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #65997f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #728c7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">160</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00ffaa;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0cf2a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19e5a1;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26d89d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32cc99;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fbf94;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4cb290;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59a58c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #659988;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #728c83;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">170</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00ffd4;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0cf2cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19e5c3;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26d8bb;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32ccb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fbfaa;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4cb2a1;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59a599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #659990;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #728c88;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">180</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00feff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0cf2f2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19e5e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26d8d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32cbcc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fbfbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4cb2b2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #59a5a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #659999;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #728c8c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">190</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00d4ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0ccbf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19c3e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #26bad8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #32b2cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3fa9bf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4ca1b2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5999a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #659099;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #72888c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">200</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #00a9ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0ca5f2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #19a1e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #269dd8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3298cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3f94bf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4c90b2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #598ca5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #658899;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #72838c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">210</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #007fff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0c7ff2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #197fe5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #267fd8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #327fcc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3f7fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4c7fb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #597fa5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #657f99;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #727f8c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">220</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0054ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0c59f2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #195de5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #2661d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3265cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3f6abf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4c6eb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5972a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #657699;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #727b8c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">230</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #002aff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0c33f2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #193be5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #2644d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #324ccc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3f55bf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4c5db2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5965a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #656e99;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #72768c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">240</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0000ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #0c0cf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #1919e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #2626d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3232cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3f3fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4c4cb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5959a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #656599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #72728c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">250</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #2a00ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #320cf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #3b19e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4326d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #4c32cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #543fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5d4cb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6559a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6e6599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #76728c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">260</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5500ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #590cf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #5d19e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6126d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6632cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6a3fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #6e4cb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7259a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #776599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7b728c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">270</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f00ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f0cf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f19e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f26d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f32cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f3fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f4cb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f59a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f6599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f728c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">280</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #aa00ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a50cf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a119e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #9d26d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #9932cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #943fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #904cb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c59a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #886599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #83728c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">290</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d400ff;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cb0cf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #c319e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ba26d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b232cc;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a93fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a14cb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #9959a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #906599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #88728c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">300</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff00fe;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20cf2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e519e5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d826d8;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc32cb;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3fbf;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24cb2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a559a5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996599;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c728c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">310</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff00d4;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20ccb;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e519c3;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d826ba;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc32b2;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3fa9;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24ca1;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a55998;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996590;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7287;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">320</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff00a9;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20ca5;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e519a1;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d8269d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc3298;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3f94;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24c90;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a5598c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996588;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7283;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">330</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff007f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20c7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5197f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d8267f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc327f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3f7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24c7f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a5597f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #99657f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c727f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">340</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff0054;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20c59;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5195d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d82661;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc3265;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3f6a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24c6e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a55972;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996576;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c727b;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">350</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff002a;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20c33;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e5193b;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d82644;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc324c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3f55;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24c5d;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a55965;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #99656e;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7276;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
 <tr>

<td style="width:40px; text-align: right; border: 1px solid gray;">360</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #ff0000;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #f20c0c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #e51919;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #d82626;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #cc3232;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #bf3f3f;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #b24c4c;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #a55959;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #996565;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #8c7272;">&nbsp;</td>
<td style="width:40px; text-align: right; border: 1px solid gray; background: #7f7f7f;">&nbsp;</td>
 </tr>
</table>

<h2 id="使用颜色进行-HSL-计算"><a href="#使用颜色进行-HSL-计算" class="headerlink" title="使用颜色进行 HSL 计算"></a>使用颜色进行 HSL 计算</h2><p>在HSL空间中创建颜色并将其转换为RGB。</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> colors = <span class="built_in">require</span>(<span class="string">&quot;colors&quot;</span>)</span><br><span class="line">c = colors.new(<span class="number">130</span>, <span class="number">.8</span>, <span class="number">0.3</span>) <span class="comment">-- 绿色，相当饱和，有点暗</span></span><br><span class="line"><span class="comment">-- =tostring(c)</span></span><br><span class="line"><span class="comment">-- #0f8923</span></span><br></pre></td></tr></table></figure>

<table>
 <tr><td width="100"></td><td width="160" style="background: #0f8923">&nbsp;</td></tr>
</table>

<p>你也可以通过它的RGB代码创建这些颜色：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> colors = <span class="built_in">require</span>(<span class="string">&quot;colors&quot;</span>)</span><br><span class="line">c = colors.new(<span class="string">&quot;#0f8923&quot;</span>)</span><br><span class="line"><span class="comment">-- =tostring(c)</span></span><br><span class="line"><span class="comment">-- #0f8923</span></span><br></pre></td></tr></table></figure>

<p>当强制转换为字符串时，颜色将转换为其 RGB 形式：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">=c</span><br><span class="line"><span class="comment">-- #0f8923</span></span><br></pre></td></tr></table></figure>

<table><tr><td width="100"></td><td width="160" style="background: #0f8923">&nbsp;</td></tr>
</table>

<p>查看 HSL ：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(c.H, c.S, c.L)</span><br><span class="line"><span class="comment">-- 130     0.8     0.3</span></span><br></pre></td></tr></table></figure>

<p>改变饱和度：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">=c:desaturate_by(<span class="number">.5</span>) <span class="comment">-- 将饱和度设置为饱和度*.5</span></span><br><span class="line"><span class="comment">-- #2d6b38</span></span><br></pre></td></tr></table></figure>
<table><tr><td width="100"></td><td width="160" style="background: #2d6b38">&nbsp;</td></tr>
</table>
    
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">=c:desaturate_to(<span class="number">.5</span>) <span class="comment">-- 将饱和度设置为 .5</span></span><br><span class="line"><span class="comment">-- #267233</span></span><br></pre></td></tr></table></figure>

<table><tr><td width="100"></td><td width="160" style="background: #267233">&nbsp;</td></tr>
</table>

<p>改变亮度：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">=c:lighten_by(<span class="number">.5</span>) <span class="comment">-- 将亮度设置为亮度*.5</span></span><br><span class="line"><span class="comment">-- #14b72f</span></span><br></pre></td></tr></table></figure>

<table><tr><td width="100"></td><td width="160" style="background: #14b72f">&nbsp;</td></tr>
</table>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">=c:lighten_to(<span class="number">.5</span>) <span class="comment">-- 将亮度设置为 .5</span></span><br><span class="line"><span class="comment">-- #19e53b</span></span><br></pre></td></tr></table></figure>

<table><tr><td width="100"></td><td width="160" style="background: #19e53b">&nbsp;</td></tr>
</table>

<p>改变色相：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">=c:hue_offset(<span class="number">180</span>) <span class="comment">-- 色调偏移 180</span></span><br><span class="line"><span class="comment">-- #890f75</span></span><br></pre></td></tr></table></figure>

<table><tr><td width="100"></td><td width="160" style="background: #890f75">&nbsp;</td></tr>
</table>

<h2 id="构建配色方案"><a href="#构建配色方案" class="headerlink" title="构建配色方案"></a>构建配色方案</h2><pre><code>要构建配色方案，我们通常从颜色开始，选择一种或多种匹配的颜色，然后从中获取阴影和色调。你可以在[worqx.com](http://www.worqx.com/color/combinations.htm)找到有关颜色组合的一些东西。
</code></pre>
<p>对于 <strong>单色</strong> 配色方案，我们只使用一开始的颜色以及它的色相和阴影：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">tints = c:tints(<span class="number">5</span>) <span class="comment">-- 生成色相</span></span><br><span class="line"><span class="keyword">for</span> i,t <span class="keyword">in</span> <span class="built_in">ipairs</span>(tints) <span class="keyword">do</span> <span class="built_in">print</span>(t) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- #16c934</span></span><br><span class="line"><span class="comment">-- #3ee95a</span></span><br><span class="line"><span class="comment">-- #7ef091</span></span><br><span class="line"><span class="comment">-- #bef7c8</span></span><br><span class="line"><span class="comment">-- #ffffff</span></span><br></pre></td></tr></table></figure>

<table>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #16c934">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #3ee95a">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #7ef091">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #bef7c8">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
</table>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">shades = c:shades(<span class="number">5</span>) <span class="comment">-- 生成阴影</span></span><br><span class="line"><span class="keyword">for</span> i,s <span class="keyword">in</span> <span class="built_in">ipairs</span>(shades) <span class="keyword">do</span> <span class="built_in">print</span>(s) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- #0c6e1c</span></span><br><span class="line"><span class="comment">-- #095215</span></span><br><span class="line"><span class="comment">-- #06370e</span></span><br><span class="line"><span class="comment">-- #031b07</span></span><br><span class="line"><span class="comment">-- #000000</span></span><br></pre></td></tr></table></figure>

<table>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #0c6e1c">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #095215">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #06370e">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #031b07">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #000000">&nbsp;</td>
 </tr>
</table>

<p>对于<strong>懒人</strong>方案，我们可以轻松得出懒人想要的颜色及其色调和阴影：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ctints = c:complementary():tints(<span class="number">5</span>) <span class="comment">-- 制作五种颜色的互补色</span></span><br><span class="line"><span class="keyword">for</span> i,t <span class="keyword">in</span> <span class="built_in">ipairs</span>(ctints) <span class="keyword">do</span> <span class="built_in">print</span>(t) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- #c916ac</span></span><br><span class="line"><span class="comment">-- #e93ecd</span></span><br><span class="line"><span class="comment">-- #f07edd</span></span><br><span class="line"><span class="comment">-- #f7beee</span></span><br><span class="line"><span class="comment">-- #fffff</span></span><br></pre></td></tr></table></figure>

<table>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #16c934">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #3ee95a">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #7ef091">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #bef7c8">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #c916ac">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #e93ecd">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #f07edd">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #f7beee">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
</table>

<p>但是，为了减少对比度，我们可以坚持使用<strong>相邻</strong>的颜色：例如，起始颜色的 +/- 60度：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">n1, n2 = c:neighbors(<span class="number">60</span>)  <span class="comment">-- 获得上下60个相邻的颜色</span></span><br><span class="line"><span class="keyword">for</span> i,t <span class="keyword">in</span> <span class="built_in">ipairs</span>(n1:tints()) <span class="keyword">do</span> <span class="built_in">print</span>(t) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- #16c98e</span></span><br><span class="line"><span class="comment">-- #3ee9b0</span></span><br><span class="line"><span class="comment">-- #7ef0ca</span></span><br><span class="line"><span class="comment">-- #bef7e4</span></span><br><span class="line"><span class="comment">-- #ffffff</span></span><br><span class="line"><span class="keyword">for</span> i,t <span class="keyword">in</span> <span class="built_in">ipairs</span>(n2:tints()) <span class="keyword">do</span> <span class="built_in">print</span>(t) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- #52c916</span></span><br><span class="line"><span class="comment">-- #77e93e</span></span><br><span class="line"><span class="comment">-- #a4f07e</span></span><br><span class="line"><span class="comment">-- #d1f7be</span></span><br><span class="line"><span class="comment">-- #ffffff</span></span><br></pre></td></tr></table></figure>

<table>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #16c934">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #3ee95a">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #7ef091">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #bef7c8">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #16acc9">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #3ecde9">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #7eddf0">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #beeef7">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #acc916">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #cde93e">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ddf07e">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #eef7be">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
</table>

<p>或者，我们也可以生成一个拆分的互补配色方案：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i,t <span class="keyword">in</span> <span class="built_in">ipairs</span>(c1:tints()) <span class="keyword">do</span> <span class="built_in">print</span>(t) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- #8e16c9</span></span><br><span class="line"><span class="comment">-- #b03ee9</span></span><br><span class="line"><span class="comment">-- #ca7ef0</span></span><br><span class="line"><span class="comment">-- #e4bef7</span></span><br><span class="line"><span class="comment">-- #ffffff</span></span><br><span class="line"><span class="keyword">for</span> i,t <span class="keyword">in</span> <span class="built_in">ipairs</span>(c2:tints()) <span class="keyword">do</span> <span class="built_in">print</span>(t) <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- #c91652</span></span><br><span class="line"><span class="comment">-- #e93e77</span></span><br><span class="line"><span class="comment">-- #f07ea4</span></span><br><span class="line"><span class="comment">-- #f7bed1</span></span><br><span class="line"><span class="comment">-- #ffffff</span></span><br></pre></td></tr></table></figure>

<table>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #16c934">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #3ee95a">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #7ef091">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #bef7c8">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #8e16c9">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #b03ee9">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ca7ef0">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #e4bef7">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #c91652">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #e93e77">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #f07ea4">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #f7bed1">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
</table>


<p>或者三色混合：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">t1, t2 &#x3D; c:triadic()</span><br><span class="line">for i,t in ipairs(t1:tints()) do print(t) end</span><br><span class="line">-- #3416c9</span><br><span class="line">-- #5a3ee9</span><br><span class="line">-- #917ef0</span><br><span class="line">-- #c8bef7</span><br><span class="line">-- #ffffff</span><br><span class="line">for i,t in ipairs(t2:tints()) do print(t) end</span><br><span class="line">-- #c93416</span><br><span class="line">-- #e95a3e</span><br><span class="line">-- #f0917e</span><br><span class="line">-- #f7c8be</span><br><span class="line">-- #ffffff</span><br></pre></td></tr></table></figure>

<table>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #16c934">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #3ee95a">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #7ef091">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #bef7c8">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #3416c9">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #5a3ee9">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #917ef0">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #c8bef7">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
 <tr>
  <td width="100"></td>
  <td width="80" style="border:1px solid grey; background: #c93416">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #e95a3e">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #f0917e">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #f7c8be">&nbsp;</td>
  <td width="80" style="border:1px solid grey; background: #ffffff">&nbsp;</td>
 </tr>
</table>

]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>颜色</tag>
      </tags>
  </entry>
  <entry>
    <title>table-module</title>
    <url>/2022/08/15/table-module/</url>
    <content><![CDATA[<div class="note success"><p><strong>table module</strong></p>
<blockquote>
<p>对数组操作函数的拓展，利用这些函数可以更好的进行数据操作。</p>
</blockquote>
</div>

<h1 id="table-module-更多的数组操作"><a href="#table-module-更多的数组操作" class="headerlink" title="table-module:更多的数组操作"></a>table-module:更多的数组操作</h1><blockquote>
<p>使用《署名—禁止演绎 4.0 协议国际版》（CC BY-ND 4.0）进行授权。<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5kLzQuMC8=">https://creativecommons.org/licenses/by-nd/4.0/<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<hr>
<blockquote>
<p>[ toc ] 更多操作，更多的可能<del>猝死</del>。</p>
</blockquote>
<hr>
<h2 id="一、基本信息"><a href="#一、基本信息" class="headerlink" title="一、基本信息"></a>一、基本信息</h2><ul>
<li><a href="">二次修改</a>作者： 简律纯</li>
<li>联系方式：qq:a2c29k9</li>
<li>版本：v1.0</li>
<li>更新日期：暂无</li>
<li>关键词：暂无</li>
<li>许可协议：CC BY-ND 4.0</li>
</ul>
<hr>
<table>
<thead>
<tr>
<th align="left">#</th>
<th align="center">函数名</th>
<th align="center">简单介绍</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="center">table.nums</td>
<td align="center">计算表格包含的字段数量</td>
</tr>
<tr>
<td align="left">2</td>
<td align="center">table.keys</td>
<td align="center">返回指定表格中的所有键</td>
</tr>
<tr>
<td align="left">3</td>
<td align="center">table.values</td>
<td align="center">返回指定表格中的所有值</td>
</tr>
<tr>
<td align="left">4</td>
<td align="center">table.merge</td>
<td align="center">将来源表格中所有键及其值复制到目标表格对象中</td>
</tr>
<tr>
<td align="left">5</td>
<td align="center">table.indexof</td>
<td align="center">从表格中查找指定值，返回其索引</td>
</tr>
<tr>
<td align="left">6</td>
<td align="center">table.keyof</td>
<td align="center">从表格中查找指定值，返回其 key</td>
</tr>
<tr>
<td align="left">7</td>
<td align="center">table.removebyvalue</td>
<td align="center">从表格中删除指定值，返回删除的值的个数</td>
</tr>
<tr>
<td align="left">8</td>
<td align="center">table.map</td>
<td align="center">对表格中每一个值执行一次指定的函数，并用函数返回值更新表格内容</td>
</tr>
<tr>
<td align="left">9</td>
<td align="center">table.walk</td>
<td align="center">对表格中每一个值执行一次指定的函数，但不改变表格内容</td>
</tr>
<tr>
<td align="left">10</td>
<td align="center">table.filter</td>
<td align="center">对表格中每一个值执行一次指定的函数</td>
</tr>
<tr>
<td align="left">11</td>
<td align="center">table.unique</td>
<td align="center">遍历表格，确保其中的值唯一</td>
</tr>
</tbody></table>
<h2 id="二、详细介绍"><a href="#二、详细介绍" class="headerlink" title="二、详细介绍"></a>二、详细介绍</h2><h3 id="1-table-nums-t"><a href="#1-table-nums-t" class="headerlink" title="1.table.nums(t)"></a>1.table.nums(t)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 计算表格包含的字段数量</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] nums</span></span><br><span class="line"><span class="comment">-- @param table t 要检查的表格</span></span><br><span class="line"><span class="comment">-- @return integer#integer </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 计算表格包含的字段数量</span></span><br><span class="line"><span class="comment">-- Lua table 的 &quot;#&quot; 操作只对依次排序的数值下标数组有效，</span></span><br><span class="line"><span class="comment">-- table.nums() 则计算 table 中所有不为 nil 的值的个数。</span></span><br></pre></td></tr></table></figure>

<h3 id="2-table-keys-hashtable"><a href="#2-table-keys-hashtable" class="headerlink" title="2.table.keys(hashtable)"></a>2.table.keys(hashtable)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 返回指定表格中的所有键</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] keys</span></span><br><span class="line"><span class="comment">-- @param table hashtable 要检查的表格</span></span><br><span class="line"><span class="comment">-- @return table#table </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 返回指定表格中的所有键</span></span><br><span class="line"><span class="keyword">local</span> hashtable = &#123;a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">local</span> keys = <span class="built_in">table</span>.keys(hashtable)</span><br><span class="line"><span class="comment">-- keys = &#123;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-table-values-hashtable"><a href="#3-table-values-hashtable" class="headerlink" title="3.table.values(hashtable)"></a>3.table.values(hashtable)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 返回指定表格中的所有值</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] values</span></span><br><span class="line"><span class="comment">-- @param table hashtable 要检查的表格</span></span><br><span class="line"><span class="comment">-- @return table#table </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 返回指定表格中的所有值</span></span><br><span class="line"><span class="keyword">local</span> hashtable = &#123;a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">local</span> values = <span class="built_in">table</span>.values(hashtable)</span><br><span class="line"><span class="comment">-- values = &#123;1, 2, 3&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-table-merge-dest-src"><a href="#4-table-merge-dest-src" class="headerlink" title="4.table.merge(dest, src)"></a>4.table.merge(dest, src)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将来源表格中所有键及其值复制到目标表格对象中，如果存在同名键，则覆盖其值</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] merge</span></span><br><span class="line"><span class="comment">-- @param table dest 目标表格</span></span><br><span class="line"><span class="comment">-- @param table src 来源表格</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 将来源表格中所有键及其值复制到目标表格对象中，如果存在同名键，则覆盖其值</span></span><br><span class="line"><span class="keyword">local</span> dest = &#123;a = <span class="number">1</span>, b = <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">local</span> src  = &#123;c = <span class="number">3</span>, d = <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">table</span>.merge(dest, src)</span><br><span class="line"><span class="comment">-- dest = &#123;a = 1, b = 2, c = 3, d = 4&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-table-indexof-array-value-begin"><a href="#5-table-indexof-array-value-begin" class="headerlink" title="5.table.indexof(array, value, begin)"></a>5.table.indexof(array, value, begin)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 从表格中查找指定值，返回其索引，如果没找到返回 false</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] indexof</span></span><br><span class="line"><span class="comment">-- @param table array 表格</span></span><br><span class="line"><span class="comment">-- @param mixed value 要查找的值</span></span><br><span class="line"><span class="comment">-- @param integer begin 起始索引值</span></span><br><span class="line"><span class="comment">-- @return integer#integer </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 从表格中查找指定值，返回其索引，如果没找到返回 false</span></span><br><span class="line"><span class="keyword">local</span> array = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.indexof(array, <span class="string">&quot;b&quot;</span>)) <span class="comment">-- 输出 2</span></span><br></pre></td></tr></table></figure>

<h3 id="6-table-keyof-hashtable-value"><a href="#6-table-keyof-hashtable-value" class="headerlink" title="6.table.keyof(hashtable, value)"></a>6.table.keyof(hashtable, value)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 从表格中查找指定值，返回其 key，如果没找到返回 nil</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] keyof</span></span><br><span class="line"><span class="comment">-- @param table hashtable 表格</span></span><br><span class="line"><span class="comment">-- @param mixed value 要查找的值</span></span><br><span class="line"><span class="comment">-- @return string#string  该值对应的 key</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 从表格中查找指定值，返回其 key，如果没找到返回 nil</span></span><br><span class="line"><span class="keyword">local</span> hashtable = &#123;name = <span class="string">&quot;dualface&quot;</span>, comp = <span class="string">&quot;chukong&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.keyof(hashtable, <span class="string">&quot;chukong&quot;</span>)) <span class="comment">-- 输出 comp</span></span><br></pre></td></tr></table></figure>

<h3 id="7-table-removebyvalue-array-value-removeall"><a href="#7-table-removebyvalue-array-value-removeall" class="headerlink" title="7.table.removebyvalue(array, value, removeall)"></a>7.table.removebyvalue(array, value, removeall)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 从表格中删除指定值，返回删除的值的个数</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] removebyvalue</span></span><br><span class="line"><span class="comment">-- @param table array 表格</span></span><br><span class="line"><span class="comment">-- @param mixed value 要删除的值</span></span><br><span class="line"><span class="comment">-- @param boolean removeall 是否删除所有相同的值</span></span><br><span class="line"><span class="comment">-- @return integer#integer </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 从表格中删除指定值，返回删除的值的个数</span></span><br><span class="line"><span class="keyword">local</span> array = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.removebyvalue(array, <span class="string">&quot;c&quot;</span>, <span class="literal">true</span>)) <span class="comment">-- 输出 2</span></span><br></pre></td></tr></table></figure>

<h3 id="8-table-map-t-fn"><a href="#8-table-map-t-fn" class="headerlink" title="8.table.map(t, fn)"></a>8.table.map(t, fn)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 对表格中每一个值执行一次指定的函数，并用函数返回值更新表格内容</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] map</span></span><br><span class="line"><span class="comment">-- @param table t 表格</span></span><br><span class="line"><span class="comment">-- @param function fn 函数</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 对表格中每一个值执行一次指定的函数，并用函数返回值更新表格内容</span></span><br><span class="line"><span class="keyword">local</span> t = &#123;name = <span class="string">&quot;dualface&quot;</span>, comp = <span class="string">&quot;chukong&quot;</span>&#125;</span><br><span class="line"><span class="built_in">table</span>.map(t, <span class="function"><span class="keyword">function</span><span class="params">(v, k)</span></span></span><br><span class="line">    <span class="comment">-- 在每一个值前后添加括号</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;[&quot;</span> .. v .. <span class="string">&quot;]&quot;</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输出修改后的表格内容</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 输出</span></span><br><span class="line"><span class="comment">-- name [dualface]</span></span><br><span class="line"><span class="comment">-- comp [chukong]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- fn 参数指定的函数具有两个参数，并且返回一个值。原型如下：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map_function</span><span class="params">(value, key)</span></span></span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="9-table-walk-t-fn"><a href="#9-table-walk-t-fn" class="headerlink" title="9.table.walk(t, fn)"></a>9.table.walk(t, fn)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 对表格中每一个值执行一次指定的函数，但不改变表格内容</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] walk</span></span><br><span class="line"><span class="comment">-- @param table t 表格</span></span><br><span class="line"><span class="comment">-- @param function fn 函数</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 对表格中每一个值执行一次指定的函数，但不改变表格内容</span></span><br><span class="line"><span class="keyword">local</span> t = &#123;name = <span class="string">&quot;dualface&quot;</span>, comp = <span class="string">&quot;chukong&quot;</span>&#125;</span><br><span class="line"><span class="built_in">table</span>.walk(t, <span class="function"><span class="keyword">function</span><span class="params">(v, k)</span></span></span><br><span class="line">    <span class="comment">-- 输出每一个值</span></span><br><span class="line">    <span class="built_in">print</span>(v)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- fn 参数指定的函数具有两个参数，没有返回值。原型如下：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map_function</span><span class="params">(value, key)</span></span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="10-table-filter-t-fn"><a href="#10-table-filter-t-fn" class="headerlink" title="10.table.filter(t, fn)"></a>10.table.filter(t, fn)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 对表格中每一个值执行一次指定的函数，如果该函数返回 false，则对应的值会从表格中删除</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] filter</span></span><br><span class="line"><span class="comment">-- @param table t 表格</span></span><br><span class="line"><span class="comment">-- @param function fn 函数</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 对表格中每一个值执行一次指定的函数，如果该函数返回 false，则对应的值会从表格中删除</span></span><br><span class="line"><span class="keyword">local</span> t = &#123;name = <span class="string">&quot;dualface&quot;</span>, comp = <span class="string">&quot;chukong&quot;</span>&#125;</span><br><span class="line"><span class="built_in">table</span>.filter(t, <span class="function"><span class="keyword">function</span><span class="params">(v, k)</span></span></span><br><span class="line">    <span class="keyword">return</span> v ~= <span class="string">&quot;dualface&quot;</span> <span class="comment">-- 当值等于 dualface 时过滤掉该值</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="comment">-- 输出修改后的表格内容</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 输出</span></span><br><span class="line"><span class="comment">-- comp chukong</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- fn 参数指定的函数具有两个参数，并且返回一个 boolean 值。原型如下：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map_function</span><span class="params">(value, key)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="keyword">or</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="11-table-unique-array"><a href="#11-table-unique-array" class="headerlink" title="11.table.unique(array)"></a>11.table.unique(array)</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 遍历表格，确保其中的值唯一</span></span><br><span class="line"><span class="comment">-- @function [parent=#table] unique</span></span><br><span class="line"><span class="comment">-- @param table array 数组</span></span><br><span class="line"><span class="comment">-- @return table#table  包含所有唯一值的新表格</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 遍历表格，确保其中的值唯一</span></span><br><span class="line"><span class="keyword">local</span> t = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125; <span class="comment">-- 重复的 a 会被过滤掉</span></span><br><span class="line"><span class="keyword">local</span> n = <span class="built_in">table</span>.unique(t)</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(n) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 输出</span></span><br><span class="line"><span class="comment">-- a</span></span><br><span class="line"><span class="comment">-- b</span></span><br><span class="line"><span class="comment">-- c</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="三、下载"><a href="#三、下载" class="headerlink" title="三、下载"></a>三、下载</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0EyQzI5SzkvQTJDMjlLOS5naXRodWIuaW8vcmVsZWFzZXMvZG93bmxvYWQvbW9kdWxlL3RhYmxlX21vZHVsZS56aXA=">table-module.zip<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>Midido 一个更非人性化的手搓midi库</title>
    <url>/2022/08/05/Midido/</url>
    <content><![CDATA[<div class="note success"><p><strong>Midido</strong><br>简单实现用lua输出midi的库。</p>
</div>

<blockquote>
<p>使用《署名—非商业性使用—相同方式共享 4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权。<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">Midido To-do list</th>
<th align="center">描述</th>
<th align="center">状态</th>
</tr>
</thead>
<tbody><tr>
<td align="left">wiki</td>
<td align="center">用法wiki</td>
<td align="center">x</td>
</tr>
<tr>
<td align="left">Keyboards’ pack</td>
<td align="center">键位包</td>
<td align="center">敬请期待</td>
</tr>
<tr>
<td align="left">songs’ e.g.</td>
<td align="center">歌曲工程示例</td>
<td align="center">x</td>
</tr>
</tbody></table>
<h2 id="一、基本信息"><a href="#一、基本信息" class="headerlink" title="一、基本信息"></a>一、基本信息</h2><blockquote>
<ul>
<li>作者： 简律纯</li>
</ul>
</blockquote>
<ul>
<li>联系方式：qq:a2c29k9</li>
<li>版本：v1.0</li>
<li>更新日期：暂无</li>
<li>关键词：暂无</li>
<li>许可协议：CC BY-NC-SA 4.0</li>
</ul>
<h2 id="二、详细介绍"><a href="#二、详细介绍" class="headerlink" title="二、详细介绍"></a>二、详细介绍</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><blockquote>
<p>最初是一个设想，毕竟我是写音乐的，主要负责作曲编曲，鸽了快一年后很多粉丝不耐烦了，于是我开始整一些或许大学用得上的东西^比如一个bot ，高考那几天突发奇想，我或许可以教粉丝朋友一起写音乐？那就先从midi序列开始吧！<del>（也可以名正言顺咕咕咕，同时压榨劳动力）</del></p>
</blockquote>
<h3 id="2-一些教训"><a href="#2-一些教训" class="headerlink" title="2.一些教训"></a>2.一些教训</h3><blockquote>
<p>1.之前试过onebot ZBP插件里的timidity，也是手搓midi，但是仍然需要安装ffmpeg和timidity环境，且受到一定的系统环境影响——尽管成功写出了midi文件，但是对于其他那些使用非Windows系统（大家其实更愿意用Macbook）的人（主要是我的作曲家编曲家朋友）来说安装十分困难。<br>zbp关于midi的插件介绍：<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-07-30/1659158099-11773-5d706d6c091bc400.jpg"></p>
</blockquote>
<blockquote>
<p>2.于是我开始注意到简化使用指令的重要性，并在此机缘巧合下找到了 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYXV0b3BpYW5vLmNuLw==">AutoPiano<i class="fa fa-external-link-alt"></i></span>。<br>我并不在意它的关于编写输出音乐的任何逻辑或是别的什么，我找到了站长，并向他提出了几个问题——就比如，键盘谱是如何想出来的。<br>下图为孤勇者唱谱：<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-07-30/1659157938-716855-img20220730131141.jpg"></p>
</blockquote>
<blockquote>
<p>3.综上，这未尝不是一个很好的开端，至少我明白了手搓midi的原理，以及一些更切合实际的东西，就比如简化指令。</p>
</blockquote>
<h2 id="三、TO-DO-LIST"><a href="#三、TO-DO-LIST" class="headerlink" title="三、TO-DO LIST"></a>三、TO-DO LIST</h2><ul>
<li><p><input disabled="" type="checkbox">  编写用法wiki<br>用法非常复杂，这脚本就算是raw了，我需要讲清楚如何写出一段音阶（最简单的一段中音区 C D E F G A B midi片段）；如何写出一段chord（和弦），并在此和弦基础上继续写主旋律；如何变换调式调性（F# -&gt; Ab）；如何修改速度等等。</p>
</li>
<li><p><input disabled="" type="checkbox">  编写最基础的简化指令包，虽然目前写好的raw版本是功能最全的，但是其编写midi的方式（我目前主要靠写lua脚本再 <code>loadLua()</code> 或者使用basicFunction1.0（啊现在应该叫FuncLib2.0）内注释掉的 <code>load()()</code> 来写midi）过于硬核，所以需要一个诸如 <code>midi:0333-1 0333-2</code> 或是 <code>midi:E5 E5 E5 C5</code> 这样的简单易用指令。</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  一个音源键位包，或者一个键位函数包，用于简化脚本写midi时的打谱环节。</p>
</li>
</ul>
<h2 id="四、脚本输出实例试听"><a href="#四、脚本输出实例试听" class="headerlink" title="四、脚本输出实例试听"></a>四、脚本输出实例试听</h2><p>C大调音阶：<br>[upl-file uuid=e45d0254-ca7a-498c-b00d-069b2de5a74b size=257B]c-major-scale.zip[/upl-file]<br>Am和弦：<br>[upl-file uuid=d2589143-51ab-4ff7-aa9f-96734e60d4b3 size=321B]chord-example.zip[/upl-file]<br>时值变化：<br>[upl-file uuid=d9db9d92-396a-48c2-918c-2ecf3ef37e26 size=260B]duration-example.zip[/upl-file]</p>
<h2 id="五、最后"><a href="#五、最后" class="headerlink" title="五、最后"></a>五、最后</h2><blockquote>
<p>脚本将会在简化指令版写完发布，愿大家都能名正言顺的咕咕咕，也愿大家都热爱生活，热爱音乐！</p>
</blockquote>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
        <tag>FIXED</tag>
      </tags>
  </entry>
  <entry>
    <title>改写print</title>
    <url>/2022/08/05/print-fixed/</url>
    <content><![CDATA[<div class="note success"><p><strong>print fixed</strong><br>简单实现改写print，将print内容写入文件生成日志。</p>
</div>

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- Print 改写. @简律纯 @gexi</span></span><br><span class="line"><span class="comment">-------------------------------------------------------------------------------</span></span><br><span class="line">writeToFile = <span class="function"><span class="keyword">function</span> <span class="params">( str )</span></span></span><br><span class="line">    <span class="keyword">local</span> filename = <span class="string">&quot;print.log&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> fileLogOut <span class="keyword">then</span></span><br><span class="line">        fileLogOut = <span class="built_in">io</span>.<span class="built_in">open</span>(filename, <span class="string">&quot;w&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        fileLogOut = <span class="built_in">io</span>.<span class="built_in">open</span>(filename, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    fileLogOut:<span class="built_in">write</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H:%M:%S&quot;</span>,<span class="built_in">os</span>.<span class="built_in">time</span>())..<span class="string">&quot; &quot;</span>..str..<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    fileLogOut:<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">babe_tostring</span><span class="params">(...)</span></span></span><br><span class="line">    <span class="keyword">local</span> num = <span class="built_in">select</span>(<span class="string">&quot;#&quot;</span>, ...);</span><br><span class="line">    <span class="keyword">local</span> args = &#123; ... &#125;;</span><br><span class="line">    <span class="keyword">local</span> outs = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, num <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">            outs[#outs + <span class="number">1</span>] = <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        outs[#outs + <span class="number">1</span>] = <span class="built_in">tostring</span>(args[i]);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(outs);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> just_print = <span class="built_in">print</span>;</span><br><span class="line"><span class="keyword">local</span> babe_output = <span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">    just_print(...);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">local</span> str = babe_tostring(...);</span><br><span class="line">    <span class="keyword">if</span> writeToFile <span class="keyword">then</span> writeToFile(str) <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span> = babe_output</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>FIXED</tag>
      </tags>
  </entry>
  <entry>
    <title>yaml2table yaml转lua table</title>
    <url>/2022/08/04/yaml2table/</url>
    <content><![CDATA[<div class="note success"><p><strong>yaml2table</strong><br>简单实现读取yaml转为table,</p>
<blockquote>
<p>暂时不支持读取注释.</p>
</blockquote>
</div>


<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- tinyyaml - YAML subset parser</span></span><br><span class="line"><span class="comment">-------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">table</span> = <span class="built_in">table</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">string</span> = <span class="built_in">string</span></span><br><span class="line"><span class="keyword">local</span> schar = <span class="built_in">string</span>.<span class="built_in">char</span></span><br><span class="line"><span class="keyword">local</span> ssub, <span class="built_in">gsub</span> = <span class="built_in">string</span>.<span class="built_in">sub</span>, <span class="built_in">string</span>.<span class="built_in">gsub</span></span><br><span class="line"><span class="keyword">local</span> sfind, smatch = <span class="built_in">string</span>.<span class="built_in">find</span>, <span class="built_in">string</span>.<span class="built_in">match</span></span><br><span class="line"><span class="keyword">local</span> tinsert, tremove = <span class="built_in">table</span>.<span class="built_in">insert</span>, <span class="built_in">table</span>.<span class="built_in">remove</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">setmetatable</span> = <span class="built_in">setmetatable</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">pairs</span> = <span class="built_in">pairs</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">type</span> = <span class="built_in">type</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">tonumber</span> = <span class="built_in">tonumber</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">math</span> = <span class="built_in">math</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">getmetatable</span> = <span class="built_in">getmetatable</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">error</span> = <span class="built_in">error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> UNESCAPES = &#123;</span><br><span class="line">  [<span class="string">&#x27;0&#x27;</span>] = <span class="string">&quot;\x00&quot;</span>, z = <span class="string">&quot;\x00&quot;</span>, N    = <span class="string">&quot;\x85&quot;</span>,</span><br><span class="line">  a = <span class="string">&quot;\x07&quot;</span>,     b = <span class="string">&quot;\x08&quot;</span>, t    = <span class="string">&quot;\x09&quot;</span>,</span><br><span class="line">  n = <span class="string">&quot;\x0a&quot;</span>,     v = <span class="string">&quot;\x0b&quot;</span>, f    = <span class="string">&quot;\x0c&quot;</span>,</span><br><span class="line">  r = <span class="string">&quot;\x0d&quot;</span>,     e = <span class="string">&quot;\x1b&quot;</span>, [<span class="string">&#x27;\\&#x27;</span>] = <span class="string">&#x27;\\&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- utils</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">select</span><span class="params">(list, pred)</span></span></span><br><span class="line">  <span class="keyword">local</span> selected = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> i = <span class="number">0</span>, #list <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> v = list[i]</span><br><span class="line">    <span class="keyword">if</span> v <span class="keyword">and</span> pred(v, i) <span class="keyword">then</span></span><br><span class="line">      tinsert(selected, v)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> selected</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">startswith</span><span class="params">(haystack, needle)</span></span></span><br><span class="line">  <span class="keyword">return</span> ssub(haystack, <span class="number">1</span>, #needle) == needle</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">ltrim</span><span class="params">(str)</span></span></span><br><span class="line">  <span class="keyword">return</span> smatch(str, <span class="string">&quot;^%s*(.-)$&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">rtrim</span><span class="params">(str)</span></span></span><br><span class="line">  <span class="keyword">return</span> smatch(str, <span class="string">&quot;^(.-)%s*$&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- Implementation.</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="keyword">local</span> class = &#123;__meta=&#123;&#125;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">class.__meta.__call</span><span class="params">(cls, ...)</span></span></span><br><span class="line">  <span class="keyword">local</span> <span class="built_in">self</span> = <span class="built_in">setmetatable</span>(&#123;&#125;, cls)</span><br><span class="line">  <span class="keyword">if</span> cls.__init <span class="keyword">then</span></span><br><span class="line">    cls.__init(<span class="built_in">self</span>, ...)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">self</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">class.def</span><span class="params">(base, typ, cls)</span></span></span><br><span class="line">  base = base <span class="keyword">or</span> class</span><br><span class="line">  <span class="keyword">local</span> mt = &#123;<span class="built_in">__metatable</span>=base, <span class="built_in">__index</span>=base&#125;</span><br><span class="line">  <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(base.__meta) <span class="keyword">do</span> mt[k] = v <span class="keyword">end</span></span><br><span class="line">  cls = <span class="built_in">setmetatable</span>(cls <span class="keyword">or</span> &#123;&#125;, mt)</span><br><span class="line">  cls.<span class="built_in">__index</span> = cls</span><br><span class="line">  cls.<span class="built_in">__metatable</span> = cls</span><br><span class="line">  cls.__type = typ</span><br><span class="line">  cls.__meta = mt</span><br><span class="line">  <span class="keyword">return</span> cls</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> types = &#123;</span><br><span class="line">  null = class:def(<span class="string">&#x27;null&#x27;</span>),</span><br><span class="line">  map = class:def(<span class="string">&#x27;map&#x27;</span>),</span><br><span class="line">  omap = class:def(<span class="string">&#x27;omap&#x27;</span>),</span><br><span class="line">  <span class="built_in">pairs</span> = class:def(<span class="string">&#x27;pairs&#x27;</span>),</span><br><span class="line">  set = class:def(<span class="string">&#x27;set&#x27;</span>),</span><br><span class="line">  seq = class:def(<span class="string">&#x27;seq&#x27;</span>),</span><br><span class="line">  timestamp = class:def(<span class="string">&#x27;timestamp&#x27;</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> Null = types.null</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Null.__tostring</span><span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#x27;yaml.null&#x27;</span> <span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Null.isnull</span><span class="params">(v)</span></span></span><br><span class="line">  <span class="keyword">if</span> v == <span class="literal">nil</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">type</span>(v) == <span class="string">&#x27;table&#x27;</span> <span class="keyword">and</span> <span class="built_in">getmetatable</span>(v) == Null <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> null = Null()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">types.timestamp:__init</span><span class="params">(y, m, d, h, i, s, f, z)</span></span></span><br><span class="line">  <span class="built_in">self</span>.year = <span class="built_in">tonumber</span>(y)</span><br><span class="line">  <span class="built_in">self</span>.month = <span class="built_in">tonumber</span>(m)</span><br><span class="line">  <span class="built_in">self</span>.day = <span class="built_in">tonumber</span>(d)</span><br><span class="line">  <span class="built_in">self</span>.hour = <span class="built_in">tonumber</span>(h <span class="keyword">or</span> <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">self</span>.minute = <span class="built_in">tonumber</span>(i <span class="keyword">or</span> <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">self</span>.second = <span class="built_in">tonumber</span>(s <span class="keyword">or</span> <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">type</span>(f) == <span class="string">&#x27;string&#x27;</span> <span class="keyword">and</span> sfind(f, <span class="string">&#x27;^%d+$&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">self</span>.fraction = <span class="built_in">tonumber</span>(f) * <span class="built_in">math</span>.<span class="built_in">pow</span>(<span class="number">10</span>, <span class="number">3</span> - #f)</span><br><span class="line">  <span class="keyword">elseif</span> f <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">self</span>.fraction = f</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">self</span>.fraction = <span class="number">0</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="built_in">self</span>.timezone = z</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">types.timestamp:__tostring</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(</span><br><span class="line">    <span class="string">&#x27;%04d-%02d-%02dT%02d:%02d:%02d.%03d%s&#x27;</span>,</span><br><span class="line">    <span class="built_in">self</span>.year, <span class="built_in">self</span>.month, <span class="built_in">self</span>.day,</span><br><span class="line">    <span class="built_in">self</span>.hour, <span class="built_in">self</span>.minute, <span class="built_in">self</span>.second, <span class="built_in">self</span>.fraction,</span><br><span class="line">    <span class="built_in">self</span>:gettz())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">types.timestamp:gettz</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">self</span>.timezone <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">self</span>.timezone == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Z&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> sign = <span class="built_in">self</span>.timezone &gt; <span class="number">0</span></span><br><span class="line">  <span class="keyword">local</span> z = sign <span class="keyword">and</span> <span class="built_in">self</span>.timezone <span class="keyword">or</span> -<span class="built_in">self</span>.timezone</span><br><span class="line">  <span class="keyword">local</span> zh = <span class="built_in">math</span>.<span class="built_in">floor</span>(z)</span><br><span class="line">  <span class="keyword">local</span> zi = (z - zh) * <span class="number">60</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(</span><br><span class="line">    <span class="string">&#x27;%s%02d:%02d&#x27;</span>, sign <span class="keyword">and</span> <span class="string">&#x27;+&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;-&#x27;</span>, zh, zi)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">countindent</span><span class="params">(line)</span></span></span><br><span class="line">  <span class="keyword">local</span> _, j = sfind(line, <span class="string">&#x27;^%s+&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> j <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>, line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> j, ssub(line, j+<span class="number">1</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parsestring</span><span class="params">(line, stopper)</span></span></span><br><span class="line">  stopper = stopper <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">local</span> q = ssub(line, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">if</span> q == <span class="string">&#x27; &#x27;</span> <span class="keyword">or</span> q == <span class="string">&#x27;\t&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> parsestring(ssub(line, <span class="number">2</span>))</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> q == <span class="string">&quot;&#x27;&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> i = sfind(line, <span class="string">&quot;&#x27;&quot;</span>, <span class="number">2</span>, <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span>, line</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> ssub(line, <span class="number">2</span>, i<span class="number">-1</span>), ssub(line, i+<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> q == <span class="string">&#x27;&quot;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> i, buf = <span class="number">2</span>, <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; #line <span class="keyword">do</span></span><br><span class="line">      <span class="keyword">local</span> c = ssub(line, i, i)</span><br><span class="line">      <span class="keyword">if</span> c == <span class="string">&#x27;\\&#x27;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> n = ssub(line, i+<span class="number">1</span>, i+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> UNESCAPES[n] ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">          buf = buf..UNESCAPES[n]</span><br><span class="line">        <span class="keyword">elseif</span> n == <span class="string">&#x27;x&#x27;</span> <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">local</span> h = ssub(i+<span class="number">2</span>,i+<span class="number">3</span>)</span><br><span class="line">          <span class="keyword">if</span> sfind(h, <span class="string">&#x27;^[0-9a-fA-F]$&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">            buf = buf..schar(<span class="built_in">tonumber</span>(h, <span class="number">16</span>))</span><br><span class="line">            i = i + <span class="number">2</span></span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">            buf = buf..<span class="string">&#x27;x&#x27;</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          buf = buf..n</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">      <span class="keyword">elseif</span> c == q <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        buf = buf..c</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> buf, ssub(line, i+<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> q == <span class="string">&#x27;&#123;&#x27;</span> <span class="keyword">or</span> q == <span class="string">&#x27;[&#x27;</span> <span class="keyword">then</span>  <span class="comment">-- flow style</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> q == <span class="string">&#x27;|&#x27;</span> <span class="keyword">or</span> q == <span class="string">&#x27;&gt;&#x27;</span> <span class="keyword">then</span>  <span class="comment">-- block</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> q == <span class="string">&#x27;-&#x27;</span> <span class="keyword">or</span> q == <span class="string">&#x27;:&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> ssub(line, <span class="number">2</span>, <span class="number">2</span>) == <span class="string">&#x27; &#x27;</span> <span class="keyword">or</span> #line == <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span>, line</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> buf = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">while</span> #line &gt; <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> c = ssub(line, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> sfind(stopper, c, <span class="number">1</span>, <span class="literal">true</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27;:&#x27;</span> <span class="keyword">and</span> (ssub(line, <span class="number">2</span>, <span class="number">2</span>) == <span class="string">&#x27; &#x27;</span> <span class="keyword">or</span> #line == <span class="number">1</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27;#&#x27;</span> <span class="keyword">and</span> (ssub(buf, #buf, #buf) == <span class="string">&#x27; &#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      buf = buf..c</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    line = ssub(line, <span class="number">2</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> rtrim(buf), line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">isemptyline</span><span class="params">(line)</span></span></span><br><span class="line">  <span class="keyword">return</span> line == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> sfind(line, <span class="string">&#x27;^%s*$&#x27;</span>) <span class="keyword">or</span> sfind(line, <span class="string">&#x27;^%s*#&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">equalsline</span><span class="params">(line, needle)</span></span></span><br><span class="line">  <span class="keyword">return</span> startswith(line, needle) <span class="keyword">and</span> isemptyline(ssub(line, #needle+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">checkdupekey</span><span class="params">(map, key)</span></span></span><br><span class="line">  <span class="keyword">if</span> map[key] ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">-- print(&quot;found a duplicate key &#x27;&quot;..key..&quot;&#x27; in line: &quot;..line)</span></span><br><span class="line">    <span class="keyword">local</span> suffix = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> map[key..<span class="string">&#x27;_&#x27;</span>..suffix] <span class="keyword">do</span></span><br><span class="line">      suffix = suffix + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    key = key ..<span class="string">&#x27;_&#x27;</span>..suffix</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> key</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parseflowstyle</span><span class="params">(line, lines)</span></span></span><br><span class="line">  <span class="keyword">local</span> stack = &#123;&#125;</span><br><span class="line">  <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> #line == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> #<span class="built_in">lines</span> == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        line = tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> c = ssub(line, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> c == <span class="string">&#x27;#&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      line = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27; &#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;\t&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;\r&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;\n&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      line = ssub(line, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27;&#123;&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;[&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      tinsert(stack, &#123;v=&#123;&#125;,t=c&#125;)</span><br><span class="line">      line = ssub(line, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27;:&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> s = tremove(stack)</span><br><span class="line">      tinsert(stack, &#123;v=s.v, t=<span class="string">&#x27;:&#x27;</span>&#125;)</span><br><span class="line">      line = ssub(line, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27;,&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> value = tremove(stack)</span><br><span class="line">      <span class="keyword">if</span> value.t == <span class="string">&#x27;:&#x27;</span> <span class="keyword">or</span> value.t == <span class="string">&#x27;&#123;&#x27;</span> <span class="keyword">or</span> value.t == <span class="string">&#x27;[&#x27;</span> <span class="keyword">then</span> <span class="built_in">error</span>() <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> stack[#stack].t == <span class="string">&#x27;:&#x27;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- map</span></span><br><span class="line">        <span class="keyword">local</span> key = tremove(stack)</span><br><span class="line">        key.v = checkdupekey(stack[#stack].v, key.v)</span><br><span class="line">        stack[#stack].v[key.v] = value.v</span><br><span class="line">      <span class="keyword">elseif</span> stack[#stack].t == <span class="string">&#x27;&#123;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- set</span></span><br><span class="line">        stack[#stack].v[value.v] = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">elseif</span> stack[#stack].t == <span class="string">&#x27;[&#x27;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- seq</span></span><br><span class="line">        tinsert(stack[#stack].v, value.v)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      line = ssub(line, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27;&#125;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> stack[#stack].t == <span class="string">&#x27;&#123;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> #stack == <span class="number">1</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        stack[#stack].t = <span class="string">&#x27;&#125;&#x27;</span></span><br><span class="line">        line = ssub(line, <span class="number">2</span>)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        line = <span class="string">&#x27;,&#x27;</span>..line</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> c == <span class="string">&#x27;]&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> stack[#stack].t == <span class="string">&#x27;[&#x27;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> #stack == <span class="number">1</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        stack[#stack].t = <span class="string">&#x27;]&#x27;</span></span><br><span class="line">        line = ssub(line, <span class="number">2</span>)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        line = <span class="string">&#x27;,&#x27;</span>..line</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">local</span> s, rest = parsestring(line, <span class="string">&#x27;,&#123;&#125;[]&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">error</span>(<span class="string">&#x27;invalid flowstyle line: &#x27;</span>..line)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      tinsert(stack, &#123;v=s, t=<span class="string">&#x27;s&#x27;</span>&#125;)</span><br><span class="line">      line = rest</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> stack[<span class="number">1</span>].v, line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parseblockstylestring</span><span class="params">(line, lines, indent)</span></span></span><br><span class="line">  <span class="keyword">if</span> #<span class="built_in">lines</span> == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&quot;failed to find multi-line scalar content&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> s = &#123;&#125;</span><br><span class="line">  <span class="keyword">local</span> firstindent = <span class="number">-1</span></span><br><span class="line">  <span class="keyword">local</span> endline = <span class="number">-1</span></span><br><span class="line">  <span class="keyword">for</span> i = <span class="number">1</span>, #<span class="built_in">lines</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> ln = <span class="built_in">lines</span>[i]</span><br><span class="line">    <span class="keyword">local</span> idt = countindent(ln)</span><br><span class="line">    <span class="keyword">if</span> idt &lt;= indent <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> ln == <span class="string">&#x27;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      tinsert(s, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">if</span> firstindent == <span class="number">-1</span> <span class="keyword">then</span></span><br><span class="line">        firstindent = idt</span><br><span class="line">      <span class="keyword">elseif</span> idt &lt; firstindent <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      tinsert(s, ssub(ln, firstindent + <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    endline = i</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> striptrailing = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">local</span> sep = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">  <span class="keyword">local</span> newlineatend = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">if</span> line == <span class="string">&#x27;|&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    striptrailing = <span class="literal">true</span></span><br><span class="line">    sep = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    newlineatend = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">elseif</span> line == <span class="string">&#x27;|+&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    striptrailing = <span class="literal">false</span></span><br><span class="line">    sep = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    newlineatend = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">elseif</span> line == <span class="string">&#x27;|-&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    striptrailing = <span class="literal">true</span></span><br><span class="line">    sep = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    newlineatend = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">elseif</span> line == <span class="string">&#x27;&gt;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    striptrailing = <span class="literal">true</span></span><br><span class="line">    sep = <span class="string">&#x27; &#x27;</span></span><br><span class="line">    newlineatend = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">elseif</span> line == <span class="string">&#x27;&gt;+&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    striptrailing = <span class="literal">false</span></span><br><span class="line">    sep = <span class="string">&#x27; &#x27;</span></span><br><span class="line">    newlineatend = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">elseif</span> line == <span class="string">&#x27;&gt;-&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    striptrailing = <span class="literal">true</span></span><br><span class="line">    sep = <span class="string">&#x27; &#x27;</span></span><br><span class="line">    newlineatend = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&#x27;invalid blockstyle string:&#x27;</span>..line)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> eonl = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> i = #s, <span class="number">1</span>, <span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> s[i] == <span class="string">&#x27;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      tremove(s, i)</span><br><span class="line">      eonl = eonl + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> striptrailing <span class="keyword">then</span></span><br><span class="line">    eonl = <span class="number">0</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> newlineatend <span class="keyword">then</span></span><br><span class="line">    eonl = eonl + <span class="number">1</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">for</span> i = endline, <span class="number">1</span>, <span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">    tremove(<span class="built_in">lines</span>, i)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(s, sep)..<span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&#x27;\n&#x27;</span>, eonl)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parsetimestamp</span><span class="params">(line)</span></span></span><br><span class="line">  <span class="keyword">local</span> _, p1, y, m, d = sfind(line, <span class="string">&#x27;^(%d%d%d%d)%-(%d%d)%-(%d%d)&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> p1 <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> p1 == #line <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> types.timestamp(y, m, d), <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> _, p2, h, i, s = sfind(line, <span class="string">&#x27;^[Tt ](%d+):(%d+):(%d+)&#x27;</span>, p1+<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> p2 <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> types.timestamp(y, m, d), ssub(line, p1+<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> p2 == #line <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> types.timestamp(y, m, d, h, i, s), <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> _, p3, f = sfind(line, <span class="string">&#x27;^%.(%d+)&#x27;</span>, p2+<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> p3 <span class="keyword">then</span></span><br><span class="line">    p3 = p2</span><br><span class="line">    f = <span class="number">0</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> zc = ssub(line, p3+<span class="number">1</span>, p3+<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">local</span> _, p4, zs, z = sfind(line, <span class="string">&#x27;^ ?([%+%-])(%d+)&#x27;</span>, p3+<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">if</span> p4 <span class="keyword">then</span></span><br><span class="line">    z = <span class="built_in">tonumber</span>(z)</span><br><span class="line">    <span class="keyword">local</span> _, p5, zi = sfind(line, <span class="string">&#x27;^:(%d+)&#x27;</span>, p4+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> p5 <span class="keyword">then</span></span><br><span class="line">      z = z + <span class="built_in">tonumber</span>(zi) / <span class="number">60</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    z = zs == <span class="string">&#x27;-&#x27;</span> <span class="keyword">and</span> -<span class="built_in">tonumber</span>(z) <span class="keyword">or</span> <span class="built_in">tonumber</span>(z)</span><br><span class="line">  <span class="keyword">elseif</span> zc == <span class="string">&#x27;Z&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    p4 = p3 + <span class="number">1</span></span><br><span class="line">    z = <span class="number">0</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    p4 = p3</span><br><span class="line">    z = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> types.timestamp(y, m, d, h, i, s, f, z), ssub(line, p4+<span class="number">1</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parsescalar</span><span class="params">(line, lines, indent)</span></span></span><br><span class="line">  line = ltrim(line)</span><br><span class="line">  line = <span class="built_in">gsub</span>(line, <span class="string">&#x27;^%s*#.*$&#x27;</span>, <span class="string">&#x27;&#x27;</span>)  <span class="comment">-- comment only -&gt; &#x27;&#x27;</span></span><br><span class="line">  line = <span class="built_in">gsub</span>(line, <span class="string">&#x27;^%s*&#x27;</span>, <span class="string">&#x27;&#x27;</span>)  <span class="comment">-- trim head spaces</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> line == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> line == <span class="string">&#x27;~&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> null</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> ts, _ = parsetimestamp(line)</span><br><span class="line">  <span class="keyword">if</span> ts <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> ts</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> s, _ = parsestring(line)</span><br><span class="line">  <span class="comment">-- startswith quote ... string</span></span><br><span class="line">  <span class="comment">-- not startswith quote ... maybe string</span></span><br><span class="line">  <span class="keyword">if</span> s <span class="keyword">and</span> (startswith(line, <span class="string">&#x27;&quot;&#x27;</span>) <span class="keyword">or</span> startswith(line, <span class="string">&quot;&#x27;&quot;</span>)) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> startswith(<span class="string">&#x27;!&#x27;</span>, line) <span class="keyword">then</span>  <span class="comment">-- unexpected tagchar</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&#x27;unsupported line: &#x27;</span>..line)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> equalsline(line, <span class="string">&#x27;&#123;&#125;&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> equalsline(line, <span class="string">&#x27;[]&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> startswith(line, <span class="string">&#x27;&#123;&#x27;</span>) <span class="keyword">or</span> startswith(line, <span class="string">&#x27;[&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> parseflowstyle(line, <span class="built_in">lines</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> startswith(line, <span class="string">&#x27;|&#x27;</span>) <span class="keyword">or</span> startswith(line, <span class="string">&#x27;&gt;&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> parseblockstylestring(line, <span class="built_in">lines</span>, indent)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">-- Regular unquoted string</span></span><br><span class="line">  line = <span class="built_in">gsub</span>(line, <span class="string">&#x27;%s*#.*$&#x27;</span>, <span class="string">&#x27;&#x27;</span>)  <span class="comment">-- trim tail comment</span></span><br><span class="line">  <span class="keyword">local</span> v = line</span><br><span class="line">  <span class="keyword">if</span> v == <span class="string">&#x27;null&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;Null&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;NULL&#x27;</span><span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> null</span><br><span class="line">  <span class="keyword">elseif</span> v == <span class="string">&#x27;true&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;True&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;TRUE&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">elseif</span> v == <span class="string">&#x27;false&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;False&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;FALSE&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">elseif</span> v == <span class="string">&#x27;.inf&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;.Inf&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;.INF&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">huge</span></span><br><span class="line">  <span class="keyword">elseif</span> v == <span class="string">&#x27;+.inf&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;+.Inf&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;+.INF&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">huge</span></span><br><span class="line">  <span class="keyword">elseif</span> v == <span class="string">&#x27;-.inf&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;-.Inf&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;-.INF&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> -<span class="built_in">math</span>.<span class="built_in">huge</span></span><br><span class="line">  <span class="keyword">elseif</span> v == <span class="string">&#x27;.nan&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;.NaN&#x27;</span> <span class="keyword">or</span> v == <span class="string">&#x27;.NAN&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> / <span class="number">0</span></span><br><span class="line">  <span class="keyword">elseif</span> sfind(v, <span class="string">&#x27;^[%+%-]?[0-9]+$&#x27;</span>) <span class="keyword">or</span> sfind(v, <span class="string">&#x27;^[%+%-]?[0-9]+%.$&#x27;</span>)<span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">tonumber</span>(v)  <span class="comment">-- : int</span></span><br><span class="line">  <span class="keyword">elseif</span> sfind(v, <span class="string">&#x27;^[%+%-]?[0-9]+%.[0-9]+$&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">tonumber</span>(v)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> s <span class="keyword">or</span> v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> parsemap;  <span class="comment">-- : func</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parseseq</span><span class="params">(line, lines, indent)</span></span></span><br><span class="line">  <span class="keyword">local</span> seq = <span class="built_in">setmetatable</span>(&#123;&#125;, types.seq)</span><br><span class="line">  <span class="keyword">if</span> line ~= <span class="string">&#x27;&#x27;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">error</span>()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">    <span class="comment">-- Check for a new document</span></span><br><span class="line">    line = <span class="built_in">lines</span>[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> startswith(line, <span class="string">&#x27;---&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> startswith(<span class="built_in">lines</span>, <span class="string">&#x27;---&#x27;</span>) <span class="keyword">do</span></span><br><span class="line">        tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> seq</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- Check the indent level</span></span><br><span class="line">    <span class="keyword">local</span> level = countindent(line)</span><br><span class="line">    <span class="keyword">if</span> level &lt; indent <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> seq</span><br><span class="line">    <span class="keyword">elseif</span> level &gt; indent <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">error</span>(<span class="string">&quot;found bad indenting in line: &quot;</span>.. line)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> i, j = sfind(line, <span class="string">&#x27;%-%s+&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">then</span></span><br><span class="line">      i, j = sfind(line, <span class="string">&#x27;%-$&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> seq</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> rest = ssub(line, j+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> sfind(rest, <span class="string">&#x27;^[^\&#x27;\&quot;%s]*:&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- Inline nested hash</span></span><br><span class="line">      <span class="keyword">local</span> indent2 = j</span><br><span class="line">      <span class="built_in">lines</span>[<span class="number">1</span>] = <span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&#x27; &#x27;</span>, indent2)..rest</span><br><span class="line">      tinsert(seq, parsemap(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2))</span><br><span class="line">    <span class="keyword">elseif</span> sfind(rest, <span class="string">&#x27;^%-%s+&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- Inline nested seq</span></span><br><span class="line">      <span class="keyword">local</span> indent2 = j</span><br><span class="line">      <span class="built_in">lines</span>[<span class="number">1</span>] = <span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&#x27; &#x27;</span>, indent2)..rest</span><br><span class="line">      tinsert(seq, parseseq(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2))</span><br><span class="line">    <span class="keyword">elseif</span> isemptyline(rest) <span class="keyword">then</span></span><br><span class="line">      tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span> #<span class="built_in">lines</span> == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        tinsert(seq, null)</span><br><span class="line">        <span class="keyword">return</span> seq</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> sfind(<span class="built_in">lines</span>[<span class="number">1</span>], <span class="string">&#x27;^%s*%-&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> nextline = <span class="built_in">lines</span>[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">local</span> indent2 = countindent(nextline)</span><br><span class="line">        <span class="keyword">if</span> indent2 == indent <span class="keyword">then</span></span><br><span class="line">          <span class="comment">-- Null seqay entry</span></span><br><span class="line">          tinsert(seq, null)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          tinsert(seq, parseseq(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="comment">-- - # comment</span></span><br><span class="line">        <span class="comment">--   key: value</span></span><br><span class="line">        <span class="keyword">local</span> nextline = <span class="built_in">lines</span>[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">local</span> indent2 = countindent(nextline)</span><br><span class="line">        tinsert(seq, parsemap(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> rest <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- Array entry with a value</span></span><br><span class="line">      tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      tinsert(seq, parsescalar(rest, <span class="built_in">lines</span>))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> seq</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parseset</span><span class="params">(line, lines, indent)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> isemptyline(line) <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&#x27;not seq line: &#x27;</span>..line)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> set = <span class="built_in">setmetatable</span>(&#123;&#125;, types.set)</span><br><span class="line">  <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">    <span class="comment">-- Check for a new document</span></span><br><span class="line">    line = <span class="built_in">lines</span>[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> startswith(line, <span class="string">&#x27;---&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> startswith(<span class="built_in">lines</span>, <span class="string">&#x27;---&#x27;</span>) <span class="keyword">do</span></span><br><span class="line">        tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> set</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- Check the indent level</span></span><br><span class="line">    <span class="keyword">local</span> level = countindent(line)</span><br><span class="line">    <span class="keyword">if</span> level &lt; indent <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> set</span><br><span class="line">    <span class="keyword">elseif</span> level &gt; indent <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">error</span>(<span class="string">&quot;found bad indenting in line: &quot;</span>.. line)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> i, j = sfind(line, <span class="string">&#x27;%?%s+&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">then</span></span><br><span class="line">      i, j = sfind(line, <span class="string">&#x27;%?$&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> set</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> rest = ssub(line, j+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> sfind(rest, <span class="string">&#x27;^[^\&#x27;\&quot;%s]*:&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- Inline nested hash</span></span><br><span class="line">      <span class="keyword">local</span> indent2 = j</span><br><span class="line">      <span class="built_in">lines</span>[<span class="number">1</span>] = <span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&#x27; &#x27;</span>, indent2)..rest</span><br><span class="line">      set[parsemap(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2)] = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">elseif</span> sfind(rest, <span class="string">&#x27;^%s+$&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span> #<span class="built_in">lines</span> == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        tinsert(set, null)</span><br><span class="line">        <span class="keyword">return</span> set</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> sfind(<span class="built_in">lines</span>[<span class="number">1</span>], <span class="string">&#x27;^%s*%?&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> indent2 = countindent(<span class="built_in">lines</span>[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">if</span> indent2 == indent <span class="keyword">then</span></span><br><span class="line">          <span class="comment">-- Null array entry</span></span><br><span class="line">          set[null] = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          set[parseseq(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2)] = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">elseif</span> rest <span class="keyword">then</span></span><br><span class="line">      tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      set[parsescalar(rest, <span class="built_in">lines</span>)] = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">error</span>(<span class="string">&quot;failed to classify line: &quot;</span>..line)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> set</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parsemap</span><span class="params">(line, lines, indent)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> isemptyline(line) <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&#x27;not map line: &#x27;</span>..line)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> map = <span class="built_in">setmetatable</span>(&#123;&#125;, types.map)</span><br><span class="line">  <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">    <span class="comment">-- Check for a new document</span></span><br><span class="line">    line = <span class="built_in">lines</span>[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> startswith(line, <span class="string">&#x27;---&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> startswith(<span class="built_in">lines</span>, <span class="string">&#x27;---&#x27;</span>) <span class="keyword">do</span></span><br><span class="line">        tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> map</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- Check the indent level</span></span><br><span class="line">    <span class="keyword">local</span> level, _ = countindent(line)</span><br><span class="line">    <span class="keyword">if</span> level &lt; indent <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> map</span><br><span class="line">    <span class="keyword">elseif</span> level &gt; indent <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">error</span>(<span class="string">&quot;found bad indenting in line: &quot;</span>.. line)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- Find the key</span></span><br><span class="line">    <span class="keyword">local</span> key</span><br><span class="line">    <span class="keyword">local</span> s, rest = parsestring(line)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- Quoted keys</span></span><br><span class="line">    <span class="keyword">if</span> s <span class="keyword">and</span> startswith(rest, <span class="string">&#x27;:&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> sc = parsescalar(s, &#123;&#125;, <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">if</span> sc <span class="keyword">and</span> <span class="built_in">type</span>(sc) ~= <span class="string">&#x27;string&#x27;</span> <span class="keyword">then</span></span><br><span class="line">        key = sc</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        key = s</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      line = ssub(rest, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">error</span>(<span class="string">&quot;failed to classify line: &quot;</span>..line)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    key = checkdupekey(map, key)</span><br><span class="line">    line = ltrim(line)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ssub(line, <span class="number">1</span>, <span class="number">1</span>) == <span class="string">&#x27;!&#x27;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- ignore type</span></span><br><span class="line">      <span class="keyword">local</span> rh = ltrim(ssub(line, <span class="number">3</span>))</span><br><span class="line">      <span class="keyword">local</span> typename = smatch(rh, <span class="string">&#x27;^!?[^%s]+&#x27;</span>)</span><br><span class="line">      line = ltrim(ssub(rh, #typename+<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isemptyline(line) <span class="keyword">then</span></span><br><span class="line">      tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      line = ltrim(line)</span><br><span class="line">      map[key] = parsescalar(line, <span class="built_in">lines</span>, indent)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="comment">-- An indent</span></span><br><span class="line">      tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span> #<span class="built_in">lines</span> == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        map[key] = null</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> sfind(<span class="built_in">lines</span>[<span class="number">1</span>], <span class="string">&#x27;^%s*%-&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> indent2 = countindent(<span class="built_in">lines</span>[<span class="number">1</span>])</span><br><span class="line">        map[key] = parseseq(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2)</span><br><span class="line">      <span class="keyword">elseif</span> sfind(<span class="built_in">lines</span>[<span class="number">1</span>], <span class="string">&#x27;^%s*%?&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> indent2 = countindent(<span class="built_in">lines</span>[<span class="number">1</span>])</span><br><span class="line">        map[key] = parseset(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">local</span> indent2 = countindent(<span class="built_in">lines</span>[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">if</span> indent &gt;= indent2 <span class="keyword">then</span></span><br><span class="line">          <span class="comment">-- Null hash entry</span></span><br><span class="line">          map[key] = null</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          map[key] = parsemap(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, indent2)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> map</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- : (list&lt;str&gt;)-&gt;dict</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parsedocuments</span><span class="params">(lines)</span></span></span><br><span class="line">  <span class="built_in">lines</span> = <span class="built_in">select</span>(<span class="built_in">lines</span>, <span class="function"><span class="keyword">function</span><span class="params">(s)</span></span> <span class="keyword">return</span> <span class="keyword">not</span> isemptyline(s) <span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> sfind(<span class="built_in">lines</span>[<span class="number">1</span>], <span class="string">&#x27;^%%YAML&#x27;</span>) <span class="keyword">then</span> tremove(<span class="built_in">lines</span>, <span class="number">1</span>) <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> root = &#123;&#125;</span><br><span class="line">  <span class="keyword">local</span> in_document = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> line = <span class="built_in">lines</span>[<span class="number">1</span>]</span><br><span class="line">    <span class="comment">-- Do we have a document header?</span></span><br><span class="line">    <span class="keyword">local</span> docright;</span><br><span class="line">    <span class="keyword">if</span> sfind(line, <span class="string">&#x27;^%-%-%-&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- Handle scalar documents</span></span><br><span class="line">      docright = ssub(line, <span class="number">4</span>)</span><br><span class="line">      tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      in_document = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> docright <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">not</span> sfind(docright, <span class="string">&#x27;^%s+$&#x27;</span>) <span class="keyword">and</span></span><br><span class="line">          <span class="keyword">not</span> sfind(docright, <span class="string">&#x27;^%s+#&#x27;</span>)) <span class="keyword">then</span></span><br><span class="line">        tinsert(root, parsescalar(docright, <span class="built_in">lines</span>))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> #<span class="built_in">lines</span> == <span class="number">0</span> <span class="keyword">or</span> startswith(line, <span class="string">&#x27;---&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- A naked document</span></span><br><span class="line">      tinsert(root, null)</span><br><span class="line">      <span class="keyword">while</span> #<span class="built_in">lines</span> &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> sfind(<span class="built_in">lines</span>[<span class="number">1</span>], <span class="string">&#x27;---&#x27;</span>) <span class="keyword">do</span></span><br><span class="line">        tremove(<span class="built_in">lines</span>, <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      in_document = <span class="literal">false</span></span><br><span class="line">    <span class="comment">-- XXX The final &#x27;-+$&#x27; is to look for -- which ends up being an</span></span><br><span class="line">    <span class="comment">-- error later.</span></span><br><span class="line">    <span class="keyword">elseif</span> <span class="keyword">not</span> in_document <span class="keyword">and</span> #root &gt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- only the first document can be explicit</span></span><br><span class="line">      <span class="built_in">error</span>(<span class="string">&#x27;parse error: &#x27;</span>..line)</span><br><span class="line">    <span class="keyword">elseif</span> sfind(line, <span class="string">&#x27;^%s*%-&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- An array at the root</span></span><br><span class="line">      tinsert(root, parseseq(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="keyword">elseif</span> sfind(line, <span class="string">&#x27;^%s*[^%s]&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="comment">-- A hash at the root</span></span><br><span class="line">      <span class="keyword">local</span> level = countindent(line)</span><br><span class="line">      tinsert(root, parsemap(<span class="string">&#x27;&#x27;</span>, <span class="built_in">lines</span>, level))</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="comment">-- Shouldn&#x27;t get here.  @lines have whitespace-only lines</span></span><br><span class="line">      <span class="comment">-- stripped, and previous match is a line with any</span></span><br><span class="line">      <span class="comment">-- non-whitespace.  So this clause should only be reachable via</span></span><br><span class="line">      <span class="comment">-- a perlbug where \s is not symmetric with \S</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">-- uncoverable statement</span></span><br><span class="line">      <span class="built_in">error</span>(<span class="string">&#x27;parse error: &#x27;</span>..line)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> #root &gt; <span class="number">1</span> <span class="keyword">and</span> Null.isnull(root[<span class="number">1</span>]) <span class="keyword">then</span></span><br><span class="line">    tremove(root, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> root</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- Parse yaml string into table.</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">parse</span><span class="params">(source)</span></span></span><br><span class="line">  <span class="keyword">local</span> <span class="built_in">lines</span> = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(source .. <span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;(.-)\r?\n&#x27;</span>) <span class="keyword">do</span></span><br><span class="line">    tinsert(<span class="built_in">lines</span>, line)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> docs = parsedocuments(<span class="built_in">lines</span>)</span><br><span class="line">  <span class="keyword">if</span> #docs == <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> docs[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> docs</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  version = <span class="number">0.1</span>,</span><br><span class="line">  parse = parse,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>getFileList 获取文件夹列表</title>
    <url>/2022/08/03/getFileList/</url>
    <content><![CDATA[<div class="note success"><p><strong>getFileList</strong><br>简单的调用控制台获取文件夹列表实例</p>
</div>

<h1 id="获取文件夹列表"><a href="#获取文件夹列表" class="headerlink" title="获取文件夹列表"></a>获取文件夹列表</h1><blockquote>
<p>使用《署名—非商业性使用—相同方式共享 4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权。<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<p>[ toc ]</p>
<table>
<thead>
<tr>
<th align="left">System</th>
<th align="center">statement</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Windows</td>
<td align="center">supported</td>
</tr>
<tr>
<td align="left">Linux</td>
<td align="center">unsupported</td>
</tr>
<tr>
<td align="left">IOS</td>
<td align="center">unsupported</td>
</tr>
</tbody></table>
<hr>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0EyQzI5SzkvQTJDMjlLOS5naXRodWIuaW8vcmVsZWFzZXMvdGFnL2dldEZpbGVMaXN0">getFileList.zip<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h3><ul>
<li>作者： 简律纯</li>
<li>联系方式：qq:a2c29k9</li>
<li>版本：v1.0</li>
<li>更新日期：2022/08/03</li>
<li>关键词：<br><code>--getDiceList=</code><br><code>--getRootList=</code></li>
<li>许可协议：CC BY-NC-SA 4.0</li>
</ul>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>利用os库中的os. execute执行cmd指令，达到获取文件夹列表的目的。</p>
<h3 id="须知"><a href="#须知" class="headerlink" title="须知"></a>须知</h3><p>该脚本只适配win平台，linux版本将会在后续更新（或者你也可以修改脚本，将dir改为ls即可，注意linux斜杠和反斜杠与win的区别），MA暂无解决方法。</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><blockquote>
<p><code>--getDiceList=nil</code>与 <code>--getRootList=nil</code>分别用于获取dice根目录列表以及框架根目录列表，后接二级目录或更多（你需要用两个反斜杠<a href="">\</a>将他们连接）子目录来获取其列表。每次执行命令，脚本将会在dice根目录生成对应的DiceList.txt与RootList.txt，若文件太多发不出来也可以去那边查看。</p>
</blockquote>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><blockquote>
<p>获取根目录列表<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-08-03/1659492690-490071-13b5fe1b2faf154d.png"></p>
</blockquote>
<blockquote>
<p>获取根目录二级或三级文件夹列表<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-08-03/1659492727-777395-17c81e22d7ab297.png"><br><strong>获取Dice文件夹二级或更多级文件夹列表同理。</strong></p>
</blockquote>
<blockquote>
<p>获取Dice文件夹列表<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-08-03/1659492798-371911-1528bb3c4ba6fcb6.png"></p>
</blockquote>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">---------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- @getFileList 获取文件列表.</span></span><br><span class="line"><span class="comment">-- Author @简律纯(qq:a2c29k9)</span></span><br><span class="line"><span class="comment">-- @License MIT.</span></span><br><span class="line"><span class="comment">-- 2022/08/03</span></span><br><span class="line"><span class="comment">---------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">msg_order=&#123;[<span class="string">&quot;--getDiceList=&quot;</span>]=<span class="string">&quot;getDiceList&quot;</span>,[<span class="string">&quot;--getRootList=&quot;</span>]=<span class="string">&quot;getRootList&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">read_file = <span class="function"><span class="keyword">function</span><span class="params">(path,mode1,mode2)</span></span></span><br><span class="line">    <span class="keyword">local</span> text = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">local</span> file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>,mode1)</span><br><span class="line">    <span class="keyword">if</span> (file ~= <span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">      text = file.<span class="built_in">read</span>(file, mode2)</span><br><span class="line">      <span class="built_in">io</span>.<span class="built_in">close</span>(file)</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;没有找到文件哦~&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> text</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">getLineCount = <span class="function"><span class="keyword">function</span><span class="params">(path)</span></span></span><br><span class="line"><span class="keyword">local</span> BUFSIZE = <span class="number">2</span>^<span class="number">13</span></span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">io</span>.<span class="built_in">input</span>(<span class="built_in">path</span>)</span><br><span class="line"><span class="keyword">local</span> lc = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">lines</span>,rest = f:<span class="built_in">read</span>(BUFSIZE,<span class="string">&#x27;*line&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">lines</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> rest <span class="keyword">then</span> <span class="built_in">lines</span> = <span class="built_in">lines</span> .. rest .. <span class="string">&#x27;\n&#x27;</span> <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">local</span> _,t = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="built_in">lines</span>,<span class="string">&quot;%S+&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">        _,t = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="built_in">lines</span>,<span class="string">&quot;\n&quot;</span>,<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">        lc = lc + t</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> lc</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">getDiceList = <span class="function"><span class="keyword">function</span><span class="params">(msg)</span></span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">path</span> = <span class="built_in">string</span>.<span class="built_in">sub</span>(msg.fromMsg,#<span class="string">&#x27;--getDiceList=&#x27;</span>+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">local</span> Dir = <span class="built_in">path</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">path</span> == <span class="string">&#x27;nil&#x27;</span> <span class="keyword">then</span> Dir = <span class="literal">nil</span> <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> Dir <span class="keyword">then</span> </span><br><span class="line">        cmd = <span class="string">&#x27;dir &#x27;</span>.. getDiceDir()..<span class="string">&#x27;\\&#x27;</span>..<span class="built_in">path</span>..<span class="string">&#x27; /b &gt;&#x27;</span>..getDiceDir()..<span class="string">&#x27;//DiceList.txt&#x27;</span></span><br><span class="line">        <span class="built_in">os</span>.<span class="built_in">execute</span>(cmd)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cmd = <span class="string">&#x27;dir &#x27;</span>.. getDiceDir()..<span class="string">&#x27; /b &gt;&#x27;</span>..getDiceDir()..<span class="string">&#x27;//DiceList.txt&#x27;</span></span><br><span class="line">        <span class="built_in">os</span>.<span class="built_in">execute</span>(cmd)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> read_file(getDiceDir()..<span class="string">&#x27;//DiceList.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;*a&#x27;</span>)..<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&#x27;\n%x&#x27;</span>)..<span class="string">&#x27;\n文件夹与文件共 &#x27;</span>..getLineCount(getDiceDir()..<span class="string">&#x27;//DiceList.txt&#x27;</span>)..<span class="string">&#x27; 个&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">getRootList = <span class="function"><span class="keyword">function</span><span class="params">(msg)</span></span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">path</span> = <span class="built_in">string</span>.<span class="built_in">sub</span>(msg.fromMsg,#<span class="string">&#x27;--getRootList=&#x27;</span>+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">local</span> Dir = <span class="built_in">path</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">path</span> == <span class="string">&#x27;nil&#x27;</span> <span class="keyword">then</span> Dir = <span class="literal">nil</span> <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> Dir <span class="keyword">then</span> </span><br><span class="line">        cmd = <span class="string">&#x27;dir &#x27;</span>..<span class="built_in">path</span>..<span class="string">&#x27; /b &gt;&#x27;</span>..getDiceDir()..<span class="string">&#x27;//RootList.txt&#x27;</span></span><br><span class="line">        <span class="built_in">os</span>.<span class="built_in">execute</span>(cmd)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cmd = <span class="string">&#x27;dir /b &gt;&#x27;</span>..getDiceDir()..<span class="string">&#x27;//RootList.txt&#x27;</span></span><br><span class="line">        <span class="built_in">os</span>.<span class="built_in">execute</span>(cmd)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> read_file(getDiceDir()..<span class="string">&#x27;//RootList.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;*a&#x27;</span>)..<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&#x27;\n%x&#x27;</span>)..<span class="string">&#x27;\n文件夹与文件共 &#x27;</span>..getLineCount(getDiceDir()..<span class="string">&#x27;//RootList.txt&#x27;</span>)..<span class="string">&#x27; 个&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>repeat-joker</title>
    <url>/2022/07/14/repeat-joker/</url>
    <content><![CDATA[<details class="note "><summary><p>secondary</p>
</summary>
<p><strong>目前正在努力ing…</strong></p>

</details>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>使用《署名—非商业性使用—相同方式共享4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权<span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<div class="note warning"><p><strong>WARNING ⚠️</strong><br>提供了dice解决复读问题的一种方法思路，但不免会有诸多不便。</p>
<blockquote>
<p>采用读写json方式。</p>
</blockquote>
</div>


<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">msg_order=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;basicFunction&quot;</span>)</span><br><span class="line">json = <span class="built_in">require</span>(<span class="string">&quot;json&quot;</span>)</span><br><span class="line"></span><br><span class="line">msg_order[<span class="string">&quot;.repjoker&quot;</span>]=<span class="string">&quot;repjoker&quot;</span></span><br><span class="line"></span><br><span class="line">default_uid_json = <span class="string">[[&#123;&quot;uid&quot;:2753364619,&quot;msg&quot;:&quot;好耶&quot;,&quot;time&quot;:1657773120&#125;]]</span></span><br><span class="line">default_gid_json = <span class="string">[[&#123;&quot;gid&quot;:971050440,&quot;msg&quot;:&quot;简律纯&quot;,&quot;time&quot;:1657773120&#125;]]</span></span><br><span class="line">uid_path = <span class="string">&quot;plugin//repeat-joker//uid.json&quot;</span></span><br><span class="line">gid_path = <span class="string">&quot;plugin//repeat-joker//gid.json&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span>(getUserConf(getDiceQQ(),<span class="string">&#x27;repjoker_&#x27;</span>) ~= <span class="literal">true</span>) <span class="keyword">then</span></span><br><span class="line">    mkDirs(getDiceDir()..<span class="string">&#x27;//plugin//repeat-joker&#x27;</span>)</span><br><span class="line">    write_file(uid_path,default_uid_json)</span><br><span class="line">    write_file(gid_path,default_gid_json)</span><br><span class="line">    setUserConf(getDiceQQ(),<span class="string">&#x27;repjoker_&#x27;</span>,<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">--&gt; repeat-joker:初始化完成~</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">repjoker</span><span class="params">(msg)</span></span></span><br><span class="line">    <span class="keyword">local</span> default_data = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">local</span> data = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">local</span> son_orders = fitemSort(Match(msg.fromMsg,#<span class="string">&#x27;.repkiller&#x27;</span>+<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">if</span>(fitems[<span class="number">1</span>] == <span class="string">&quot;list&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span>(fitems[<span class="number">2</span>] == <span class="string">&quot;uid&quot;</span>) <span class="keyword">then</span></span><br><span class="line">            default_data = <span class="string">&quot;&#123;\&quot;uid_list\&quot;:[&quot;</span>..read_file(uid_path)..<span class="string">&quot;]&#125;&quot;</span></span><br><span class="line">            data = json.decode(default_data)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;self&#125;共【&quot;</span>..#data.uid_list..<span class="string">&quot;】条私聊记录:&quot;</span>..default_data</span><br><span class="line">        <span class="keyword">elseif</span>(fitems[<span class="number">2</span>] == <span class="string">&quot;gid&quot;</span>) <span class="keyword">then</span></span><br><span class="line">            default_data =  <span class="string">&quot;&#123;\&quot;gid_list\&quot;:[&quot;</span>..read_file(gid_path)..<span class="string">&quot;]&#125;&quot;</span></span><br><span class="line">            data =  json.decode(default_data)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;self&#125;共【&quot;</span>..#data.gid_list..<span class="string">&quot;】条群聊记录:\n&quot;</span>..default_data</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span>(fitems[<span class="number">1</span>] == <span class="string">&quot;uid&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        default_data = <span class="string">&quot;&#123;\&quot;uid_list\&quot;:[&quot;</span>..read_file(uid_path)..<span class="string">&quot;]&#125;&quot;</span></span><br><span class="line">        data = json.decode(default_data)</span><br><span class="line">        <span class="keyword">if</span>(fitems[<span class="number">2</span>] == <span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">if</span>(getUserConf(msg.uid,<span class="string">&#x27;uid-help&#x27;</span>) ~= <span class="literal">true</span>) <span class="keyword">then</span></span><br><span class="line">                setUserConf(msg.uid,<span class="string">&#x27;uid-help&#x27;</span>,<span class="literal">true</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;nick&#125;你的对象呢？\n是这样用哒:\n.repjoker uid &lt;QQ号&gt;\n记住了以后可不会再告诉你了&quot;</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;nick&#125;又没有对象了吗?&quot;</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">local</span> uid = getAtQQ(fitems[<span class="number">2</span>])</span><br><span class="line">            data = json.decode(<span class="built_in">string</span>.<span class="built_in">gsub</span>(default_data,<span class="string">&#x27;%s&#x27;</span>,<span class="string">&#x27;&#x27;</span>))</span><br><span class="line">            <span class="keyword">for</span> i=<span class="number">1</span>,#data.uid_list <span class="keyword">do</span></span><br><span class="line">                <span class="keyword">if</span>(data.uid_list[i].uid == <span class="built_in">tonumber</span>(uid)) <span class="keyword">then</span></span><br><span class="line">                    k = i</span><br><span class="line">                    out = <span class="string">&quot;已为&#123;nick&#125;找到&quot;</span>..getUserConf(<span class="built_in">tonumber</span>(data.uid_list[k].uid),<span class="string">&quot;nick#&quot;</span>)..<span class="string">&quot;最近的一条发言记录:\n&quot;</span>..stamp2Time(data.uid_list[k].<span class="built_in">time</span>)..<span class="string">&quot;:&quot;</span>..data.uid_list[k].msg</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    out = <span class="string">&quot;&#123;self&#125;处没有关于&quot;</span>.. getUserConf(<span class="built_in">tonumber</span>(uid),<span class="string">&quot;nick#&quot;</span>)..<span class="string">&quot;的发言记录哦~&quot;</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line">    <span class="keyword">elseif</span>(fitems[<span class="number">1</span>] == <span class="string">&quot;gid&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        default_data = <span class="string">&quot;&#123;\&quot;gid_list\&quot;:[&quot;</span>..read_file(gid_path)..<span class="string">&quot;]&#125;&quot;</span></span><br><span class="line">        data = json.decode(default_data)</span><br><span class="line">        <span class="keyword">if</span>(fitems[<span class="number">2</span>] == <span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">return</span> getGroupConf(<span class="built_in">tonumber</span>(msg.gid),<span class="string">&quot;name&quot;</span>)..<span class="string">&quot;(&quot;</span>..msg.gid..<span class="string">&quot;)还没有人复读过哦~#期待&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">local</span> gid = getAtQQ(fitems[<span class="number">2</span>])</span><br><span class="line">            data = json.decode(<span class="built_in">string</span>.<span class="built_in">gsub</span>(default_data,<span class="string">&#x27;%s&#x27;</span>,<span class="string">&#x27;&#x27;</span>))</span><br><span class="line">            <span class="keyword">for</span> i=<span class="number">1</span>,#data.msg <span class="keyword">do</span></span><br><span class="line">                <span class="keyword">if</span>(data.gid[i] == <span class="built_in">tonumber</span>(gid)) <span class="keyword">then</span></span><br><span class="line">                    k = i</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    out = <span class="string">&quot;&#123;self&#125;处没有关于群&quot;</span>.. getGroupConf(<span class="built_in">tonumber</span>(gid),<span class="string">&quot;name&quot;</span>)..<span class="string">&quot;(&quot;</span>..gid..<span class="string">&quot;)的用户发言记录哦~&quot;</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line">    <span class="keyword">elseif</span>(fitems[<span class="number">1</span>] == <span class="string">&quot;test&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        write_(msg.fromMsg,msg.uid,msg.fromGroup)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">write_</span><span class="params">(str,uid,gid)</span></span></span><br><span class="line">    <span class="keyword">if</span>(gid == <span class="string">&quot;0&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        write_file(uid_path,<span class="string">&quot;,&#123;\&quot;uid\&quot;:&quot;</span>..uid..<span class="string">&quot;,\&quot;msg\&quot;:\&quot;&quot;</span>..str..<span class="string">&quot;\&quot;,\&quot;time\&quot;:&quot;</span>..<span class="built_in">os</span>.<span class="built_in">time</span>()..<span class="string">&quot;&#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        write_file(gid_path,<span class="string">&quot;,&#123;\&quot;gid\&quot;:&quot;</span>..gid..<span class="string">&quot;,\&quot;msg\&quot;:\&quot;&quot;</span>..str..<span class="string">&quot;\&quot;,\&quot;time\&quot;:&quot;</span>..<span class="built_in">os</span>.<span class="built_in">time</span>()..<span class="string">&quot;&#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>在dice里关于ai的应用</title>
    <url>/2022/07/06/ai-reply/</url>
    <content><![CDATA[<div class="note primary"><p>一个失败品…</p>
</div>

<blockquote>
<p>使用《署名—非商业性使用—相同方式共享 4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权。<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>非常无聊，于是用正则以及dice的lua回复写了一个调用ai实例，总结了两个ai，青云客与思知。</p>
<p>使用方法：<br>调用青云客:setUserConf(getDiceQQ(),’ai’,1)<br>调用思知:setUserConf(getDiceQQ(),’ai’,2)</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">.reply set</span><br><span class="line">Regex=(.*)</span><br><span class="line">Lua=</span><br><span class="line"><span class="keyword">if</span> getUserConf(getDiceQQ(),<span class="string">&#x27;ai&#x27;</span>) == <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">url = <span class="string">&quot;http://api.qingyunke.com/api.php?key=free&amp;appid=0&amp;msg=&quot;</span> .. msg.fromMsg</span><br><span class="line">	res,data = http.get(url)</span><br><span class="line">	json = <span class="built_in">require</span>(<span class="string">&quot;json&quot;</span>)</span><br><span class="line">	j = json.decode(data)</span><br><span class="line"><span class="keyword">return</span> j.content</span><br><span class="line"><span class="keyword">elseif</span> getUserConf(getDiceQQ(),<span class="string">&#x27;ai&#x27;</span>) == <span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">url = <span class="string">&quot;https://api.ownthink.com/bot?spoken=&quot;</span> .. msg.fromMsg</span><br><span class="line">	res,data = http.get(url)</span><br><span class="line">	json = <span class="built_in">require</span>(<span class="string">&quot;json&quot;</span>)</span><br><span class="line">	j = json.decode(data)</span><br><span class="line"><span class="keyword">return</span> j.data.info.text</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>reborn 重开模拟器</title>
    <url>/2022/06/24/reborn/</url>
    <content><![CDATA[<div class="note success"><p><strong>reborn</strong><br>高考成绩出来了，重开吧，摆烂！</p>
</div>

<blockquote>
<p>使用《署名—非商业性使用—相同方式共享 4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权。<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<h2 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h2><ul>
<li>作者： 简律纯</li>
<li>联系方式：qq:a2c29k9</li>
<li>版本：v1.2 fix</li>
<li>更新日期：2022/06/24</li>
<li>简介：投胎</li>
<li>关键词：<code>reborn</code></li>
<li>许可协议：CC BY-NC-SA 4.0</li>
</ul>
<h2 id="详细介绍"><a href="#详细介绍" class="headerlink" title="详细介绍"></a>详细介绍</h2><p>首先感谢 @Natsume <span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5rb2tvbmEudGVjaC9kLzExOA==">随机国家<i class="fa fa-external-link-alt"></i></span><br>算起来Natsume的这个帖子已经两年整了。<br>ta说这似乎没什么用，于是我便突发奇想昨天晚上熬夜整了个重开模拟器。</p>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="https://cdn.jsdelivr.net/gh/A2C29K9/img@main/2022/06/24/49e9f345b9e057b6.png"></p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0EyQzI5SzkvQTJDMjlLOS5naXRodWIuaW8vcmVsZWFzZXMvdGFnL3JlYm9ybg==">reborn v1.2 fix.zip<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">---------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--reborn.重生|投胎 脚本</span></span><br><span class="line"><span class="comment">--countryu取自Natsume(https://forum.kokona.tech/d/118)</span></span><br><span class="line"><span class="comment">--作者:简律纯(qq:A2C29K9)</span></span><br><span class="line"><span class="comment">--2022.06.24 Fixed</span></span><br><span class="line"><span class="comment">---------------------------------------------------------------------</span></span><br><span class="line">msg_order=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">born</span><span class="params">(msg)</span></span></span><br><span class="line">    <span class="keyword">local</span> countryu = &#123; <span class="string">&quot;芬兰&quot;</span>,<span class="string">&quot;瑞典&quot;</span>,<span class="string">&quot;挪威&quot;</span>,<span class="string">&quot;冰岛&quot;</span>,<span class="string">&quot;丹麦&quot;</span>,<span class="string">&quot;法罗群岛（丹）&quot;</span> ,<span class="string">&quot;爱沙尼亚&quot;</span>,<span class="string">&quot;拉脱维亚&quot;</span>,<span class="string">&quot;立陶宛&quot;</span>,<span class="string">&quot;俄罗斯&quot;</span>,<span class="string">&quot;白俄罗斯&quot;</span>,<span class="string">&quot;乌克兰&quot;</span>,<span class="string">&quot;摩尔多瓦&quot;</span>,<span class="string">&quot;波兰&quot;</span>,<span class="string">&quot;捷克&quot;</span>,<span class="string">&quot;斯洛伐克&quot;</span>,<span class="string">&quot;匈牙利&quot;</span>,<span class="string">&quot;德国&quot;</span>,<span class="string">&quot;奥地利&quot;</span>,<span class="string">&quot;瑞士&quot;</span>,<span class="string">&quot;列支敦士登&quot;</span>,<span class="string">&quot;英国&quot;</span>,<span class="string">&quot;爱尔兰&quot;</span>,<span class="string">&quot;荷兰&quot;</span>,<span class="string">&quot;比利时&quot;</span>,<span class="string">&quot;卢森堡&quot;</span>,<span class="string">&quot;法国&quot;</span>,<span class="string">&quot;摩纳哥&quot;</span>,<span class="string">&quot;罗马尼亚&quot;</span>,<span class="string">&quot;保加利亚&quot;</span>,<span class="string">&quot;塞尔维亚&quot;</span>,<span class="string">&quot;黑山&quot;</span>,<span class="string">&quot;马其顿&quot;</span>,<span class="string">&quot;阿尔巴尼亚&quot;</span>,<span class="string">&quot;希腊&quot;</span>,<span class="string">&quot;斯洛文尼亚&quot;</span>,<span class="string">&quot;克罗地亚&quot;</span>,<span class="string">&quot;波斯尼亚和墨塞哥维那&quot;</span>,<span class="string">&quot;意大利&quot;</span>,<span class="string">&quot;梵蒂冈&quot;</span>,<span class="string">&quot;圣马力诺&quot;</span>,<span class="string">&quot;马耳他&quot;</span>,<span class="string">&quot;西班牙&quot;</span>,<span class="string">&quot;葡萄牙&quot;</span>,<span class="string">&quot;安道尔&quot;</span>,<span class="string">&quot;中国&quot;</span>,<span class="string">&quot;蒙古&quot;</span>,<span class="string">&quot;朝鲜&quot;</span>,<span class="string">&quot;韩国&quot;</span>,<span class="string">&quot;日本&quot;</span>,<span class="string">&quot;菲律宾&quot;</span>,<span class="string">&quot;越南&quot;</span>,<span class="string">&quot;老挝&quot;</span>,<span class="string">&quot;柬埔寨&quot;</span>,<span class="string">&quot;缅甸&quot;</span>,<span class="string">&quot;泰国&quot;</span>,<span class="string">&quot;马来西亚&quot;</span>,<span class="string">&quot;文莱&quot;</span>,<span class="string">&quot;新加坡&quot;</span>,<span class="string">&quot;印度尼西亚&quot;</span>,<span class="string">&quot;东帝汶&quot;</span>,<span class="string">&quot;尼泊尔&quot;</span>,<span class="string">&quot;不丹&quot;</span>,<span class="string">&quot;孟加拉国&quot;</span>,<span class="string">&quot;印度&quot;</span>,<span class="string">&quot;巴基斯坦&quot;</span>,<span class="string">&quot;斯里兰卡&quot;</span>,<span class="string">&quot;马尔代夫&quot;</span>,<span class="string">&quot;哈萨克斯坦&quot;</span>,<span class="string">&quot;土库曼斯坦&quot;</span>,<span class="string">&quot;塔吉克斯坦&quot;</span>,<span class="string">&quot;乌兹别克斯坦&quot;</span>,<span class="string">&quot;吉尔吉斯斯坦&quot;</span>,<span class="string">&quot;阿富汗&quot;</span>,<span class="string">&quot;伊拉克&quot;</span>,<span class="string">&quot;伊朗&quot;</span>,<span class="string">&quot;叙利亚&quot;</span>,<span class="string">&quot;约旦&quot;</span>,<span class="string">&quot;黎巴嫩&quot;</span>,<span class="string">&quot;以色列&quot;</span>,<span class="string">&quot;巴勒斯坦&quot;</span>,<span class="string">&quot;巴林&quot;</span>,<span class="string">&quot;卡塔尔&quot;</span>,<span class="string">&quot;科威特&quot;</span>,<span class="string">&quot;沙特阿拉伯&quot;</span>,<span class="string">&quot;阿拉伯联合酋长国&quot;</span>,<span class="string">&quot;阿曼&quot;</span>,<span class="string">&quot;也门&quot;</span>,<span class="string">&quot;格鲁吉亚&quot;</span>,<span class="string">&quot;亚美尼亚&quot;</span>,<span class="string">&quot;阿塞拜疆&quot;</span>,<span class="string">&quot;塞浦路斯&quot;</span>,<span class="string">&quot;土耳其&quot;</span>,<span class="string">&quot;埃及&quot;</span>,<span class="string">&quot;利比亚&quot;</span>,<span class="string">&quot;苏丹&quot;</span>,<span class="string">&quot;突尼斯&quot;</span>,<span class="string">&quot;阿尔及利亚&quot;</span>,<span class="string">&quot;摩洛哥&quot;</span>,<span class="string">&quot;亚速尔群岛（葡）&quot;</span>,<span class="string">&quot;马德拉群岛（葡）&quot;</span>,<span class="string">&quot;埃塞俄比亚&quot;</span>,<span class="string">&quot;厄立特里亚&quot;</span>,<span class="string">&quot;索马里&quot;</span>,<span class="string">&quot;吉布提&quot;</span>,<span class="string">&quot;肯尼亚&quot;</span>,<span class="string">&quot;坦桑尼亚&quot;</span>,<span class="string">&quot;乌干达&quot;</span>,<span class="string">&quot;卢旺达&quot;</span>,<span class="string">&quot;布隆迪&quot;</span>,<span class="string">&quot;塞舌尔&quot;</span>,<span class="string">&quot;赞比亚&quot;</span>,<span class="string">&quot;安哥拉&quot;</span>,<span class="string">&quot;津巴布韦&quot;</span>,<span class="string">&quot;马拉维&quot;</span>,<span class="string">&quot;莫桑比克&quot;</span>,<span class="string">&quot;博茨瓦纳&quot;</span>,<span class="string">&quot;纳米比亚&quot;</span>,<span class="string">&quot;斯威士兰&quot;</span>,<span class="string">&quot;莱索托&quot;</span>,<span class="string">&quot;马达加斯加&quot;</span>,<span class="string">&quot;科摩罗&quot;</span>,<span class="string">&quot;毛里求斯&quot;</span>,<span class="string">&quot;留尼旺（法）&quot;</span>,<span class="string">&quot;圣赫勒拿&quot;</span>,<span class="string">&quot;（英）南非&quot;</span>,<span class="string">&quot;乍得&quot;</span>,<span class="string">&quot;中非&quot;</span>,<span class="string">&quot;喀麦隆&quot;</span>,<span class="string">&quot;加蓬&quot;</span>,<span class="string">&quot;圣多美&quot;</span>,<span class="string">&quot;赤道几内亚&quot;</span>,<span class="string">&quot;刚果民主共和国（刚果)&quot;</span>,<span class="string">&quot;普林西比&quot;</span>,<span class="string">&quot;毛里塔尼亚&quot;</span>,<span class="string">&quot;塞内加尔&quot;</span>,<span class="string">&quot;冈比亚&quot;</span>,<span class="string">&quot;马里&quot;</span>,<span class="string">&quot;布基纳法索&quot;</span>,<span class="string">&quot;几内亚&quot;</span>,<span class="string">&quot;几内亚比绍&quot;</span>,<span class="string">&quot;塞拉利昂&quot;</span>,<span class="string">&quot;利比里亚&quot;</span>,<span class="string">&quot;科特迪瓦&quot;</span>,<span class="string">&quot;佛得角&quot;</span>,<span class="string">&quot;加纳&quot;</span>,<span class="string">&quot;多哥&quot;</span>,<span class="string">&quot;贝宁&quot;</span>,<span class="string">&quot;尼日尔&quot;</span>,<span class="string">&quot;加那利群岛（西）&quot;</span>,<span class="string">&quot;澳大利亚&quot;</span>,<span class="string">&quot;新西兰&quot;</span>,<span class="string">&quot;巴布亚新几内亚&quot;</span>,<span class="string">&quot;所罗门群岛&quot;</span>,<span class="string">&quot;瓦努阿图&quot;</span>,<span class="string">&quot;密克罗尼西亚&quot;</span>,<span class="string">&quot;马绍尔群岛&quot;</span>,<span class="string">&quot;帕劳&quot;</span>,<span class="string">&quot;瑙鲁&quot;</span>,<span class="string">&quot;基里巴斯&quot;</span>,<span class="string">&quot;图瓦卢&quot;</span>,<span class="string">&quot;萨摩亚&quot;</span>,<span class="string">&quot;斐济群岛&quot;</span>,<span class="string">&quot;汤加&quot;</span>,<span class="string">&quot;库克群岛（新）&quot;</span>,<span class="string">&quot;关岛（美）&quot;</span>,<span class="string">&quot;新喀里多尼亚（法）&quot;</span>,<span class="string">&quot;法属波利尼西亚&quot;</span>,<span class="string">&quot;皮特凯恩岛（英）&quot;</span>,<span class="string">&quot;瓦利斯与富图纳（法）&quot;</span>,<span class="string">&quot;纽埃（新）&quot;</span>,<span class="string">&quot;托克劳（新）&quot;</span>,<span class="string">&quot;美属萨摩亚&quot;</span>,<span class="string">&quot;北马里亚纳（美）&quot;</span>,<span class="string">&quot;加拿大&quot;</span>,<span class="string">&quot;美国&quot;</span>,<span class="string">&quot;墨西哥&quot;</span>,<span class="string">&quot;格陵兰（丹）&quot;</span>,<span class="string">&quot;危地马拉&quot;</span>,<span class="string">&quot;伯利兹&quot;</span>,<span class="string">&quot;萨尔瓦多&quot;</span>,<span class="string">&quot;洪都拉斯&quot;</span>,<span class="string">&quot;尼加拉瓜&quot;</span>,<span class="string">&quot;哥斯达黎加&quot;</span>,<span class="string">&quot;巴拿马&quot;</span>,<span class="string">&quot;巴哈马&quot;</span>,<span class="string">&quot;古巴&quot;</span>,<span class="string">&quot;牙买加&quot;</span>,<span class="string">&quot;海地&quot;</span>,<span class="string">&quot;多米尼加共和国&quot;</span>,<span class="string">&quot;安提瓜和巴布达&quot;</span>,<span class="string">&quot;圣基茨和尼维斯&quot;</span>,<span class="string">&quot;多米尼克&quot;</span>,<span class="string">&quot;圣卢西亚&quot;</span>,<span class="string">&quot;圣文森特和格林纳丁斯&quot;</span>,<span class="string">&quot;格林纳达&quot;</span>,<span class="string">&quot;特立尼达和多巴哥&quot;</span>,<span class="string">&quot;波多黎各（美）&quot;</span>,<span class="string">&quot;英属维尔京群岛&quot;</span>,<span class="string">&quot;巴巴多斯&quot;</span>,<span class="string">&quot;美属维尔京群岛&quot;</span>,<span class="string">&quot;蒙特塞拉特（英）&quot;</span>,<span class="string">&quot;瓜德罗普（法）&quot;</span>,<span class="string">&quot;马提尼克（法）&quot;</span>,<span class="string">&quot;荷属安的列斯&quot;</span>,<span class="string">&quot;安圭拉&quot;</span>,<span class="string">&quot;阿鲁巴（荷）&quot;</span>,<span class="string">&quot;特克斯和凯科斯群岛（英）&quot;</span>,<span class="string">&quot;开曼群岛（英）&quot;</span>,<span class="string">&quot;百慕大（英）&quot;</span>,<span class="string">&quot;哥伦比亚&quot;</span>,<span class="string">&quot;委内瑞拉&quot;</span>,<span class="string">&quot;圭亚那&quot;</span>,<span class="string">&quot;法属圭亚那&quot;</span>,<span class="string">&quot;苏里南&quot;</span>,<span class="string">&quot;厄瓜多尔&quot;</span>,<span class="string">&quot;秘鲁&quot;</span>,<span class="string">&quot;玻利维亚&quot;</span>,<span class="string">&quot;巴西&quot;</span>,<span class="string">&quot;智利&quot;</span>,<span class="string">&quot;阿根廷&quot;</span>,<span class="string">&quot;乌拉圭&quot;</span>,<span class="string">&quot;巴拉圭&quot;</span>&#125;</span><br><span class="line">    <span class="comment">-- 国家</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">local</span> cardu = &#123;<span class="string">&quot;你患有败血症\n&quot;</span>,<span class="string">&quot;你发育不良\n&quot;</span>,<span class="string">&quot;你得了新冠病毒\n&quot;</span>,<span class="string">&quot;你居然没有屁眼\n&quot;</span>,<span class="string">&quot;你喜欢和小狗抢食物\n&quot;</span>,<span class="string">&quot;你看得见空气中浮动的黑色粒子\n&quot;</span>..<span class="string">&quot;你有两个脑袋\n&quot;</span>,<span class="string">&quot;你喜欢咬脚趾甲\n&quot;</span>,<span class="string">&quot;你喜欢吃墙灰\n&quot;</span>,<span class="string">&quot;你患有糖尿病\n&quot;</span>,<span class="string">&quot;你的小心脏是露出来的\n&quot;</span>,<span class="string">&quot;你是畸形儿\n&quot;</span>,<span class="string">&quot;你看上去像个傻子\n&quot;</span>,<span class="string">&quot;你长得很丑\n&quot;</span>&#125;</span><br><span class="line">    <span class="comment">-- 病情描述，可增加</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">local</span> apper = &#123;<span class="string">&quot;你有着大大的眼睛\n&quot;</span>,<span class="string">&quot;你的睫毛很长很好看\n&quot;</span>,<span class="string">&quot;你总是很好奇的看着世界\n&quot;</span>,<span class="string">&quot;你五官端正\n&quot;</span>,<span class="string">&quot;你出生时没有大哭大闹\n&quot;</span>,<span class="string">&quot;你长得很可爱\n&quot;</span>,<span class="string">&quot;你看上去很乖巧\n&quot;</span>&#125;</span><br><span class="line">    <span class="comment">-- 健康描述，可增加</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">local</span> parent_good_tab = &#123;<span class="string">&quot;很穷，因此&quot;</span>,<span class="string">&quot;看你很可爱于是&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">local</span> parent_bad_tab = &#123;<span class="string">&quot;认为你长得太丑于是&quot;</span>,<span class="string">&quot;对你议论纷纷，不过他们&quot;</span>,<span class="string">&quot;发现你大有问题便把你扔了，但还是&quot;</span>&#125;</span><br><span class="line">    <span class="comment">-- 父母行为</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">local</span> sexu = ranint(<span class="number">1</span>,<span class="number">100</span>)</span><br><span class="line">    <span class="comment">--男女比例与下文53对应</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">local</span> health = ranint(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">    <span class="comment">--健康与否</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(sexu&lt;=<span class="number">53</span>) <span class="keyword">then</span> sex = <span class="string">&quot;男孩子&quot;</span> <span class="keyword">elseif</span>(sexu==<span class="number">1</span>) <span class="keyword">then</span> sex = <span class="string">&quot;雌雄同体&quot;</span> <span class="keyword">else</span> sex = <span class="string">&quot;女孩子&quot;</span> <span class="keyword">end</span></span><br><span class="line">    <span class="comment">-- 没有采用drawDeck(0,msg.fromQQ,&quot;性别&quot;)的原因是这样可以自定义男女比例</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">local</span> country = countryu[ranint(<span class="number">1</span>,#countryu)] <span class="comment">-- 抽取国家</span></span><br><span class="line">    <span class="keyword">local</span> card = <span class="string">&quot;&quot;</span> <span class="comment">-- 抽选病情</span></span><br><span class="line">    <span class="keyword">local</span> state = ranint(<span class="number">1</span>,<span class="number">20</span>) <span class="comment">-- 投胎成功概率</span></span><br><span class="line">    <span class="keyword">local</span> weight = ranint(<span class="number">20</span>,<span class="number">35</span>)/<span class="number">10</span> <span class="comment">-- 新生儿体重，折合公斤</span></span><br><span class="line">    <span class="keyword">local</span> weightu = <span class="string">&quot;&quot;</span> <span class="comment">-- 初始化关于体重的评价</span></span><br><span class="line">    <span class="keyword">local</span> healthu = <span class="string">&quot;&quot;</span> <span class="comment">-- 初始化健康与否</span></span><br><span class="line">    <span class="keyword">local</span> apperu = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">local</span> parent_good = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">local</span> parent_bad = <span class="string">&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(state==<span class="number">5</span>) <span class="keyword">then</span> <span class="comment">-- 失败概率为1/20</span></span><br><span class="line">        dead_weight = ranint(<span class="number">9</span>,<span class="number">18</span>)/<span class="number">10</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;nick&#125;投胎失败！\n你没能活到出生，祝你下次好运！\n你的父母收到了一具&quot;</span>..dead_weight..<span class="string">&quot;公斤的死尸x(没错就是你)&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="comment">-- 投胎失败</span></span><br><span class="line">    </span><br><span class="line">        <span class="keyword">if</span>(weight==<span class="number">3.2</span>) <span class="keyword">then</span></span><br><span class="line">            weightu = <span class="string">&quot;是标准体重哦~&quot;</span> </span><br><span class="line">            <span class="comment">-- 对体重等于3.2kg的评价</span></span><br><span class="line">        <span class="keyword">elseif</span>(weight&lt;=<span class="number">2.4</span>) <span class="keyword">then</span></span><br><span class="line">            weightu = <span class="string">&quot;有一点点轻呢。&quot;</span></span><br><span class="line">            <span class="comment">-- 对体重小于2.4kg的评价</span></span><br><span class="line">        <span class="keyword">elseif</span>(weight&gt;<span class="number">3.2</span>) <span class="keyword">then</span></span><br><span class="line">            weightu = <span class="string">&quot;可能是父母的原因让你有点点小胖吧~&quot;</span></span><br><span class="line">            <span class="comment">-- 对体重大于3.2kg的评价</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(country==<span class="string">&quot;中国&quot;</span>) <span class="keyword">then</span> name = drawDeck(<span class="number">0</span>,msg.fromQQ,<span class="string">&quot;随机姓名_zh&quot;</span>) <span class="keyword">or</span> drawDeck(<span class="number">0</span>,msg.fromQQ,<span class="string">&quot;随机姓名_enzh&quot;</span>)</span><br><span class="line">        <span class="comment">-- 中国人当然要有中文名</span></span><br><span class="line">        <span class="keyword">elseif</span>(country==<span class="string">&quot;日本&quot;</span>) <span class="keyword">then</span> name = drawDeck(<span class="number">0</span>,msg.fromQQ,<span class="string">&quot;随机姓名_jp&quot;</span>)</span><br><span class="line">        <span class="comment">-- 霓虹進的名字</span></span><br><span class="line">        <span class="keyword">else</span> name = drawDeck(<span class="number">0</span>,msg.fromQQ,<span class="string">&quot;随机姓名_en&quot;</span>) <span class="keyword">or</span> drawDeck(<span class="number">0</span>,msg.fromQQ,<span class="string">&quot;随机姓名_enzh&quot;</span>)</span><br><span class="line">        <span class="comment">-- 剩下一律包含en</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(health==<span class="number">1</span>) <span class="keyword">then</span> </span><br><span class="line">            healthu,apperu = <span class="string">&quot;你很健康呢！\n&quot;</span>,<span class="string">&quot;&quot;</span></span><br><span class="line">            <span class="keyword">local</span> start = ranint(<span class="number">1</span>,#apper//<span class="number">2</span>)</span><br><span class="line">                <span class="keyword">for</span> i=start,ranint(start+<span class="number">1</span>,#apper) <span class="keyword">do</span></span><br><span class="line">                    apperu = apperu..apper[i]</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">        <span class="comment">-- 健康描述</span></span><br><span class="line">            parent_good = parent_good_tab[ranint(<span class="number">1</span>,#parent_good_tab)]</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        </span><br><span class="line">            healthu = <span class="string">&quot;你并不是一个健康的孩子:\n&quot;</span></span><br><span class="line">            </span><br><span class="line">                <span class="keyword">local</span> start = ranint(<span class="number">1</span>,#cardu//<span class="number">2</span>)</span><br><span class="line">                <span class="keyword">for</span> i=start,ranint(start+<span class="number">1</span>,#cardu) <span class="keyword">do</span></span><br><span class="line">                    card = card..cardu[i]</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">        <span class="comment">-- 病情描述</span></span><br><span class="line">                parent_bad = parent_bad_tab[ranint(<span class="number">1</span>,#parent_bad_tab)]</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;nick&#125;投胎成功！\n你出生在&quot;</span>..country..<span class="string">&quot;，是&quot;</span>..sex..<span class="string">&quot;\n体重:&quot;</span>..weight..<span class="string">&quot;公斤 &quot;</span>..weightu..<span class="string">&quot;\n&quot;</span>..healthu..apperu..card..<span class="string">&quot;你的父母&quot;</span>.. parent_good..parent_bad..<span class="string">&quot;给你起名&quot;</span>..name</span><br><span class="line">        <span class="comment">-- 推起来输出</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">msg_order[<span class="string">&quot;reborn&quot;</span>]=<span class="string">&quot;born&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>unlimited-errors</title>
    <url>/2022/06/23/unlimited-errors/</url>
    <content><![CDATA[<details class="note "><summary><p>secondary</p>
</summary>
<p><strong>目前正在努力ing…</strong><br>利用 <code>error()</code>与 <code>pcall()</code>进行lua自定义报错</p>

</details>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>使用《署名—非商业性使用—相同方式共享4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权<span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span><br>作者：简律纯<br>联系方式：qq:A2C29K9<br>更新日期：2022/5/28</p>
</blockquote>
<div class="note warning"><p><strong>WARNING ⚠️</strong><br>本帖是作为利用basicFunction自带的chat指令并结合修改chat指令内tryCatch部分的函数名来进行报错排查的示例帖。</p>
<blockquote>
<p>简言之让报错更好看一点，更容易理解一点。</p>
</blockquote>
</div>

<p>taboo前些日子（好久了）评论了<span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5rb2tvbmEudGVjaC9kLzExNDctemhpLWxpbmctamlhby1iZW4ta3VvLXpoYW4taGFuLXNodS1rdS1jaGkteHUtemhvdS1nZW5n">basicFunction<i class="fa fa-external-link-alt"></i></span> 的tryCatch函数，他说，</p>
<blockquote>
<p>骰娘自检可以安排到行程上了</p>
</blockquote>
<p>虽然和写tryCatch的初衷完全不一样，但是返校后在考试过程中突然发现这会是一个很不错的想法，于是单独写一篇帖子介绍它。</p>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h3><p>首先我们在basicFunction的chat指令函数里的tryCatch部分写上这些代码，图片中的抓取报错函数示例是 <code>read_file()</code>函数，输入的参数是path，文件路径；返回值为文件内容。<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-28/1653713607-498189-screenshot-2022-05-28-12-41-00-92.jpg"><br>这段代码的意思是如果报错信息里有nil这个字符串那返回自定义报错回复内容，否则返回read_file函数的返回内容。</p>
<h3 id="2-第一次测试"><a href="#2-第一次测试" class="headerlink" title="2.第一次测试"></a>2.第一次测试</h3><p>接着输入 <code>#basicFunction:tryCatch</code>，不带任何参数，它等效于 <code>#basicFunction:read_file</code>接着的确报错了，但是因为 <code>read_file()</code>函数的path参数为空，报错信息中有nil字符串，于是被替换成了预先写好的自定义报错回复内容。<br>接着我使用 <code>#basicFunction:read_file myDiary.txt</code> 查看了此文件，由于这个文件并不存在，于是krypton返回了read_file里写好的自定义回复。<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-28/1653713518-807281-74092e56946e00a4.png"></p>
<h3 id="3-修改"><a href="#3-修改" class="headerlink" title="3.修改"></a>3.修改</h3><p>那么我们使用 <code>#basicFunction:write_file myDiary.txt [内容]</code>来创建这个文件并且写下点什么<del>烂人诅咒</del><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-28/1653713557-476439-432aa460c37a0fe9.png"></p>
<h3 id="4-第二次测试"><a href="#4-第二次测试" class="headerlink" title="4.第二次测试"></a>4.第二次测试</h3><p>已经写好了此文件，我们再用 <code>#basicFunction:read_file myDiary.txt</code>查看一下，来确保有此文件并且写入了内容。<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-28/1653713564-665112-3aa06a678e8679f3.png"></p>
<h3 id="5-第三次测试"><a href="#5-第三次测试" class="headerlink" title="5.第三次测试"></a>5.第三次测试</h3><p>一切顺利，这时候我们再输入正确的指令来试试抓取报错<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-28/1653713588-190887-7b41211a21a97483.png"><br>因为这次输入了参数，即 <code>#basicFunction:tryCatch myDiary.txt</code>等效于 <code>#basicFunction:read_file myDiary.txt</code>，所以顺理成章的返回了里面的文本内容。</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>附上tryCatch函数的内容，如下:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-----------------------------------------------------[15]:</span></span><br><span class="line"><span class="comment">-- 功能：监听错误报告如有则反馈</span></span><br><span class="line"><span class="comment">-- 参数：函数名</span></span><br><span class="line"><span class="comment">-- 返回：错误信息</span></span><br><span class="line"><span class="comment">-- 说明：lua有两个函数可以捕获异常，分别是pcall(fun[,arg1,...])和xpcall(fun,errfun,[,arg1,...])，对比这两个函数,xpcall多了异常处理，这里仅采用pcall()做示例</span></span><br><span class="line">tryCatch = <span class="function"><span class="keyword">function</span><span class="params">(fun,arg1,arg2,arg3,arg4,arg5)</span></span></span><br><span class="line">  <span class="keyword">local</span> ret,errMessage=<span class="built_in">pcall</span>(fun,arg1,arg2,arg3,arg4,arg5);</span><br><span class="line">  wrong=ret <span class="keyword">and</span> <span class="string">&quot;false&quot;</span> <span class="keyword">or</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">  <span class="comment">--print(&quot;是否错误:\n&quot;..错误..&quot; \n\n出错信息:\n&quot; .. (errMessage or &quot;无&quot;));</span></span><br><span class="line">  <span class="keyword">if</span> wrong==<span class="string">&quot;true&quot;</span> <span class="keyword">then</span><span class="comment">--错误提示</span></span><br><span class="line">    <span class="keyword">local</span> ret,errMessage=<span class="built_in">pcall</span>(fun,arg1,arg2,arg3,arg4,arg5)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;\n错误详情：\n&quot;</span>..errMessage</span><br><span class="line">  <span class="keyword">else</span><span class="comment">--无错误正常执行</span></span><br><span class="line">    ret,back=<span class="built_in">pcall</span>(fun,arg1,arg2,arg3,arg4,arg5);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;没有错误发生，返回值如下:\n&quot;</span>..back</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>chat-ActObjectValue 2.0</title>
    <url>/2022/06/18/chat-ActObjectValue-2.0/</url>
    <content><![CDATA[<details class="note "><summary><p>secondary</p>
</summary>
<p><strong>NOTICE</strong><br>2.0 或许在明天就出了？</p>

</details>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>说句实话在昨天2.0也只是个创建了一个空文件夹的存在，但是今天突然就写完了，并且写得彻彻底底的，总之能用便是了！</p>
</blockquote>
<p>只需要两步即可完成操作</p>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="添加回复命令"><a href="#添加回复命令" class="headerlink" title="添加回复命令"></a>添加回复命令</h3><p>在开始之前，你需要对自己家的骰娘输入以下命，其中，<code>require &quot;catchError&quot;</code>是必须的库，其他可根据需要添加。</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">.reply set</span><br><span class="line">Prefix=#</span><br><span class="line">Lua=</span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;catchError&quot;</span></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;basicFunction&quot;</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">load</span>(<span class="string">&quot;return &quot;</span>..<span class="built_in">string</span>.<span class="built_in">gsub</span>(msg.fromMsg,<span class="number">2</span>))()</span><br></pre></td></tr></table></figure>

<p>好的，目前你已经完成了三分之二了！<br>接下来让我们完成最后一步操作。</p>
<h3 id="安装库"><a href="#安装库" class="headerlink" title="安装库"></a>安装库</h3><p>1.下载<span class="exturl" data-url="aHR0cHM6Ly9naXJodWIuY29tL0EyQzI5Szk=">catchError<i class="fa fa-external-link-alt"></i></span><br>2.将lua库丢进<code>Diceki\lua\</code>文件夹下<br>3.在聊天窗口使用<code>.system load</code>命令</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>2022年7月16日江淮Tho 徐州站</title>
    <url>/2022/06/17/2022%E5%B9%B47%E6%9C%8816%E6%97%A5%E6%B1%9F%E6%B7%AETho-%E5%BE%90%E5%B7%9E%E7%AB%99/</url>
    <content><![CDATA[<div class="note primary"><p><strong>PRIMARY</strong><br>第二次当越共，曲子在写啦在写啦…</p>
</div>

<h2 id="一些记录"><a href="#一些记录" class="headerlink" title="一些记录"></a>一些记录</h2><h3 id="灵感"><a href="#灵感" class="headerlink" title="灵感"></a>灵感</h3><p>其实也没有什么灵感，莹莹和我说按照自己风格来，那么我就尽量写的悲伤一点吧。</p>
]]></content>
      <categories>
        <category>音乐</category>
        <category>Tho</category>
      </categories>
      <tags>
        <tag>徐州站</tag>
      </tags>
  </entry>
  <entry>
    <title>chat-ActObjectValue:help</title>
    <url>/2022/06/16/chat-AOV-help/</url>
    <content><![CDATA[<div class="note warning"><p><strong>WARNING</strong><br>这是关于<a href="https://a2c29k9.github.io/2022/06/11/chat-ActObjectValue/"><strong>chat-ActObjectValue</strong></a>的隐藏更新页面，你不应该在这里进行任何操作！</p>
</div>

<h2 id="1-0数组写法"><a href="#1-0数组写法" class="headerlink" title="1.0数组写法"></a>1.0数组写法</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*FINAL VERSION</span><br><span class="line">#&lt;get|set&gt;&lt;User|Group&gt;&lt;Today|Conf&gt; &lt;Object&gt; &lt;Ng&gt; [Value]</span><br><span class="line">*例1，获取2753364619用户的jrrp：</span><br><span class="line">#getUserToday 2753364619 jrrp</span><br><span class="line">*例2，特别地，清空：</span><br><span class="line">#setUserConf 2753364619 好感度 nil</span><br></pre></td></tr></table></figure>

<h2 id="2-0函数写法"><a href="#2-0函数写法" class="headerlink" title="2.0函数写法"></a>2.0函数写法</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*Ver:2.0</span><br><span class="line">#&lt;get|set&gt;&lt;User|Group&gt;&lt;Today|Conf&gt;(&lt;Object&gt;,&lt;Ng&gt;[,Value])</span><br><span class="line">*例1，获取2753364619用户的jrrp：</span><br><span class="line">#getUserToday(&quot;2753364619&quot;,&quot;jrrp&quot;,0)</span><br><span class="line">*例2，清空操作：</span><br><span class="line">#setUserConf(&quot;2753364619&quot;,&quot;好感度&quot;,nil)</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
  <entry>
    <title>chat-ActObjectValue 1.0</title>
    <url>/2022/06/11/chat-ActObjectValue-1.0/</url>
    <content><![CDATA[<blockquote>
<p>使用《署名—非商业性使用—相同方式共享 4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span><br>许可协议：CC BY-NC-SA 4.0<br>声明：本脚本适合<strong>有一定脚本编写基础</strong>的master使用，所造成的一切损失作者概不负责。</p>
</blockquote>
<div class="note warning"><p><strong>WARNING</strong><br>1.0已不再更新，或许你可以期待一下<a href="https://a2c29k9.github.io/2022/06/18/chat-ActObjectValue-2.0"><strong>2.0</strong></a>？</p>
</div>

<h3 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h3><ul>
<li>默认设置参数输入格式：#setUserConf <user_qq> <Conf_name> <value><br>清空和获取同理。</li>
<li>注意：必须写UserConf或者UserToday，否则不输出。</li>
<li>作者：简律纯</li>
<li>联系方式：qq:A2C29K9</li>
<li>版本：1.0(FINAL)</li>
<li>更新日期：2022/6/16</li>
</ul>
<blockquote>
<p>关键词：<code>#set</code> <code>#get</code> <code>#help log</code> <code>#help chataov</code></p>
</blockquote>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0EyQzI5SzkvQTJDMjlLOS5naXRodWIuaW8vcmVsZWFzZXMvdGFnL2NoYXQtQWN0T2JqZWN0VmFsdWU=">chat-ActObjectValue.zip<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在测试时总会遇到要重置或获取或设置某个用户配置的情况，但苦于没有这方面的指令，所以写了一个，目前可以在聊天窗口中设置用户全局配置或当日配置。<br>当然，你也可以使用更多花里胡哨的东西。</p>
<p><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-04-22/1650594557-426212-4acb8e97ccd6fe5a.png"><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-01/1651378789-731493-e5371e816c74ee6.png"></p>
<blockquote>
<p>清 空 可 使 用 set nil</p>
</blockquote>
<h2 id="进阶用法"><a href="#进阶用法" class="headerlink" title="进阶用法"></a>进阶用法</h2><ul>
<li>Chat-AOV；</li>
</ul>
<p>1.赋予所有人权限：<br><code>#setUserConf &lt;DiceQQ&gt; &lt;chat_perm&gt; 1</code><br>2.赋予单个用户权限：<br><code>.user trust &lt;用户&gt; 4</code></p>
<ul>
<li>Dice；</li>
</ul>
<p>1.查看|修改 jrrp：<br><code>#get|setUserToday &lt;用户&gt; &lt;jrrp&gt;</code><br>2.查看|修改 用户信任trust：<br><code>#get|setUserConf &lt;用户&gt; &lt;trust&gt;</code><br>3.查看|修改 群配置rc房规：<br><code>#get|setGroupConf &lt;群号&gt; &lt;rc房规&gt; &lt;参数&gt;</code><br>4.清空/重置 配置：<br><code>#setUserConf 2753364619 好感度 nil</code></p>
<h2 id="TODO-list"><a href="#TODO-list" class="headerlink" title="TODO list"></a>TODO list</h2><ul>
<li>各类报错回复</li>
<li>设置数据类型</li>
</ul>
<h2 id="关于5-8更新内容的示例"><a href="#关于5-8更新内容的示例" class="headerlink" title="关于5.8更新内容的示例"></a>关于5.8更新内容的示例</h2><p>5.8重点更新了记录的查看方式，新增了 <code>start_crrt</code>配置。</p>
<p>使用命令 <code>#setUserConf &lt;骰娘QQ&gt; start_crrt &lt;值&gt; </code>进行更改，其更改将会改变 <code>#help log</code>的返回内容：<br><code>start_crrt</code> 默认为0，这时查看日志会显示最新的一条。<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-07/1651953020-849510-29e7e2d45c34a60b.png"><br>当 <code>start_crrt</code>修改为1至5范围内的数字，会显示最近的2至6条记录。<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-07/1651953344-615701-574c97559bc3ae34.png"><br>设置范围6至30时会显示对应数量的记录，但不是在群里，bot会私发给指令发出者。<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-07/1651953608-811583-315f836bf1e21646.png"><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-07/1651953634-841540-1a024626f1fb6728.png"></p>
<h2 id="如何安装使用？"><a href="#如何安装使用？" class="headerlink" title="如何安装使用？"></a>如何安装使用？</h2><p>1.解压安装包<br>2.将安装包内文件与文件夹全部放入plugin文件夹<br>3.使用命令<code>.system load</code></p>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
  <entry>
    <title>basicFunction</title>
    <url>/2022/06/11/basicFunction/</url>
    <content><![CDATA[<blockquote>
<p>使用《署名—非商业性使用—相同方式共享 4.0 协议国际版》（CC BY-NC-SA 4.0）进行授权<br><span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9sZWdhbGNvZGUuemgtSGFucw==">https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<blockquote>
<p>作者：简律纯<br>联系方式：qq:A2C29K9<br>更新日期：2022/5/15<br>关键词： <code>#basicFunction:</code></p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><em>basicFunction</em> 的定位非常清晰，那就是作为脚本制作者的配置扩展，通过在lua脚本中 <code>require &quot;basicFunction&quot;</code>使用其中的函数。</p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0EyQzI5SzkvQTJDMjlLOS5naXRodWIuaW8vcmVsZWFzZXMvdGFnL2Jhc2ljRnVuY3Rpb24=">basicFunction-alpha(2).zip<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p> 衷心希望大家指正其中的错误和不足，促使 <em>basicFunction</em> 不断进步完善</p>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><h3 id="搭载"><a href="#搭载" class="headerlink" title="搭载"></a>搭载</h3><p><em>——开始之前的一些必要工作。</em><br>1.下载 _basicFunction_并解压得到 _basicFunction.lua_文件<br>2.将解压得到的 _basicFunction.lua_文件放入 DiceQQ\plugin\文件夹<br>3.在确保前两步万无一失的情况下回到聊天窗口使用 <code>.system load</code>命令重载 _basicFunction_脚本</p>
<blockquote>
<p>看到这里，你已经成功安装完成了！接下来让我们快速开始吧！</p>
</blockquote>
<h3 id="在聊天窗口使用"><a href="#在聊天窗口使用" class="headerlink" title="在聊天窗口使用"></a>在聊天窗口使用</h3><p> <em>为了方便测试函数，简律纯特别的写了一个聊天窗口指令，用于测试这些函数</em></p>
<h4 id="gt-xxx-basicFunction-help"><a href="#gt-xxx-basicFunction-help" class="headerlink" title="&gt; [xxx]. #basicFunction:help"></a>&gt; [xxx]. <code>#basicFunction:help</code></h4><p>这是一条用于获取帮助与更新的指令，不建议在群聊中使用。<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652528156-326881-4ce86491377f0bf4.png"></p>
<h4 id="gt-1-basicFunction-table-draw"><a href="#gt-1-basicFunction-table-draw" class="headerlink" title="&gt; [1] #basicFunction:table_draw"></a>&gt; [1] <code>#basicFunction:table_draw</code></h4><ul>
<li>功能：随机抽取一条数组内元素</li>
<li>参数：数组</li>
<li>返回：字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652528703-218364-341fe90b2615ec.png"></li>
</ul>
<h4 id="gt-2-basicFunction-num-or-string"><a href="#gt-2-basicFunction-num-or-string" class="headerlink" title="&gt;[2] #basicFunction:num_or_string"></a>&gt;[2] <code>#basicFunction:num_or_string</code></h4><ul>
<li>功能：判断是否为num类型，若是则自动转为num类型，否则为string</li>
<li>参数：x:待转换字符串</li>
<li>返回：number类型数据或string类型数据</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652529015-469470-1a7836efde35a6a8.png"></li>
</ul>
<h4 id="gt-3-basicFunction-getAtQQ"><a href="#gt-3-basicFunction-getAtQQ" class="headerlink" title="&gt;[3] #basicFunction:getAtQQ"></a>&gt;[3] <code>#basicFunction:getAtQQ</code></h4><ul>
<li>功能：取at对象的qq</li>
<li>参数：字符串（尤指CQ码）</li>
<li>返回：文本形式的qq号</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652531356-998104-7ef52e1b54b3e7ce.png"></li>
</ul>
<h4 id="gt-4-basicFunction-write-file"><a href="#gt-4-basicFunction-write-file" class="headerlink" title="&gt;[4] #basicFunction:write_file"></a>&gt;[4] <code>#basicFunction:write_file</code></h4><ul>
<li>功能：追加写文件，没有则创建</li>
<li>参数：文件路径，文件内容</li>
<li>返回：提示文本</li>
<li>说明：文件根目录DiceQQ//，我在生成文件时写了点注释，就比如会在当文件读写时在第一行特别注明文件名。</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652532311-215587-35aa6d41a8469dd9.png"><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652532306-79898-312b586e9182eb27.png"></li>
</ul>
<h4 id="gt-5-basicFunction-read-file"><a href="#gt-5-basicFunction-read-file" class="headerlink" title="&gt;[5] #basicFunction:read_file"></a>&gt;[5] <code>#basicFunction:read_file</code></h4><ul>
<li>功能：读取文件全部内容</li>
<li>参数：文件路径</li>
<li>返回：有内容则返回字符串否则返回错误提示</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652532848-201463-3b032d5b2cba1d44.png"></li>
</ul>
<h4 id="gt-6-basicFunction-filter-spec-chars"><a href="#gt-6-basicFunction-filter-spec-chars" class="headerlink" title="&gt;[6] #basicFunction:filter_spec_chars"></a>&gt;[6] <code>#basicFunction:filter_spec_chars</code></h4><ul>
<li>功能：捕获并提取所有中文，合并后输出</li>
<li>参数：待捕获中文的字符串</li>
<li>返回：所有中文合并后的字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652533253-492295-2c56f7627a54c1e4.png"></li>
</ul>
<h4 id="gt-7-basicFunction-getFileName"><a href="#gt-7-basicFunction-getFileName" class="headerlink" title="&gt;[7] #basicFunction:getFileName"></a>&gt;[7] <code>#basicFunction:getFileName</code></h4><ul>
<li>功能：取文件名，有扩展名</li>
<li>参数：文件路径</li>
<li>返回：字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652535078-993169-6fc947dd5fe881d3.png"></li>
</ul>
<h4 id="gt-8-basicFunction-getFileName2"><a href="#gt-8-basicFunction-getFileName2" class="headerlink" title="&gt;[8] #basicFunction:getFileName2"></a>&gt;[8] <code>#basicFunction:getFileName2</code></h4><ul>
<li>功能：取文件名，无扩展名</li>
<li>参数：文件路径</li>
<li>返回：字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652535090-491912-475b2a113fb5d0a2.png"></li>
</ul>
<h4 id="gt-9-basicFunction-utfStrLen"><a href="#gt-9-basicFunction-utfStrLen" class="headerlink" title="&gt;[9] #basicFunction:utfStrLen"></a>&gt;[9] <code>#basicFunction:utfStrLen</code></h4><ul>
<li>功能：返回文本中的字符总数目</li>
<li>参数：字符串</li>
<li>返回：数字</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652536608-701822-3e9f7c7fe9aa2e6d.png"></li>
</ul>
<h4 id="gt-10-basicFunction-MD5"><a href="#gt-10-basicFunction-MD5" class="headerlink" title="&gt;[10] #basicFunction:MD5"></a>&gt;[10] <code>#basicFunction:MD5</code></h4><ul>
<li>功能：转字符串为MD5</li>
<li>参数：待转换字符串</li>
<li>返回：MD5</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652537139-681577-35d6b69778ddd24a.png"><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652537160-810141-screenshot-2022-05-14-22-00-48-36.jpg"><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652537170-642829-screenshot-2022-05-14-22-01-10-15.jpg"></li>
</ul>
<h4 id="gt-11-basicFunction-table-exists"><a href="#gt-11-basicFunction-table-exists" class="headerlink" title="&gt;[11] #basicFunction:table_exists"></a>&gt;[11] <code>#basicFunction:table_exists</code></h4><ul>
<li>功能：判断数组中是否存在指定字符串</li>
<li>参数：数组，查找的字符串</li>
<li>返回：有则为true，没有则什么都不返回</li>
<li>示例：<br>先看一下内部代码，设定了一个tables<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652541688-375470-screenshot-2022-05-14-23-19-42-70.jpg"><br>接着输入看看效果<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652541709-390654-644c1b552d1efffa.png"></li>
</ul>
<h4 id="gt-12-basicFunction-encodeBase64"><a href="#gt-12-basicFunction-encodeBase64" class="headerlink" title="&gt;[12] #basicFunction:encodeBase64"></a>&gt;[12] <code>#basicFunction:encodeBase64</code></h4><ul>
<li>功能：返回字符串base64加密后的文本</li>
<li>参数：待加密字符串</li>
<li>返回：base64加密后文本</li>
<li>说明：因为不支持 <code>math.pow</code> 所以把写好的解密删了</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652542191-759474-40c8bacd80597d41.png"><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652537170-642829-screenshot-2022-05-14-22-01-10-15.jpg"><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652537160-810141-screenshot-2022-05-14-22-00-48-36.jpg"></li>
</ul>
<h4 id="gt-13-basicFunction-string-split"><a href="#gt-13-basicFunction-string-split" class="headerlink" title="&gt;[13] #basicFunction:string.split"></a>&gt;[13] <code>#basicFunction:string.split</code></h4><ul>
<li>功能：分割字符串</li>
<li>参数：待分割字符串，分隔符</li>
<li>返回：字符串表</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652551923-200447-7c2b18bc815913ea.png"></li>
</ul>
<h4 id="gt-14-basicFunction-string-count"><a href="#gt-14-basicFunction-string-count" class="headerlink" title="&gt;[14] #basicFunction:string.count"></a>&gt;[14] <code>#basicFunction:string.count</code></h4><ul>
<li>功能：统计字符串中字符的个数</li>
<li>参数：待统计的字符串</li>
<li>返回：总字符个数、英文字符数、中文字符数</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652544106-120444-2bc227485b07f827.png"></li>
</ul>
<h4 id="gt-15-basicFunction-string-width"><a href="#gt-15-basicFunction-string-width" class="headerlink" title="&gt;[15] #basicFunction:string.width"></a>&gt;[15] <code>#basicFunction:string.width</code></h4><ul>
<li>功能：计算字符串的宽度</li>
<li>参数：字符串</li>
<li>返回：数字</li>
<li>说明：这里一个中文等于两个英文，后面的情况同理，此函数和 _utfStrLen_原理类似</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652554310-333254-20bf853ca8430fd0.png"></li>
</ul>
<h4 id="gt-16-basicFunction-string-tocenter"><a href="#gt-16-basicFunction-string-tocenter" class="headerlink" title="&gt;[16] #basicFunction:string.tocenter"></a>&gt;[16] <code>#basicFunction:string.tocenter</code></h4><ul>
<li>功能: 把字符串扩展为长度为len,居中对齐, 其他地方以filledChar补齐</li>
<li>参数: 需要被扩展的字符、数字、字符串表，被扩展成的长度，填充字符（可以为空）</li>
<li>返回：字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652553472-701179-49139d6f69a2cd50.png"></li>
</ul>
<h4 id="gt-3-14-basicFunction-string-toleft"><a href="#gt-3-14-basicFunction-string-toleft" class="headerlink" title="&gt;[3+14] #basicFunction:string.toleft"></a>&gt;[3+14] <code>#basicFunction:string.toleft</code></h4><ul>
<li>功能: 把字符串扩展为长度为len,左对齐, 其他地方用filledChar补齐</li>
<li>参数：需要被扩展的字符、数字、字符串表，被扩展成的长度，填充字符（可以为空）</li>
<li>返回：字符串</li>
<li>说明：中文相当于2个英文</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652553319-940907-3d59e78bd1371f52.png"></li>
</ul>
<h4 id="gt-18-basicFunction-string-toright"><a href="#gt-18-basicFunction-string-toright" class="headerlink" title="&gt;[18] #basicFunction:string.toright"></a>&gt;[18] <code>#basicFunction:string.toright</code></h4><ul>
<li>功能: 把字符串扩展为长度为len,右对齐, 其他地方用filledChar补齐</li>
<li>参数：需要被扩展的字符、数字、字符串表，被扩展成的长度，填充字符（可以为空）</li>
<li>返回：字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652553542-607083-2e26d59c330482.png"></li>
</ul>
<h4 id="gt-19-basicFunction-string-ltrim"><a href="#gt-19-basicFunction-string-ltrim" class="headerlink" title="&gt;[19] #basicFunction:string.ltrim"></a>&gt;[19] <code>#basicFunction:string.ltrim</code></h4><ul>
<li>功能：对齐，去除通配符</li>
<li>参数：文本</li>
<li>返回：文本</li>
<li>示例：暂无</li>
</ul>
<h4 id="gt-20-basicFunction-string-rtrim"><a href="#gt-20-basicFunction-string-rtrim" class="headerlink" title="&gt;[20] #basicFunction:string.rtrim"></a>&gt;[20] <code>#basicFunction:string.rtrim</code></h4><ul>
<li>功能：对齐，去除通配符</li>
<li>参数：文本</li>
<li>返回：文本</li>
<li>示例：暂无</li>
</ul>
<h4 id="gt-21-basicFunction-string-trim"><a href="#gt-21-basicFunction-string-trim" class="headerlink" title="&gt;[21] #basicFunction:string.trim"></a>&gt;[21] <code>#basicFunction:string.trim</code></h4><ul>
<li>功能：对齐，去除通配符</li>
<li>参数：文本</li>
<li>返回：文本</li>
<li>示例：暂无</li>
</ul>
<h4 id="gt-22-basicFunction-ranStr"><a href="#gt-22-basicFunction-ranStr" class="headerlink" title="&gt;[22] #basicFunction:ranStr"></a>&gt;[22] <code>#basicFunction:ranStr</code></h4><ul>
<li>功能：随机输出字符串</li>
<li>参数：数字（输出个数）</li>
<li>返回：字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652554731-126125-39ebb8a73aeede9.png"></li>
</ul>
<h4 id="gt-23-basicFunction-tryCatch"><a href="#gt-23-basicFunction-tryCatch" class="headerlink" title="&gt;[23] #basicFunction:tryCatch"></a>&gt;[23] <code>#basicFunction:tryCatch</code></h4><ul>
<li>功能：监听错误报告如有则反馈</li>
<li>参数：函数名</li>
<li>返回：错误信息</li>
<li>说明：lua有两个函数可以捕获异常，分别是pcall(fun[,arg1,…])和xpcall(fun,errfun,[,arg1,…])，对比这两个函数,xpcall多了异常处理，这里仅采用pcall()做示例</li>
<li>示例：在没有改代码的情况下如果直接输入参数，将把输入的文本当做函数名找错<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652555008-125097-45b942fe53a293c.png"><br>我们看代码部分，我已经修改好了参数，好，现在它将会调用自己了<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652555367-976137-img20220515030858.jpg"><br>让我们猜一下会输出什么？<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652555401-577693-5f1c2329f7089d24.png"><br>是啊，没有错误，因为是奔着找错的目的执行 _找错_函数，当它能完整运行时自然是没有错误，简言之：</li>
</ul>
<p>错误的错误就是没有错误（好耶！我又说了一句凡人名言）</p>
<p>那么，换成别的函数还会如此吗？<br>这里以 <em>bubbleSort</em> 函数为例<em>因为很快就要讲到ta了</em><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652555938-996780-screenshot-2022-05-15-03-18-06-41.jpg"><br>很好，果然不负众望的报错并让krypton拦截了<br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652556076-36222-1f5d440399af905f.png"><br>那么输入参数会发生什么？<br>…to be continue</p>
<h4 id="gt-24-basicFunction-bubbleSort"><a href="#gt-24-basicFunction-bubbleSort" class="headerlink" title="&gt;[24] #basicFunction:bubbleSort"></a>&gt;[24] <code>#basicFunction:bubbleSort</code></h4><ul>
<li>功能：冒泡（升序）排序</li>
<li>参数：tab:目标表</li>
<li>返回：排好序的文本</li>
<li>示例：<br><code>tab = &#123;3, 4, 61, 7, 5, 8, 56, 14, 11, 10&#125; return bubbleSort(tab)</code><br><img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652556743-633251-36c62b11467b00a2.png"></li>
</ul>
<h4 id="gt-25-basicFunction-load"><a href="#gt-25-basicFunction-load" class="headerlink" title="&gt;[25] #basicFunction:load"></a>&gt;[25] <code>#basicFunction:load</code></h4><ul>
<li>功能：安全执行lua语句</li>
<li>说明：暂时弃用</li>
<li>示例：暂无</li>
</ul>
<h4 id="gt-26-basicFunction-sortTable-delRepeat"><a href="#gt-26-basicFunction-sortTable-delRepeat" class="headerlink" title="&gt;[26] #basicFunction:sortTable_delRepeat"></a>&gt;[26] <code>#basicFunction:sortTable_delRepeat</code></h4><ul>
<li>功能：将重复出现的数字全部删除(后续数字往前移)</li>
<li>参数：tab:数组</li>
<li>返回：去完重的字符串（多半还是降序的）</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652557118-960232-5fe3b9332f1eabbb.png"></li>
</ul>
<h4 id="gt-27-1-basicFunction-Round"><a href="#gt-27-1-basicFunction-Round" class="headerlink" title="&gt;[27-1] #basicFunction:Round"></a>&gt;[27-1] <code>#basicFunction:Round</code></h4><ul>
<li>功能：四舍五入(常用)</li>
<li>参数：num:待计算数字</li>
<li>返回：计算结果</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652557301-733453-57f1940480749985.png"></li>
</ul>
<h4 id="gt-27-2-basicFunction-Round2"><a href="#gt-27-2-basicFunction-Round2" class="headerlink" title="&gt;[27-2] #basicFunction:Round2"></a>&gt;[27-2] <code>#basicFunction:Round2</code></h4><ul>
<li>功能：四舍五入(奇进偶舍)</li>
<li>参数：num:待计算数字 i:保留几位小数</li>
<li>返回：计算结果</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652557524-430485-37f48a1ee6238e19.png"></li>
</ul>
<h4 id="gt-28-basicFunction-Multiply"><a href="#gt-28-basicFunction-Multiply" class="headerlink" title="&gt;[28] #basicFunction:Multiply"></a>&gt;[28] <code>#basicFunction:Multiply</code></h4><ul>
<li>功能：相乘，同时判断了是否有null值</li>
<li>参数：都看得懂吧//两个数字…</li>
<li>返回：计算结果</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652557646-168592-1b35afe337a9742d.png"></li>
</ul>
<h4 id="gt-29-basicFunction-Divide"><a href="#gt-29-basicFunction-Divide" class="headerlink" title="&gt;[29] #basicFunction:Divide"></a>&gt;[29] <code>#basicFunction:Divide</code></h4><ul>
<li>功能：相除</li>
<li>参数：denominator:除数 numerator:被除数</li>
<li>返回：计算结果</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652557740-451-6ccd7840db133641.png"></li>
</ul>
<h4 id="gt-30-1-basicFunction-Ceil"><a href="#gt-30-1-basicFunction-Ceil" class="headerlink" title="&gt;[30-1] #basicFunction:Ceil"></a>&gt;[30-1] <code>#basicFunction:Ceil</code></h4><ul>
<li>功能：取整</li>
<li>参数：数字</li>
<li>返回：结果</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652557790-14329-4f2b567f4dcf84d9.png"></li>
</ul>
<h4 id="gt-30-2-basicFunction-Ceil2"><a href="#gt-30-2-basicFunction-Ceil2" class="headerlink" title="&gt;[30-2] #basicFunction:Ceil2"></a>&gt;[30-2] <code>#basicFunction:Ceil2</code></h4><ul>
<li>参数：数字</li>
<li>返回：结果</li>
<li>说明：第二种取整思路</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652557836-897466-682bdcbbe4e50ec4.png"></li>
</ul>
<h4 id="gt-31-basicFunction-unicode2Chinese"><a href="#gt-31-basicFunction-unicode2Chinese" class="headerlink" title="&gt;[31] #basicFunction:unicode2Chinese"></a>&gt;[31] <code>#basicFunction:unicode2Chinese</code></h4><ul>
<li>功能：利用JSON解析器把Unicode转中文汉字</li>
<li>参数：uni:完整的json格式Unicode码</li>
<li>返回：汉字字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652558928-339373-407db05212e7f332.png"></li>
</ul>
<h4 id="gt-32-basicFunction-stamp2Time"><a href="#gt-32-basicFunction-stamp2Time" class="headerlink" title="&gt;[32] #basicFunction:stamp2Time"></a>&gt;[32] <code>#basicFunction:stamp2Time</code></h4><ul>
<li>功能：时间戳转时间</li>
<li>参数：Stamp:时间戳</li>
<li>返回：字符串</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652559106-59803-2aba66b7a6713455.png"></li>
</ul>
<h4 id="gt-33-basicFunction-Match"><a href="#gt-33-basicFunction-Match" class="headerlink" title="&gt;[33] #basicFunction:Match"></a>&gt;[33] <code>#basicFunction:Match</code></h4><ul>
<li>功能：匹配截取字符串</li>
<li>参数：msg:待匹配的字符串 num:截取位置</li>
<li>说明：汉字长度为2，特别注意</li>
<li>示例：<img src="https://dice-forum.s3.ap-northeast-1.amazonaws.com/2022-05-14/1652559448-296157-4861fe8be91b307b.png"></li>
</ul>
<h4 id="gt-34-1-basicFunction-fitemSort"><a href="#gt-34-1-basicFunction-fitemSort" class="headerlink" title="&gt;[34-1] #basicFunction:fitemSort"></a>&gt;[34-1] <code>#basicFunction:fitemSort</code></h4><ul>
<li>功能：取数据存入数组</li>
<li>参数：字符串</li>
<li>返回：数组</li>
<li>示例：暂无</li>
</ul>
<h4 id="gt-34-2-basicFunction-ffitemSort"><a href="#gt-34-2-basicFunction-ffitemSort" class="headerlink" title="&gt;[34-2] #basicFunction:ffitemSort"></a>&gt;[34-2] <code>#basicFunction:ffitemSort</code></h4><ul>
<li>功能：取数据存入数组</li>
<li>参数：字符串</li>
<li>返回：数组</li>
<li>示例：暂无</li>
</ul>
<h4 id="gt-FUNCTION-INDEX-amp-LIST"><a href="#gt-FUNCTION-INDEX-amp-LIST" class="headerlink" title="&gt; FUNCTION INDEX&amp;LIST:"></a>&gt; FUNCTION INDEX&amp;LIST:</h4><p>[1]table_draw(tab) LINE:48<br>[2]num_or_string(x) LINE:55<br>[3]getAtQQ(str) LINE:67<br>[4]write_file(path, text) LINE:79<br>[5]read_file(path) LINE:88<br>[6]filter_spec_chars(s) LINE:103<br>[7]getFileName(path) LINE:133<br>[8]getFileName2(path) LINE:140<br>[9]utfstrlen(str) LINE:147<br>[10]MD5(str) LINE:168<br>[11]table_exists(tables,value) LINE:395<br>[12]encodeBase64(source_str) LINE:408<br>[13]string.split(str, delimiter) LINE:443<br>[14]string.count(str) LINE:460<br>[15]string.width(str) LINE:470<br>[16]string.tocenter(str, len, filledChar) LINE:479<br>[17]string.toleft(str, len, filledChar) LINE:511<br>[18]string.toright(str, len, filledChar) LINE:540<br>[19]string.ltrim(str) LINE:573<br>[20]string.rtrim(str) LINE:577<br>[21]string.trim(str) LINE:581<br>[22]ranStr(num) LINE:588<br>[23]tryCatch(fun) LINE:604<br>[24]bubbleSort(tab) LINE:620<br>[25]弃用 LINE:646<br>[26]sortTable_delRepeat(tab) LINE:653<br>[27-1]Round(num, i) LINE:672<br>[27-2]Round2(num, i) LINE:681<br>[28]Multiply(num1,num2) LINE:702<br>[29]Divide(denominator,numerator) LINE:718<br>[30-1]Ceil(num) LINE:734<br>[30-2]Ceil2(num) LINE:753<br>[31]unicode2Chinese(uni) LINE:765<br>[32]stamp2Time(Stamp) LINE:782<br>[33]Match(msg,num) LINE:789<br>[34-1]fitemSort(rest) LINE:798<br>[34-2]ffitemSort(rest) LINE:809</p>
<h3 id="在lua编写过程中使用"><a href="#在lua编写过程中使用" class="headerlink" title="在lua编写过程中使用"></a>在lua编写过程中使用</h3><p>由于时间来不及，在lua中使用的教程与进阶用法将会在日后补齐。<br><strong>to be…</strong></p>
<h3 id="一些实例"><a href="#一些实例" class="headerlink" title="一些实例"></a>一些实例</h3><p><strong>getAtQQ</strong>的使用：<span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5rb2tvbmEudGVjaC9kLzExNDY=">【指令脚本】爬/丢/赞<i class="fa fa-external-link-alt"></i></span><br><strong>tryCatch</strong>的使用：<span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5rb2tvbmEudGVjaC9kLzExNjg=">【指令脚本/思想】巴拉巴拉骰娘自检和偷懒自定义报错什么的<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>技术</category>
        <category>Lua</category>
      </categories>
      <tags>
        <tag>Dice</tag>
      </tags>
  </entry>
</search>
